(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/address/edit"],{4459:function(e,t,r){"use strict";(function(e,t){var n=r("47a9");r("65e9");n(r("3240"));var a=n(r("836e"));e.__webpack_require_UNI_MP_PLUGIN__=r,t(a.default)}).call(this,r("3223")["default"],r("df3c")["createPage"])},"570f":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){t.stopPropagation(),e.form.status=1==e.form.status?0:1})},a=[]},"836e":function(e,t,r){"use strict";r.r(t);var n=r("570f"),a=r("be07");for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);var i=r("828b"),u=Object(i["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=u.exports},"928f":function(e,t,r){"use strict";(function(e){var n=r("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("7eb4")),o=n(r("34cf")),i=n(r("ee10")),u=n(r("7ca3")),s=r("8f59");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={components:{},data:function(){return{isLoad:!1,options:{},textArr:[{text:"删除",type:"cancel"},{text:"保存",type:"confirm"}],form:{id:0,user_name:"",mobile:"",address:"",address_info:"",lng:"",lat:"",status:0},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"输入联系人姓名",regType:2},{name:"mobile",checkType:"isMobile",errorMsg:"输入手机号"},{name:"address",checkType:"isNotNull",errorMsg:"设置地区"},{name:"address_info",checkType:"isNotNull",errorMsg:"输入街道、楼牌号等",regType:2}],lockTap:!1}},computed:(0,s.mapState)({primaryColor:function(e){return e.config.configInfo.primaryColor},subColor:function(e){return e.config.configInfo.subColor},location:function(e){return e.user.location},useChooseLocation:function(e){return e.user.useChooseLocation}}),onLoad:function(e){this.options=e,this.initIndex()},onShow:function(){this.useChooseLocation&&this.updateUserItem({key:"useChooseLocation",val:!1})},methods:l(l({},(0,s.mapMutations)(["updateUserItem","updateOrderItem"])),{},{initIndex:function(){var t=this;return(0,i.default)(a.default.mark((function r(){var n,o,i,u;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.options.id,o=void 0===n?0:n,e.setNavigationBarTitle({title:o?"编辑地址":"添加新地址"}),o){r.next=7;break}return t.textArr.splice(0,1),t.isLoad=!0,t.$util.setNavigationBarColor({bg:t.primaryColor}),r.abrupt("return");case 7:return r.next=9,t.$api.mine.addressInfo({id:o});case 9:for(u in i=r.sent,t.form)t.form[u]=i[u];t.$util.setNavigationBarColor({bg:t.primaryColor}),t.isLoad=!0;case 13:case"end":return r.stop()}}),r)})))()},toChooseLocation:function(){var e=this;return(0,i.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.updateUserItem({key:"useChooseLocation",val:!0}),t.next=3,e.$util.checkAuth({type:"userLocation"});case 3:e.initChooseLoca();case 4:case"end":return t.stop()}}),t)})))()},initChooseLoca:function(){var t=arguments,r=this;return(0,i.default)(a.default.mark((function n(){var i,u,s,c,l,f,d,p,m,h,v,b,g,k;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},n.next=3,e.chooseLocation(i);case 3:if(u=n.sent,s=(0,o.default)(u,2),c=s[0],l=s[1],f=c?{name:"",address:"",latitude:"",longitude:""}:l,d=f.name,p=void 0===d?"":d,m=f.address,h=void 0===m?"":m,v=f.latitude,b=void 0===v?"":v,g=f.longitude,k=void 0===g?"":g,h||(h=p,p=""),r.updateUserItem({key:"useChooseLocation",val:!1}),h){n.next=12;break}return n.abrupt("return");case 12:r.form.lat=b,r.form.lng=k,r.form.address=h,r.form.address_info||(r.form.address_info=p);case 16:case"end":return n.stop()}}),n)})))()},toDel:function(){var t=this;return(0,i.default)(a.default.mark((function r(){var n,i,u,s,c,l;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.showModal({title:"提示",content:"请确认是否要删除此数据?"});case 2:if(n=r.sent,i=(0,o.default)(n,2),i[0],u=i[1].confirm,u){r.next=8;break}return r.abrupt("return");case 8:if(s=t.form.id,c=t.$util.getPage(-1),l=c.check_id,!t.lockTap){r.next=12;break}return r.abrupt("return");case 12:return t.lockTap=!0,t.$util.showLoading(),r.prev=14,r.next=17,t.$api.mine.addressDel({id:s});case 17:t.$util.hideAll(),t.$util.showToast({title:"删除成功"}),s==l&&t.updateOrderItem({key:"haveOperItem",val:!0}),setTimeout((function(){t.lockTap=!1,t.$util.back(),t.$util.goUrl({url:1,openType:"navigateBack"})}),1e3),r.next=26;break;case 23:r.prev=23,r.t0=r["catch"](14),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 26:case"end":return r.stop()}}),r,null,[[14,23]])})))()},validate:function(e){var t=new this.$util.Validate;this.rule.map((function(r){var n=r.name;t.add(e[n],r)}));var r=t.start();return r},submit:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var r,n,o;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$util.deepCopy(e.form),n=e.validate(r),!n){t.next=5;break}return e.$util.showToast({title:n}),t.abrupt("return");case 5:if(!e.lockTap){t.next=7;break}return t.abrupt("return");case 7:return e.lockTap=!0,e.$util.showLoading(),t.prev=9,o=r.id?"addressUpdate":"addressAdd",t.next=13,e.$api.mine[o](r);case 13:e.$util.hideAll(),e.$util.showToast({title:"保存成功"}),setTimeout((function(){e.$util.back(),e.$util.goUrl({url:1,openType:"navigateBack"})}),1e3),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](9),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),2e3);case 21:case"end":return t.stop()}}),t,null,[[9,18]])})))()}})};t.default=f}).call(this,r("df3c")["default"])},be07:function(e,t,r){"use strict";r.r(t);var n=r("928f"),a=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a}},[["4459","common/runtime","common/vendor"]]]);