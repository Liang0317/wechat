(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/salesman/apply"],{"2d5d":function(t,e,n){"use strict";(function(t){var r=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("7eb4")),i=r(n("7ca3")),o=r(n("ee10")),u=n("8f59");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={components:{},data:function(){return{isLoad:!1,options:{},tipArr:{1:[{text:"您已经成功提交申请",color:0},{text:"审核将在3个工作日内出结果，请耐心等待",color:0}],2:[{text:"恭喜您，审核通过！",color:0},{text:"您已具备业务员资格，快去分享体验吧~",color:0}],3:[{text:"请联系平台管理人员询问原因",color:0}],4:[{text:"请联系平台管理人员询问失败原因",color:0}]},buttonArr:{1:[{text:"个人中心",type:"cancel"}],2:[{text:"去分享",type:"confirm"}],3:[{text:"个人中心",type:"cancel"}],4:[{text:"再次申请",type:"confirm"},{text:"个人中心",type:"cancel"}]},title:{"-1":"申请业务员",1:"等待审核",2:"",3:"取消授权",4:"申请失败"},image:{1:"https://lbqny.migugu.com/admin/public/apply_wait.jpg",2:"https://lbqny.migugu.com/admin/public/apply_suc.jpg",3:"https://lbqny.migugu.com/admin/public/apply_fail.jpg",4:"https://lbqny.migugu.com/admin/public/apply_fail.jpg"},salesman_status:-1,form:{id:0,admin_id:0,user_name:"",phone:""},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"请输入您的真实姓名",regType:2},{name:"phone",checkType:"isMobile",errorMsg:"请输入常用手机号码"}],lockTap:!1}},computed:(0,u.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},scanRecordId:function(t){return t.user.scanRecordId}}),onLoad:function(e){var n=this;return(0,o.default)(a.default.mark((function r(){var i,o,u,c,s;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.$util.showLoading(),i=e,o=i.admin_id,u=void 0===o?0:o,u&&n.addScanRecord({type:5,qr_id:u}),!u){r.next=9;break}return r.next=6,n.updateCommonOptions(e);case 6:r.t0=r.sent,r.next=10;break;case 9:r.t0=e;case 10:return e=r.t0,n.options=e,n.form.admin_id=u,r.next=15,n.initIndex();case 15:n.scanRecordId&&n.updateScanRecord(),c=n.title,s=n.salesman_status,t.setNavigationBarTitle({title:c[s]}),n.isLoad=!0;case 19:case"end":return r.stop()}}),r)})))()},methods:s(s(s({},(0,u.mapActions)(["getConfigInfo","getUserInfo","updateCommonOptions","addScanRecord","updateScanRecord"])),(0,u.mapMutations)(["updateUserItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,o.default)(a.default.mark((function n(){var r,i,o,u,c,s,l;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],n.next=3,e.$api.salesman.salesmanInfo();case 3:if(r=n.sent,e.$util.setNavigationBarColor({bg:e.primaryColor}),r&&(!r||r.id)){n.next=8;break}return e.$util.hideAll(),n.abrupt("return");case 8:for(u in i=e.options.admin_id,o=void 0===i?0:i,o&&(r.admin_id=o),e.form)e.form[u]=r[u];c=r.status,s=r.sh_text,l=o||4!=c?c:-1,e.salesman_status=l,4==l&&s&&(e.tipArr[4][0].text=s),e.$util.hideAll();case 16:case"end":return n.stop()}}),n)})))()},initRefresh:function(){this.initIndex(!0)},confirm:function(){var e=this;return(0,o.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.salesman_status,4!=r){n.next=5;break}return e.salesman_status=-1,t.setNavigationBarTitle({title:"申请业务员"}),n.abrupt("return");case 5:e.$util.goUrl({url:"/user/pages/salesman/income",openType:"reLaunch"});case 6:case"end":return n.stop()}}),n)})))()},validate:function(t){var e=new this.$util.Validate;this.rule.map((function(n){var r=n.name;e.add(t[r],n)}));var n=e.start();return n},submit:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var n,r,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$util.deepCopy(t.form),r=t.validate(n),!r){e.next=5;break}return t.$util.showToast({title:r}),e.abrupt("return");case 5:if(i=t.options.admin_id,i&&(n.admin_id=i),!t.lockTap){e.next=9;break}return e.abrupt("return");case 9:return t.lockTap=!0,t.$util.showLoading(),e.prev=11,e.next=14,t.$api.salesman.applySalesman(n);case 14:t.$util.hideAll(),t.$util.showToast({title:"提交成功"}),setTimeout((function(){t.$util.back(),t.$util.goUrl({url:"/user/pages/apply-result?type=4",openType:"redirectTo"})}),1e3),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](11),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 22:case"end":return e.stop()}}),e,null,[[11,19]])})))()}})};e.default=l}).call(this,n("df3c")["default"])},"51c9":function(t,e,n){"use strict";n.r(e);var r=n("e44e"),a=n("5c18");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);var o=n("828b"),u=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=u.exports},"5c18":function(t,e,n){"use strict";n.r(e);var r=n("2d5d"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},6212:function(t,e,n){"use strict";(function(t,e){var r=n("47a9");n("65e9");r(n("3240"));var a=r(n("51c9"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},e44e:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.isLoad?t.options.admin_id&&-1!=t.salesman_status||!t.options.admin_id&&[1,2,3].includes(t.salesman_status):null);t._isMounted||(t.e0=function(e){return t.$util.goUrl({url:"/pages/mine",openType:"reLaunch"})}),t.$mp.data=Object.assign({},{$root:{g0:n}})},a=[]}},[["6212","common/runtime","common/vendor"]]]);