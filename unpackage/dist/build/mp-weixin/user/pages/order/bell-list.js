(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/order/bell-list"],{"3aac":function(t,e,a){"use strict";a.r(e);var r=a("4b62"),n=a.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(i);e["default"]=n.a},"4b62":function(t,e,a){"use strict";(function(t){var r=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("7eb4")),i=r(a("7ca3")),o=r(a("ee10")),c=a("8f59");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){(0,i.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={components:{},data:function(){return{options:{},statusType:{"-1":"已取消",1:"待支付",2:"待服务",3:this.$t("action.attendantName")+"接单",4:this.$t("action.attendantName")+"出发",5:this.$t("action.attendantName")+"到达",6:"服务中",7:"已完成",8:"待转单"},param:{page:1},list:{data:[]},loading:!0,popupInfo:{},lockTap:!1}},computed:(0,c.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo},userInfo:function(t){return t.user.userInfo}}),onLoad:function(t){var e=this;return(0,o.default)(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.options=t,e.param.order_id=t.id,a.next=4,e.initIndex();case 4:case"end":return a.stop()}}),a)})))()},onPullDownRefresh:function(){t.showNavigationBarLoading(),this.initRefresh(),t.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.loading=!0,this.getList(this.param.page+1))},methods:s(s(s({},(0,c.mapActions)(["getConfigInfo","getOrderList"])),(0,c.mapMutations)(["updateOrderItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,o.default)(n.default.mark((function a(){return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],a.next=3,e.getList(1);case 3:e.$util.setNavigationBarColor({bg:e.primaryColor});case 4:case"end":return a.stop()}}),a)})))()},initRefresh:function(){this.initIndex(!0)},getList:function(){var t=arguments,e=this;return(0,o.default)(n.default.mark((function a(){var r,i,o,c;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:0,r&&(e.param.page=r),i=e.list,o=e.param,a.next=5,e.$api.order.getAddClockOrder(o);case 5:c=a.sent,1==e.param.page||(c.data=i.data.concat(c.data)),e.list=c,e.loading=!1,e.$util.hideAll();case 9:case"end":return a.stop()}}),a)})))()},toCancel:function(t){var e=this;return(0,o.default)(n.default.mark((function a(){var r,i,o,c,u,s,l;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=e.list.data[t],i=r.id,o=r.order_code,c=r.order_goods,u=r.pay_type,s=c[0].goods_cover,e.popupInfo={id:i,name:"系统单号：".concat(o),image:s,index:t},l=1==u?"cancel_item":"del_item",e.$refs[l].open();case 5:case"end":return a.stop()}}),a)})))()},confirmCancel:function(){var t=this;return(0,o.default)(n.default.mark((function e(){var a,r,i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.popupInfo,r=a.id,i=a.index,e.next=3,t.$api.order.cancelOrder({id:r});case 3:0==t.activeIndex?t.list.data[i].pay_type=-1:t.list.data.splice(i,1),t.$util.showToast({title:"取消成功"}),t.$refs.cancel_item.close();case 6:case"end":return e.stop()}}),e)})))()},confirmDel:function(){var t=this;return(0,o.default)(n.default.mark((function e(){var a,r,i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.popupInfo,r=a.id,i=a.index,e.next=3,t.$api.order.delOrder({id:r});case 3:t.list.data.splice(i,1),t.$util.showToast({title:"删除成功"}),t.$refs.del_item.close(),t.$util.back();case 7:case"end":return e.stop()}}),e)})))()},toPay:function(t){var e=this;return(0,o.default)(n.default.mark((function a(){var r,i,o,c,u;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.lockTap){a.next=2;break}return a.abrupt("return");case 2:return e.lockTap=!0,e.$util.showLoading(),r=e.list.data[t],i=r.id,o=r.pay_model,a.prev=5,a.next=8,e.$api.order.rePayOrder({id:i});case 8:if(c=a.sent,u=c.pay_list,e.$util.hideAll(),!u){a.next=26;break}return 3==o&&(u={orderInfo:u,provider:"alipay"}),a.prev=13,a.next=16,e.$util.pay(u);case 16:e.$util.showToast({title:"支付成功"}),0==e.activeIndex?e.list.data[t].pay_type=2:e.list.data.splice(t,1),e.lockTap=!1,a.next=26;break;case 21:return a.prev=21,a.t0=a["catch"](13),e.$util.showToast({title:"支付失败"}),e.lockTap=!1,a.abrupt("return");case 26:a.next=31;break;case 28:a.prev=28,a.t1=a["catch"](5),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),2e3);case 31:case"end":return a.stop()}}),a,null,[[5,28],[13,21]])})))()},toHx:function(t){var e=this;return(0,o.default)(n.default.mark((function a(){var r,i,o;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=e.list.data[t],i=r.id,o=r.qr,e.popupInfo={id:i,image:o},e.$refs.hx_item.open();case 3:case"end":return a.stop()}}),a)})))()},goDetail:function(t,e){var a=this.list.data[t].id,r="/user/pages/order/".concat(e,"?id=").concat(a);this.$util.goUrl({url:r})},toAgain:function(t){var e=this;return(0,o.default)(n.default.mark((function a(){var r,i,o;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.list.data[t],i=r.id,o=r.coach_id,a.next=3,e.$api.order.onceMoreOrder({order_id:i});case 3:e.$util.goUrl({url:"/user/pages/order?id=".concat(o)});case 4:case"end":return a.stop()}}),a)})))()},toCopy:function(t){var e=this.$refs.user_privacy.check();e?this.$refs.user_privacy.open():this.$util.goUrl({url:t,openType:"copy"})}})};e.default=l}).call(this,a("df3c")["default"])},a781:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,a=(t._self._c,t.__map(t.list.data,(function(e,a){var r=t.__get_orig(e),n=1!=e.pay_type?[2,3,4,5,6].includes(e.pay_type):null,i=t.$t("action.attendantName");return{$orig:r,g0:n,m0:i}}))),r=t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0:null,n=!t.loading&&t.list.data.length<=0&&1==t.list.current_page;t._isMounted||(t.e0=function(e,a){var r=arguments[arguments.length-1].currentTarget.dataset,n=r.eventParams||r["event-params"];a=n.item;return e.stopPropagation(),t.$util.goUrl({url:"/user/pages/bell/list?id="+a.id+"&coach_id="+a.coach_id})}),t.$mp.data=Object.assign({},{$root:{l0:a,g1:r,g2:n}})},n=[]},aaa3:function(t,e,a){"use strict";(function(t,e){var r=a("47a9");a("65e9");r(a("3240"));var n=r(a("f043"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(n.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},f043:function(t,e,a){"use strict";a.r(e);var r=a("a781"),n=a("3aac");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);var o=a("828b"),c=Object(o["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=c.exports}},[["aaa3","common/runtime","common/vendor"]]]);