(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/channel/income"],{"0de1":function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("7eb4")),r=i(n("ee10")),o=i(n("7ca3")),s=n("8f59");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,o.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c={components:{},data:function(){return{isLoad:!1,today:"",preCheck:{tabInd:2,channelInd:0,start_time:"",end_time:""},tabInd:2,tabList:[{id:1,title:"今日",start_time:"",end_time:""},{id:2,title:"近7日",start_time:"",end_time:""},{id:3,title:"近30日",start_time:"",end_time:""},{id:4,title:"自定义",start_time:"",end_time:""}],detail:{},base_channel:[],channelInd:0,param:{page:1,name:""},list:{data:[]},loading:!0}},computed:(0,s.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo},userInfo:function(t){return t.user.userInfo}}),onLoad:function(){this.initIndex()},onUnload:function(){this.$util.back()},onPullDownRefresh:function(){t.showNavigationBarLoading(),this.initRefresh(),t.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},methods:l(l({},(0,s.mapMutations)([])),{},{initIndex:function(){var e=arguments,n=this;return(0,r.default)(a.default.mark((function i(){var r,o,s,u;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],n.$util.showLoading(),r=new Date(Math.ceil((new Date).getTime())),o=n.$util.formatTime(r,"YY-M-D"),864e5,s=1e3*n.$util.DateToUnix(o),n.today=o,n.tabList[0].start_time=o,n.tabList[0].end_time=o,n.tabList[1].start_time=n.$util.formatTime(s-6048e5,"YY-M-D"),n.tabList[1].end_time=o,n.tabList[2].start_time=n.$util.formatTime(s-2592e6,"YY-M-D"),n.tabList[2].end_time=o,i.next=15,n.getList();case 15:return i.next=17,n.$api.channel.channelQrSelect();case 17:u=i.sent,u.unshift({id:0,title:"默认码"}),u.unshift({id:-1,title:"全部"}),n.base_channel=u,n.$util.setNavigationBarColor({bg:n.primaryColor}),t.setNavigationBarTitle({title:"我是"+n.$t("action.channelName")}),n.isLoad=!0,n.$util.hideAll();case 25:case"end":return i.stop()}}),i)})))()},initRefresh:function(){this.param.page,this.initIndex(!0)},toSearch:function(t){this.param.page=1,this.param.name=t,this.getList()},getList:function(){var t=this;return(0,r.default)(a.default.mark((function e(){var n,i,r,o,s,u,l,c,d,f,h,p,m;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.list,i=t.tabInd,r=t.tabList,o=t.channelInd,s=t.base_channel,u=r[i],l=u.start_time,c=u.end_time,d=t.$util.deepCopy(t.param),d.start_time=t.$util.DateToUnix(l),d.end_time=t.$util.DateToUnix(c)+86400-1,s.length>0&&(f=s[o].id,h=void 0===f?-1:f,-1!==h&&(d.qr_id=h)),1!=d.page){e.next=12;break}return p=t.$util.deepCopy(d),delete p.page,e.next=11,t.$api.channel.index(p);case 11:t.detail=e.sent;case 12:return e.next=14,t.$api.channel.orderList(d);case 14:m=e.sent,1==t.param.page||(m.data=n.data.concat(m.data)),t.list=m,t.loading=!1,t.$util.hideAll();case 18:case"end":return e.stop()}}),e)})))()},pickerChange:function(t,e){var n=this.tabList[3],i=n.start_time,a=n.end_time;"start_time"==e?i=t.detail.value:a=t.detail.value,i&&a&&this.$util.DateToUnix(i)>this.$util.DateToUnix(a)?this.$util.showToast({title:"开始时间不能大于结束时间"}):this.tabList[3][e]=t.detail.value},toChangeItem:function(t,e){this[e]=t},toConfirm:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;2==t&&(e=0);var n=1==t?this.preCheck:this.tabList[e],i=n.start_time,a=void 0===i?"":i,r=n.end_time,o=void 0===r?"":r,s=2==t?{tabInd:2,channelInd:0}:3==t?this:this.preCheck,u=s.tabInd,l=s.channelInd;if(3==t){if((!a||!o)&&3==u)return void this.$util.showToast({title:a?"请选择结束时间":"请选择开始时间"});this.preCheck.start_time=a,this.preCheck.end_time=o,this.preCheck.tabInd=u,this.preCheck.channelInd=l}else this.tabList[e].start_time=a,this.tabList[e].end_time=o,this.tabInd=u,this.channelInd=l;2!=t&&(this.$refs.show_choose_time.close(),this.param.page=1,this.getList())}})};e.default=c}).call(this,n("df3c")["default"])},1179:function(t,e,n){"use strict";n.r(e);var i=n("42d2"),a=n("a56a");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("47ec");var o=n("828b"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=s.exports},"42d2":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.isLoad?t.__map(t.list.data,(function(e,n){var i=t.__get_orig(e),a=t.$t("action.attendantName");return{$orig:i,m0:a}})):null),i=t.isLoad&&t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0:null,a=t.isLoad?!t.loading&&t.list.data.length<=0&&1==t.list.current_page:null;t._isMounted||(t.e0=function(e){return e.stopPropagation(),t.$util.goUrl({url:"/user/pages/channel/qr"})},t.e1=function(e){return e.stopPropagation(),t.$util.goUrl({url:"/user/pages/distribution/record?type=4"})},t.e2=function(e){return e.stopPropagation(),t.$util.goUrl({url:"/user/pages/cash-out?type=channel"})},t.e3=function(e){return t.$refs.show_choose_time.open()}),t.$mp.data=Object.assign({},{$root:{l0:n,g0:i,g1:a}})},a=[]},"47ec":function(t,e,n){"use strict";var i=n("97d4"),a=n.n(i);a.a},"97d4":function(t,e,n){},a56a:function(t,e,n){"use strict";n.r(e);var i=n("0de1"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},ee61:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("65e9");i(n("3240"));var a=i(n("1179"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["ee61","common/runtime","common/vendor"]]]);