(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/distribution/apply"],{1199:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,r=(e._self._c,e.isLoad?(e.options.level_reseller_id||e.options.admin_id)&&-1!=e.fx_status||!e.options.level_reseller_id&&!e.options.admin_id&&[1,2,3].includes(e.fx_status):null),n=e.isLoad&&!r?e.form.text.length:null,i=!e.isLoad||r||n>300?null:e.form.text.length;e._isMounted||(e.e0=function(t){return e.$util.goUrl({url:"/pages/mine",openType:"reLaunch"})}),e.$mp.data=Object.assign({},{$root:{g0:r,g1:n,g2:i}})},i=[]},"5c93":function(e,t,r){"use strict";var n=r("75ef"),i=r.n(n);i.a},"738e":function(e,t,r){"use strict";(function(e,t){var n=r("47a9");r("65e9");n(r("3240"));var i=n(r("dca2"));e.__webpack_require_UNI_MP_PLUGIN__=r,t(i.default)}).call(this,r("3223")["default"],r("df3c")["createPage"])},"75ef":function(e,t,r){},cd16:function(e,t,r){"use strict";(function(e){var n=r("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("7eb4")),a=n(r("34cf")),o=n(r("7ca3")),l=n(r("ee10")),u=r("8f59");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={components:{},data:function(){return{isLoad:!1,options:{},tipArr:{1:[{text:"您已经成功提交申请",color:0},{text:"审核将在3个工作日内出结果，请耐心等待",color:0}],2:[{text:"恭喜您，审核通过！",color:0},{text:"您已具备分销员资格，快去分享体验吧~",color:0}],3:[{text:"请联系平台管理人员询问原因",color:0}],4:[{text:"请联系平台管理人员询问失败原因",color:0}]},buttonArr:{1:[{text:"个人中心",type:"cancel"}],2:[{text:"去分享",type:"confirm"}],3:[{text:"个人中心",type:"cancel"}],4:[{text:"再次申请",type:"confirm"},{text:"个人中心",type:"cancel"}]},title:{"-1":"申请分销员",1:"等待审核",2:"",3:"取消授权",4:"申请失败"},image:{1:"https://lbqny.migugu.com/admin/public/apply_wait.jpg",2:"https://lbqny.migugu.com/admin/public/apply_suc.jpg",3:"https://lbqny.migugu.com/admin/public/apply_fail.jpg",4:"https://lbqny.migugu.com/admin/public/apply_fail.jpg"},fx_status:-1,chooseList:[{id:1,key:"reseller_threshold",title:"一级分销员"},{id:2,key:"level_reseller_threshold",title:"二级分销员"}],chooseInd:0,payList:[{id:1,icon:"icon-weixin",title:"微信支付"}],payInd:0,detail:{},form:{id:0,level_reseller_id:0,user_name:"",mobile:"",text:"",pay_reseller_type:1,pay_model:1},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"请输入您的真实姓名",regType:2},{name:"mobile",checkType:"isMobile",errorMsg:"请输入常用手机号码"}],lockTap:!1}},computed:(0,u.mapState)({primaryColor:function(e){return e.config.configInfo.primaryColor},subColor:function(e){return e.config.configInfo.subColor},configInfo:function(e){return e.config.configInfo},scanRecordId:function(e){return e.user.scanRecordId}}),onLoad:function(t){var r=this;return(0,l.default)(i.default.mark((function n(){var a,o,l,u,c,s,p;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.$util.showLoading(),a=t,o=a.level_reseller_id,l=void 0===o?0:o,u=a.admin_id,c=void 0===u?0:u,l&&r.addScanRecord({type:9,qr_id:l}),c&&!l&&r.addScanRecord({type:10,qr_id:c}),!l&&!c){n.next=10;break}return n.next=7,r.updateCommonOptions(t);case 7:n.t0=n.sent,n.next=11;break;case 10:n.t0=t;case 11:return t=n.t0,r.options=t,r.form.level_reseller_id=l,r.form.admin_id=c,n.next=17,r.initIndex();case 17:s=r.title,p=r.fx_status,e.setNavigationBarTitle({title:s[p]}),r.scanRecordId&&r.updateScanRecord(),r.isLoad=!0;case 21:case"end":return n.stop()}}),n)})))()},methods:s(s(s({},(0,u.mapActions)(["getConfigInfo","getUserInfo","getMineInfo","updateCommonOptions","addScanRecord","updateScanRecord"])),(0,u.mapMutations)(["updateUserItem","updateOrderItem"])),{},{initIndex:function(){var e=arguments,t=this;return(0,l.default)(i.default.mark((function r(){var n,o,l,u,c,s,p,d,f,m,g,b,h,y,_;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],r.next=3,t.getConfigInfo();case 3:return n=t.configInfo.alipay_status,o=void 0===n?0:n,o&&t.payList.length,r.next=7,Promise.all([t.$api.mine.getPayResellerData(),t.$api.mine.resellerInfo()]);case 7:if(l=r.sent,u=(0,a.default)(l,2),c=u[0],s=u[1],t.detail=c,t.$util.setNavigationBarColor({bg:t.primaryColor}),s&&(!s||s.id)){r.next=16;break}return t.$util.hideAll(),r.abrupt("return");case 16:for(b in s.level_reseller_id=s.pid,p=t.options,d=p.level_reseller_id,f=void 0===d?0:d,m=p.admin_id,g=void 0===m?0:m,f&&(s.level_reseller_id=f),g&&(s.admin_id=g),t.form)t.form[b]=s[b];h=s.status,y=s.sh_text,_=f||g||4!=h?h:-1,t.fx_status=_,4==_&&y&&(t.tipArr[4][0].text=y),t.$util.hideAll();case 26:case"end":return r.stop()}}),r)})))()},initRefresh:function(){this.initIndex(!0)},confirm:function(){var t=this;return(0,l.default)(i.default.mark((function r(){var n;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.fx_status,4!=n){r.next=5;break}return t.fx_status=-1,e.setNavigationBarTitle({title:"申请分销员"}),r.abrupt("return");case 5:t.$util.goUrl({url:"/user/pages/distribution/income",openType:"reLaunch"});case 6:case"end":return r.stop()}}),r)})))()},toChangeItem:function(e,t,r,n){this[e]=t,this.form[r]=n,this.lockTap=!1},validate:function(e){var t=new this.$util.Validate;this.rule.map((function(r){var n=r.name;t.add(e[n],r)}));var r=t.start();return r},submit:function(){var e=this;return(0,l.default)(i.default.mark((function t(){var r,n,a,o,l,u;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$util.deepCopy(e.form),n=e.validate(r),!n){t.next=5;break}return e.$util.showToast({title:n}),t.abrupt("return");case 5:if(!e.lockTap){t.next=7;break}return t.abrupt("return");case 7:if(e.lockTap=!0,e.$util.showLoading(),r.text=r.text.length>300?r.text.substring(0,300):r.text,a=e.configInfo.plugAuth.payreseller,a||(delete r.pay_reseller_type,delete r.pay_model),!a){t.next=44;break}return o=r.pay_model,t.prev=14,t.next=17,e.$api.mine.applyReseller(r);case 17:if(l=t.sent,l.order_id,u=l.pay_list,e.$util.hideAll(),!u){t.next=34;break}return 3==o&&(u={orderInfo:u,provider:"alipay"}),t.prev=23,t.next=26,e.$util.pay(u);case 26:e.$util.showToast({title:"支付成功"}),setTimeout((function(){e.getMineInfo(),e.lockTap=!1,e.$util.goUrl({url:"/user/pages/distribution/pay-suc",openType:"redirectTo"})}),1e3),t.next=34;break;case 30:return t.prev=30,t.t0=t["catch"](23),e.lockTap=!1,t.abrupt("return");case 34:e.$util.showToast({title:"支付成功"}),setTimeout((function(){e.getMineInfo(),e.lockTap=!1,e.$util.goUrl({url:"/user/pages/distribution/pay-suc",openType:"redirectTo"})}),1e3),t.next=42;break;case 38:t.prev=38,t.t1=t["catch"](14),e.$util.showToast({title:"支付失败"}),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),1e3);case 42:t.next=55;break;case 44:return t.prev=44,t.next=47,e.$api.mine.applyReseller(r);case 47:e.$util.hideAll(),e.$util.showToast({title:"提交成功"}),setTimeout((function(){getCurrentPages().length>1&&e.$util.back(),e.$util.goUrl({url:"/user/pages/apply-result?type=2",openType:"redirectTo"})}),1e3),t.next=55;break;case 52:t.prev=52,t.t2=t["catch"](44),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),2e3);case 55:case"end":return t.stop()}}),t,null,[[14,38],[23,30],[44,52]])})))()}})};t.default=p}).call(this,r("df3c")["default"])},dca2:function(e,t,r){"use strict";r.r(t);var n=r("1199"),i=r("e86b");for(var a in i)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(a);r("5c93");var o=r("828b"),l=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=l.exports},e86b:function(e,t,r){"use strict";r.r(t);var n=r("cd16"),i=r.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a}},[["738e","common/runtime","common/vendor"]]]);