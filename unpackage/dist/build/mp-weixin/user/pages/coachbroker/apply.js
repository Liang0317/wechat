(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/coachbroker/apply"],{2079:function(t,e,r){"use strict";r.r(e);var n=r("d78a"),o=r("25b6");for(var a in o)["default"].indexOf(a)<0&&function(t){r.d(e,t,(function(){return o[t]}))}(a);var i=r("828b"),u=Object(i["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=u.exports},"25b6":function(t,e,r){"use strict";r.r(e);var n=r("9907"),o=r.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},8803:function(t,e,r){"use strict";(function(t,e){var n=r("47a9");r("65e9");n(r("3240"));var o=n(r("2079"));t.__webpack_require_UNI_MP_PLUGIN__=r,e(o.default)}).call(this,r("3223")["default"],r("df3c")["createPage"])},9907:function(t,e,r){"use strict";(function(t){var n=r("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r("7eb4")),a=n(r("7ca3")),i=n(r("ee10")),u=r("8f59");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var s={components:{},data:function(){return{isLoad:!1,options:{},tipArr:{1:[{text:"您已经成功提交申请",color:0},{text:"审核将在3个工作日内出结果，请耐心等待",color:0}],2:[{text:"恭喜您，审核通过！",color:0},{text:"您已具备经纪人资格，快去分享体验吧~",color:0}],3:[{text:"请联系平台管理人员询问原因",color:0}],4:[{text:"请联系平台管理人员询问失败原因",color:0}]},buttonArr:{1:[{text:"个人中心",type:"cancel"}],2:[{text:"去分享",type:"confirm"}],3:[{text:"个人中心",type:"cancel"}],4:[{text:"再次申请",type:"confirm"},{text:"个人中心",type:"cancel"}]},title:{"-1":"申请经纪人",1:"等待审核",2:"",3:"取消授权",4:"申请失败"},image:{1:"https://lbqny.migugu.com/admin/public/apply_wait.jpg",2:"https://lbqny.migugu.com/admin/public/apply_suc.jpg",3:"https://lbqny.migugu.com/admin/public/apply_fail.jpg",4:"https://lbqny.migugu.com/admin/public/apply_fail.jpg"},broker_status:-1,form:{id:0,user_name:"",mobile:"",text:""},rule:[{name:"user_name",checkType:"isNotNull",errorMsg:"请输入您的真实姓名",regType:2},{name:"mobile",checkType:"isMobile",errorMsg:"请输入常用手机号码"}],lockTap:!1}},computed:(0,u.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo}}),onLoad:function(t){var e=this;return(0,i.default)(o.default.mark((function r(){return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.$util.showLoading(),e.options=t,r.next=4,e.initIndex();case 4:e.isLoad=!0;case 5:case"end":return r.stop()}}),r)})))()},methods:l(l(l({},(0,u.mapActions)(["getConfigInfo","getUserInfo"])),(0,u.mapMutations)(["updateUserItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,i.default)(o.default.mark((function r(){var n,a,i,u,c,l;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.length>0&&void 0!==t[0]&&t[0],e.configInfo.id&&!n){r.next=4;break}return r.next=4,e.getConfigInfo();case 4:return r.next=6,e.$api.coachbroker.brokerInfo();case 6:if(a=r.sent,e.$util.setNavigationBarColor({bg:e.primaryColor}),a&&(!a||a.id)){r.next=11;break}return e.$util.hideAll(),r.abrupt("return");case 11:for(i in e.form)e.form[i]=a[i];u=a.status,c=a.sh_text,l=4==u?-1:u,e.broker_status=l,4==l&&c&&(e.tipArr[4][0].text=c),e.$util.hideAll();case 17:case"end":return r.stop()}}),r)})))()},initRefresh:function(){this.initIndex(!0)},confirm:function(){var e=this;return(0,i.default)(o.default.mark((function r(){var n;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.broker_status,4!=n){r.next=5;break}return e.broker_status=-1,t.setNavigationBarTitle({title:"申请经纪人"}),r.abrupt("return");case 5:e.$util.goUrl({url:"/user/pages/coachbroker/income",openType:"reLaunch"});case 6:case"end":return r.stop()}}),r)})))()},validate:function(t){var e=new this.$util.Validate;this.rule.map((function(r){var n=r.name;e.add(t[n],r)}));var r=e.start();return r},submit:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var r,n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.$util.deepCopy(t.form),n=t.validate(r),!n){e.next=5;break}return t.$util.showToast({title:n}),e.abrupt("return");case 5:if(!t.lockTap){e.next=7;break}return e.abrupt("return");case 7:return t.lockTap=!0,t.$util.showLoading(),r.text=r.text.length>300?r.text.substring(0,300):r.text,e.prev=10,e.next=13,t.$api.coachbroker.applyBroker(r);case 13:t.$util.hideAll(),t.$util.showToast({title:"提交成功"}),setTimeout((function(){getCurrentPages().length>1&&t.$util.back(),t.$util.goUrl({url:"/user/pages/apply-result?type=5",openType:"redirectTo"})}),1e3),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](10),setTimeout((function(){t.lockTap=!1,t.$util.hideAll()}),2e3);case 21:case"end":return e.stop()}}),e,null,[[10,18]])})))()}})};e.default=s}).call(this,r("df3c")["default"])},d78a:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,r=(t._self._c,t.isLoad&&-1==t.broker_status?t.form.text.length:null),n=!t.isLoad||-1!=t.broker_status||r>300?null:t.form.text.length;t._isMounted||(t.e0=function(e){return t.$util.goUrl({url:"/pages/mine",openType:"reLaunch"})}),t.$mp.data=Object.assign({},{$root:{g0:r,g1:n}})},o=[]}},[["8803","common/runtime","common/vendor"]]]);