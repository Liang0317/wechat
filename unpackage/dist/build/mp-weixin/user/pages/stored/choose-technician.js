(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/stored/choose-technician"],{"0798":function(t,a,e){"use strict";var n=e("a92b"),i=e.n(n);i.a},3136:function(t,a,e){"use strict";e.r(a);var n=e("94d1"),i=e("5bc0");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("0798");var r=e("828b"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);a["default"]=c.exports},"5bc0":function(t,a,e){"use strict";e.r(a);var n=e("d2f6"),i=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},"94d1":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,e=(t._self._c,t.$t("action.attendantName")),n=t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0:null,i=!t.loading&&t.list.data.length<=0&&1==t.list.current_page;t.$mp.data=Object.assign({},{$root:{m0:e,g0:n,g1:i}})},i=[]},a92b:function(t,a,e){},d2f6:function(t,a,e){"use strict";(function(t){var n=e("47a9");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("7eb4")),o=n(e("ee10")),r=n(e("7ca3")),c=e("8f59");function u(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?u(Object(e),!0).forEach((function(a){(0,r.default)(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):u(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var l={data:function(){return{coach_info:{},loading:!0,param:{page:1},list:{data:[]},lockTap:!1}},computed:(0,c.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},userInfo:function(t){return t.user.userInfo},location:function(t){return t.user.location},userCoachStatus:function(t){return t.user.userCoachStatus},changeOnAddr:function(t){return t.user.changeOnAddr},noChangeLoca:function(t){return t.user.noChangeLoca}}),onLoad:function(){var a=this.$util.getPage(-1),e=a.coach_info,n=void 0===e?{}:e;this.coach_info=n,this.$util.setNavigationBarColor({bg:this.primaryColor}),t.setNavigationBarTitle({title:"选择"+this.$t("action.attendantName")}),this.$util.showLoading(),this.initIndex()},onPullDownRefresh:function(){t.showNavigationBarLoading(),this.initRefresh(),t.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},watch:{changeOnAddr:function(t,a){var e=this.noChangeLoca.noloca;t&&e&&this.initUtilLocaData()},noChangeLoca:function(t,a){var e=this;setTimeout((function(){var t=e.changeOnAddr,a=t.lat,n=t.lng,i=t.unix,o=void 0===i?0:i,r=e.noChangeLoca.noloca,c=e.$util.DateToUnix(e.$util.formatTime(new Date,"YY-M-D h:m:s"));r&&(!a&&!n||!o||o&&c-o>=1)&&e.getUtilLocation()}),800)}},methods:s(s({},(0,c.mapMutations)(["updateUserItem","updateMapItem"])),{},{initIndex:function(){var t=arguments,a=this;return(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.length>0&&void 0!==t[0]&&t[0],a.getList();case 2:case"end":return e.stop()}}),e)})))()},initRefresh:function(){this.param.page=1,this.initIndex(!0)},getList:function(){var t=this;return(0,o.default)(i.default.mark((function a(){var e,n,o,r,c,u,s,l,f,d,h,g,p,v;return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e=t.location,n=t.userCoachStatus,o=n.status,r=n.coach_position,1!=t.param.page||e.lat&&(!e.lat||"暂未获取到位置信息"!=e.address)){a.next=17;break}if(2!=o||!r){a.next=14;break}if(c=t.changeOnAddr,u=c.lat,s=void 0===u?0:u,l=c.lng,f=void 0===l?0:l,d=c.unix,h=void 0===d?0:d,g=t.$util.DateToUnix(t.$util.formatTime(new Date,"YY-M-D h:m:s")),p=!(s&&f&&h&&g-h<3),p||(v=Object.assign({},t.location,{lat:s,lng:f,is_util_loca:1}),t.updateUserItem({key:"location",val:v})),t.updateUserItem({key:"noChangeLoca",val:{noloca:p}}),!t.noChangeLoca.noloca){a.next=11;break}return a.abrupt("return");case 11:t.initUtilLocaData(),a.next=15;break;case 14:t.getUtilLocation();case 15:return t.updateMapItem({key:"pageActive",val:!1}),a.abrupt("return");case 17:t.initUtilLocaData();case 18:case"end":return a.stop()}}),a)})))()},getUtilLocation:function(){var t=this;return(0,o.default)(i.default.mark((function a(){var e,n,o,r,c,u;return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$util.getLocation();case 2:e=a.sent,n=e.lat,o=void 0===n?0:n,r=e.lng,c=void 0===r?0:r,u=Object.assign({},t.location,{lat:o,lng:c,is_util_loca:1}),t.updateUserItem({key:"location",val:u}),t.initUtilLocaData();case 10:case"end":return a.stop()}}),a)})))()},initUtilLocaData:function(){var t=this;return(0,o.default)(i.default.mark((function a(){var e,n,o,r,c,u,s,l,f,d;return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.updateUserItem({key:"noChangeLoca",val:{noloca:!1}}),e=t.list,n=t.param,o=t.location,r=o.lat,c=void 0===r?0:r,u=o.lng,s=void 0===u?0:u,l=o.is_util_loca,f=void 0===l?0:l,n=Object.assign({},n,{lat:c,lng:s}),a.next=6,t.$api.mine.coachList(n);case 6:d=a.sent,1==t.param.page||(d.data=e.data.concat(d.data)),t.list=d,t.loading=!1,t.$util.hideAll(),1==n.page&&c&&s&&f&&t.$util.getMapInfo();case 11:case"end":return a.stop()}}),a)})))()},toSearch:function(t){this.param.page=1,this.param.coach_name=t,this.getList()},toCheck:function(t){var a=this.list.data[t];this.coach_info=a},submit:function(){var t=this,a=this.coach_info.id,e=void 0===a?0:a;e?(this.$util.getPage(-1).coach_info=this.coach_info,setTimeout((function(){t.$util.goUrl({url:1,openType:"navigateBack"})}),1e3)):this.$util.showToast({title:"请选择".concat(this.$t("action.attendantName"))})}})};a.default=l}).call(this,e("df3c")["default"])},ebac:function(t,a,e){"use strict";(function(t,a){var n=e("47a9");e("65e9");n(e("3240"));var i=n(e("3136"));t.__webpack_require_UNI_MP_PLUGIN__=e,a(i.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])}},[["ebac","common/runtime","common/vendor"]]]);