(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user/pages/stored/poster"],{1011:function(t,e,n){"use strict";var r=n("1abb"),o=n.n(r);o.a},"1abb":function(t,e,n){},"43d9":function(t,e,n){"use strict";n.r(e);var r=n("7fc0"),o=n("af9a");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("1011");var a=n("828b"),c=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=c.exports},7008:function(t,e,n){"use strict";(function(t){var r=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("7eb4")),i=r(n("34cf")),a=r(n("7ca3")),c=r(n("ee10")),u=n("8f59");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={components:{},props:{},data:function(){return{confirmText:"保存图片至相册",options:{},src:""}},computed:(0,u.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},configInfo:function(t){return t.config.configInfo},userInfo:function(t){return t.user.userInfo}}),onLoad:function(t){var e=this;return(0,c.default)(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.options=t,e.$util.showLoading(),e.$util.setNavigationBarColor({bg:e.primaryColor}),r=e,setTimeout((function(){r.canvase()}),1e3);case 5:case"end":return n.stop()}}),n)})))()},methods:p(p({},(0,u.mapActions)([])),{},{canvase:function(){var t=this;return(0,c.default)(o.default.mark((function e(){var n,r,i,a,c,u,s,p,f,l,d,h,m;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t,r=t.userInfo.nickName,r=r.length>15?r.substring(0,15)+"...":r,i=t.$util.getPage(-1),a=i.qr_code,c=i.shareInd,u=i.list,"https://lbqny.migugu.com/admin/anmo/mine/balance-text-bg.png","https://lbqny.migugu.com/admin/anmo/mine/balance-share.png",s=u.data[c],p=s.price,f=void 0===p?0:p,l=s.true_price,d=void 0===l?0:l,h=d-f,m={css:{width:"750rpx",height:"1400rpx",background:"#fff"},views:[{type:"text",text:"充".concat(f,"送").concat(h),css:{position:"absolute",top:"70rpx",left:"0rpx",width:"750rpx",fontSize:"70rpx",fontWeight:"1000",color:"#209620",textAlign:"center"}},{type:"image",src:"https://lbqny.migugu.com/admin/anmo/mine/balance-text-bg.png",css:{position:"absolute",width:"484rpx",height:"46rpx",top:"190rpx",left:"132rpx"}},{type:"text",text:"充值优惠多多",css:{position:"absolute",top:"190rpx",left:"0rpx",width:"750rpx",fontSize:"34rpx",color:"#fff",fontWeight:"400",textAlign:"center"}},{type:"image",src:"https://lbqny.migugu.com/admin/anmo/mine/balance-share.png",css:{width:"632rpx",height:"464rpx",objectFit:"cover",position:"absolute",top:"360rpx",left:"58rpx"}},{type:"image",src:a,css:{width:"290rpx",height:"290rpx",position:"absolute",top:"920rpx",left:"230rpx"}},{type:"text",text:r,css:{position:"absolute",top:"1235rpx",left:"0rpx",width:"750rpx",fontSize:"30rpx",color:"#209620",textAlign:"center"}},{type:"text",text:"邀请您充值有优惠~",css:{position:"absolute",top:"1280rpx",left:"0rpx",width:"750rpx",fontSize:"28rpx",color:"#333",textAlign:"center"}}]},t.$refs.painter.render(m),t.$refs.painter.canvasToTempFilePathSync({fileType:"jpg",quality:1,success:function(e){n.$util.hideAll(),t.src=e.tempFilePath}});case 11:case"end":return e.stop()}}),e)})))()},extraImage:function(){var t=this;return(0,c.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.widget.canvasToTempFilePath(),n.then((function(e){t.src=e.tempFilePath}));case 2:case"end":return e.stop()}}),e)})))()},previewImage:function(){var e=this.src;t.previewImage({current:e,urls:[e]})},saveImage:function(){var e=this;return(0,c.default)(o.default.mark((function n(){var r,a,c,u,s;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.$refs.user_privacy.check(),!r){n.next=4;break}return e.$refs.user_privacy.open(),n.abrupt("return");case 4:return n.next=6,e.$util.checkAuth({type:"writePhotosAlbum"});case 6:return a=e.src,n.next=9,t.saveImageToPhotosAlbum({filePath:a});case 9:if(c=n.sent,u=(0,i.default)(c,2),s=u[0],u[1],!s){n.next=15;break}return n.abrupt("return");case 15:t.showToast({icon:"none",title:"保存成功"});case 16:case"end":return n.stop()}}),n)})))()},toPreviewSave:function(){this.saveImage()}})};e.default=f}).call(this,n("df3c")["default"])},"7fc0":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={lPainter:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/lime-painter/components/l-painter/l-painter")]).then(n.bind(null,"d7b4"))}},o=function(){var t=this.$createElement;this._self._c},i=[]},af9a:function(t,e,n){"use strict";n.r(e);var r=n("7008"),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},ba97:function(t,e,n){"use strict";(function(t,e){var r=n("47a9");n("65e9");r(n("3240"));var o=r(n("43d9"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["ba97","common/runtime","common/vendor"]]]);