(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/v-sign/components/v-sign/v-sign"],{"16d4":function(t,e,n){"use strict";n.r(e);var i=n("8be5"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"1e33":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__get_style([{width:t.width&&t.formatSize(t.width),height:t.height&&t.formatSize(t.height)},t.customStyle]));t.$mp.data=Object.assign({},{$root:{s0:n}})},a=[]},"4dac":function(t,e,n){"use strict";var i=n("b4839"),a=n.n(i);a.a},"74d1":function(t,e,n){"use strict";n.r(e);var i=n("1e33"),a=n("16d4");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("4dac");var s=n("828b"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"6b04195a",null,!1,i["a"],void 0);e["default"]=r.exports},"8be5":function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("7eb4")),o=i(n("7ca3")),s=i(n("ee10")),r=n("982a");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,o.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={name:"v-sign",props:{cid:{type:String,default:"v-sign-".concat(Date.now())},width:{type:[String,Number]},height:{type:[String,Number]},lineWidth:{type:Number,default:4},lineColor:{type:String,default:"#333"},bgColor:{type:String,default:"#fff"},customStyle:{type:Object,default:function(){return{}}}},provide:function(){return{getSignInterface:this.provideSignInterface}},data:function(){return{formatSize:r.formatSize,lineData:[],winWidth:0,winHeight:0,penLineWidth:null,penLineColor:null}},created:function(){var e=t.getSystemInfoSync(),n=e.windowWidth,i=e.windowHeight;this.winWidth=n,this.winHeight=i},onReady:function(){var e=t.getSystemInfoSync(),n=e.windowWidth,i=e.windowHeight;this.winWidth=n,this.winHeight=i},mounted:function(){this.canvasCtx=t.createCanvasContext(this.cid,this),this.setBackgroundColor(this.bgColor),this.$emit("init",this.provideSignInterface())},methods:{onTouchStart:function(t){var e=t.touches[0];this.lineData.push({style:{color:this.penLineColor||this.lineColor,width:this.penLineWidth||this.lineWidth},coordinates:[{type:t.type,x:e.x,y:e.y}]}),this.drawLine()},onTouchMove:function(t){var e=t.touches[0];this.lineData[this.lineData.length-1].coordinates.push({type:t.type,x:e.x,y:e.y}),this.drawLine()},onTouchEnd:function(t){this.$emit("end",this.lineData)},clear:function(){this.lineData=[],this.canvasCtx.clearRect(0,0,this.winWidth,this.winHeight),this.canvasCtx.draw(),this.setBackgroundColor(this.bgColor),this.$emit("clear")},revoke:function(){var t=this;this.setBackgroundColor(this.bgColor),this.lineData.pop(),this.lineData.forEach((function(e,n){if(t.canvasCtx.beginPath(),t.canvasCtx.setLineCap("round"),t.canvasCtx.setStrokeStyle(e.style.color),t.canvasCtx.setLineWidth(e.style.width),e.coordinates.length<2){var i=e.coordinates[0];t.canvasCtx.moveTo(i.x,i.y),t.canvasCtx.lineTo(i.x+1,i.y)}else e.coordinates.forEach((function(e){"touchstart"==e.type?t.canvasCtx.moveTo(e.x,e.y):t.canvasCtx.lineTo(e.x,e.y)}));t.canvasCtx.stroke()})),this.canvasCtx.draw(!0),this.$emit("revoke",this.lineData)},drawLine:function(){var t=this.lineData.length;if(t){var e=this.lineData[t-1],n=e.coordinates,i=n.length;if(i){var a,o;i<2?(a=n[i-1],o={x:a.x+1,y:a.y}):(a=n[i-2],o=n[i-1]);var s=e.style;this.canvasCtx.beginPath(),this.canvasCtx.setLineCap("round"),this.canvasCtx.setStrokeStyle(s.color),this.canvasCtx.setLineWidth(s.width),this.canvasCtx.moveTo(a.x,a.y),this.canvasCtx.lineTo(o.x,o.y),this.canvasCtx.stroke(),this.canvasCtx.draw(!0)}}},saveImage:function(){var e=arguments,n=this;return(0,s.default)(a.default.mark((function i(){var o;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:"签名",i.next=3,n.canvasToTempFilePath();case 3:return o=i.sent,i.abrupt("return",new Promise((function(e,n){t.saveImageToPhotosAlbum({filePath:o,success:function(t){e(t)},fail:function(t){n(t)}})})));case 5:case"end":return i.stop()}}),i)})))()},canvasToTempFilePath:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(i,a){t.canvasToTempFilePath(h(h({canvasId:e.cid},n),{},{success:function(t){i(t.tempFilePath)},fail:function(t){console.log("fail",t),a(t)}}),e)}))},setBackgroundColor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#fff";this.canvasCtx.beginPath(),this.canvasCtx.setFillStyle(t),this.canvasCtx.fillRect(0,0,this.winWidth,this.winHeight),this.canvasCtx.fill(),this.canvasCtx.draw(!0)},setLineWidth:function(t){this.penLineWidth=t},setLineColor:function(t){this.penLineColor=t},provideSignInterface:function(){var t=this;return{cid:this.cid,ctx:this.canvasCtx,clear:this.clear,revoke:this.revoke,saveImage:this.saveImage,canvasToTempFilePath:this.canvasToTempFilePath,setLineWidth:this.setLineWidth,setLineColor:this.setLineColor,setBackgroundColor:this.setBackgroundColor,getLineData:function(){return t.lineData}}},caculateBezier:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=t.x,o=t.y,s=e.x,r=e.y,c=n.x,h=n.y,u=(c-(1-i)*(1-i)*a-i*i*s)/(2*i*(1-i)),l=(h-(1-i)*(1-i)*o-i*i*r)/(2*i*(1-i));return{x:u,y:l}}}};e.default=u}).call(this,n("df3c")["default"])},b4839:function(t,e,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/v-sign/components/v-sign/v-sign-create-component',
    {
        'uni_modules/v-sign/components/v-sign/v-sign-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("74d1"))
        })
    },
    [['uni_modules/v-sign/components/v-sign/v-sign-create-component']]
]);
