(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["shopstore/pages/technician"],{"0a95":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.$t("action.attendantName")),a=t.list.data&&t.list.data.length>0,i=a?[2,3].includes(t.configInfo.coach_list_format):null,o=a?t.__map(t.list.data,(function(e,n){var a=t.__get_orig(e),i=[2,3].includes(t.configInfo.coach_list_format)&&n%2==0;return{$orig:a,g2:i}})):null,r=t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0&&t.location.lng:null,c=!t.loading&&t.list.data.length<=0&&1==t.list.current_page,u=!c||t.location.lat||t.location.lng?null:t.$t("action.attendantName");t.$mp.data=Object.assign({},{$root:{m0:n,g0:a,g1:i,l0:o,g3:r,g4:c,m1:u}})},i=[]},1795:function(t,e,n){"use strict";n.r(e);var a=n("5666"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},5666:function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("7eb4")),o=a(n("7ca3")),r=a(n("ee10")),c=n("8f59");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,o.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={components:{technicianListItem:function(){n.e("components/technician-list-item").then(function(){return resolve(n("7d48"))}.bind(null,n)).catch(n.oe)},technicianListPopup:function(){n.e("components/technician-list-popup").then(function(){return resolve(n("ff93"))}.bind(null,n)).catch(n.oe)}},data:function(){return{isLoad:!1,options:{},activeIndex:0,param:{page:1,coach_name:""},list:{data:[]},loading:!0,lockTap:!1}},computed:(0,c.mapState)({pageActive:function(t){return t.technician.pageActive},tabList:function(t){return t.technician.tabList},primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo},loginType:function(t){return t.user.loginType},userInfo:function(t){return t.user.userInfo},location:function(t){return t.user.location},isGzhLogin:function(t){return t.user.isGzhLogin},haveShieldOper:function(t){return t.user.haveShieldOper},userCoachStatus:function(t){return t.user.userCoachStatus},changeOnAddr:function(t){return t.user.changeOnAddr},noChangeLoca:function(t){return t.user.noChangeLoca}}),onLoad:function(e){var n=this;return(0,r.default)(i.default.mark((function a(){return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.options=e,n.$util.showLoading(),a.next=4,n.initIndex();case 4:n.$util.setNavigationBarColor({bg:n.primaryColor}),t.setNavigationBarTitle({title:n.$t("action.attendantName")+"列表"});case 6:case"end":return a.stop()}}),a)})))()},onPullDownRefresh:function(){t.showNavigationBarLoading(),this.initRefresh(),t.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},watch:{changeOnAddr:function(t,e){var n=this.noChangeLoca.noloca;t&&n&&this.initUtilLocaData()},noChangeLoca:function(t,e){var n=this;setTimeout((function(){var t=n.changeOnAddr,e=t.lat,a=t.lng,i=t.unix,o=void 0===i?0:i,r=n.noChangeLoca.noloca,c=n.$util.DateToUnix(n.$util.formatTime(new Date,"YY-M-D h:m:s"));r&&(!e&&!a||!o||o&&c-o>=1)&&n.getUtilLocation()}),800)}},methods:s(s(s({},(0,c.mapActions)(["getConfigInfo","getUserInfo"])),(0,c.mapMutations)(["updateUserItem","updateMapItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,r.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],e.configInfo.id&&!a){n.next=4;break}return n.next=4,e.getConfigInfo();case 4:return n.next=6,e.getList();case 6:case"end":return n.stop()}}),n)})))()},initRefresh:function(){this.param.page=1,this.initIndex(!0)},toOpenLocation:function(){var t=this;return(0,r.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.user_privacy.check(),!n){e.next=4;break}return t.$refs.user_privacy.open(),e.abrupt("return");case 4:return e.next=6,t.$util.checkAuth({type:"userLocation",checkApp:!0});case 6:t.initIndex();case 7:case"end":return e.stop()}}),e)})))()},toSearch:function(t){this.param.coach_name=t,this.getList(1)},getList:function(){var t=arguments,e=this;return(0,r.default)(i.default.mark((function n(){var a,o,r,c,u,s,l,f,d,p,h,g,v,m,b,_;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:0,t.length>1&&void 0!==t[1]&&t[1],t.length>2&&void 0!==t[2]?t[2]:0,a&&(e.param.page=1),o=e.location,r=e.userCoachStatus,c=r.status,u=r.coach_position,1!=e.param.page||o.lat&&(!o.lat||"暂未获取到位置信息"!=o.address)){n.next=27;break}if(s=e.$refs.user_privacy.check(),!s){n.next=13;break}return e.$refs.user_privacy.open(),e.loading=!1,e.$util.hideAll(),n.abrupt("return");case 13:if(2!=c||!u){n.next=24;break}if(l=e.changeOnAddr,f=l.lat,d=void 0===f?0:f,p=l.lng,h=void 0===p?0:p,g=l.unix,v=void 0===g?0:g,m=e.$util.DateToUnix(e.$util.formatTime(new Date,"YY-M-D h:m:s")),b=!(d&&h&&v&&m-v<3),b||(_=Object.assign({},e.location,{lat:d,lng:h,is_util_loca:1}),e.updateUserItem({key:"location",val:_})),e.updateUserItem({key:"noChangeLoca",val:{noloca:b}}),!e.noChangeLoca.noloca){n.next=21;break}return n.abrupt("return");case 21:e.initUtilLocaData(),n.next=25;break;case 24:e.getUtilLocation();case 25:return e.updateMapItem({key:"pageActive",val:!1}),n.abrupt("return");case 27:e.initUtilLocaData();case 28:case"end":return n.stop()}}),n)})))()},getUtilLocation:function(){var t=this;return(0,r.default)(i.default.mark((function e(){var n,a,o,r,c,u;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$util.getLocation();case 2:n=e.sent,a=n.lat,o=void 0===a?0:a,r=n.lng,c=void 0===r?0:r,u=Object.assign({},t.location,{lat:o,lng:c,is_util_loca:1}),t.updateUserItem({key:"location",val:u}),t.initUtilLocaData();case 10:case"end":return e.stop()}}),e)})))()},initUtilLocaData:function(){var t=this;return(0,r.default)(i.default.mark((function e(){var n,a,o,r,c,u,s,l,f,d,p,h,g,v,m,b;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.updateUserItem({key:"noChangeLoca",val:{noloca:!1}}),n=t.location,a=n.lng,o=void 0===a?0:a,r=n.lat,c=void 0===r?0:r,u=n.is_util_loca,s=void 0===u?0:u,l=t.list,f=t.tabList,d=t.activeIndex,p=t.options.id,h=t.$util.deepCopy(t.param),h=Object.assign({},h,{lat:c,lng:o,store_id:p}),g=t.configInfo.coach_format,v=void 0===g?1:g,1==v&&(h.type=f[d].id),m=1==v?"serviceCoachList":"typeServiceCoachList",e.next=11,t.$api.service[m](h);case 11:b=e.sent,1==t.param.page||(b.data=l.data.concat(b.data)),t.list=b,t.loading=!1,t.$util.hideAll(),1==h.page&&c&&o&&s&&t.$util.getMapInfo();case 16:case"end":return e.stop()}}),e)})))()},handerTabChange:function(e){this.activeIndex=e,this.$util.showLoading(),t.pageScrollTo({scrollTop:0}),this.getList(1)},toShowPopup:function(t,e){var n=this;return(0,r.default)(i.default.mark((function a(){return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n.$refs.technician_list_popup.toShowPopup(n.list.data[t],e);case 1:case"end":return a.stop()}}),a)})))()},toCollect:function(t){var e=this;return(0,r.default)(i.default.mark((function n(){var a,o,r,c,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.list.data[t],o=a.id,r=a.is_collect,c=a.collect_num,u=r?"delCollect":"addCollect",n.next=4,e.$api.mine[u]({coach_id:o});case 4:e.$util.showToast({title:r?"取消成功":"收藏成功"}),e.list.data[t].is_collect=1==r?0:1,e.list.data[t].collect_num=1==r?c-1:c+1;case 7:case"end":return n.stop()}}),n)})))()}})};e.default=l}).call(this,n("df3c")["default"])},"879c":function(t,e,n){"use strict";n.r(e);var a=n("0a95"),i=n("1795");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n("828b"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},"8e59":function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("65e9");a(n("3240"));var i=a(n("879c"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["8e59","common/runtime","common/vendor"]]]);