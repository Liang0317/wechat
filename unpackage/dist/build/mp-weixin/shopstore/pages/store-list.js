(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["shopstore/pages/store-list"],{"24ef":function(t,e,n){"use strict";n.r(e);var a=n("c8ba"),r=n("5158");for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);var o=n("828b"),c=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},5158:function(t,e,n){"use strict";n.r(e);var a=n("9439"),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},"767b":function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("65e9");a(n("3240"));var r=a(n("24ef"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},9439:function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("7eb4")),i=a(n("7ca3")),o=a(n("ee10")),c=n("8f59");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={components:{shopstoreListItem:function(){n.e("components/shopstore-list-item").then(function(){return resolve(n("dba4"))}.bind(null,n)).catch(n.oe)}},data:function(){return{options:{},loading:!0,param:{page:1},list:{data:[]}}},computed:(0,c.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},userInfo:function(t){return t.user.userInfo},location:function(t){return t.user.location},userCoachStatus:function(t){return t.user.userCoachStatus},changeOnAddr:function(t){return t.user.changeOnAddr},noChangeLoca:function(t){return t.user.noChangeLoca}}),onLoad:function(e){var n=e.title;this.options=e,this.$util.setNavigationBarColor({bg:this.primaryColor}),t.setNavigationBarTitle({title:n}),this.$util.showLoading(),this.initIndex()},onShow:function(){return(0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},onPullDownRefresh:function(){t.showNavigationBarLoading(),this.initRefresh(),t.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},watch:{changeOnAddr:function(t,e){var n=this.noChangeLoca.noloca;t&&n&&this.initUtilLocaData()},noChangeLoca:function(t,e){var n=this;setTimeout((function(){var t=n.changeOnAddr,e=t.lat,a=t.lng,r=t.unix,i=void 0===r?0:r,o=n.noChangeLoca.noloca,c=n.$util.DateToUnix(n.$util.formatTime(new Date,"YY-M-D h:m:s"));o&&(!e&&!a||!i||i&&c-i>=1)&&n.getUtilLocation()}),800)}},methods:s(s({},(0,c.mapMutations)(["updateUserItem","updateServiceItem","updateTechnicianItem","updateMapItem","updateDynamicItem","updateShopstoreItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.length>0&&void 0!==t[0]&&t[0],e.getList();case 2:case"end":return n.stop()}}),n)})))()},initRefresh:function(){var t=this;return(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.param.page=1,e.next=3,t.initIndex(!0);case 3:case"end":return e.stop()}}),e)})))()},toOpenLocation:function(){var t=this;return(0,o.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.user_privacy.check(),!n){e.next=4;break}return t.$refs.user_privacy.open(),e.abrupt("return");case 4:return e.next=6,t.$util.checkAuth({type:"userLocation",checkApp:!0});case 6:t.initRefresh();case 7:case"end":return e.stop()}}),e)})))()},getList:function(){var t=this;return(0,o.default)(r.default.mark((function e(){var n,a,i,o,c,u,s,l,f,d,p,h,g,v,m;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.location,a=t.userCoachStatus,i=a.status,o=a.coach_position,1!=t.param.page||n.lat&&(!n.lat||"暂未获取到位置信息"!=n.address)){e.next=23;break}if(c=t.$refs.user_privacy.check(),!c){e.next=9;break}return t.$refs.user_privacy.open(),t.loading=!1,t.$util.hideAll(),e.abrupt("return");case 9:if(2!=i||!o){e.next=20;break}if(u=t.changeOnAddr,s=u.lat,l=void 0===s?0:s,f=u.lng,d=void 0===f?0:f,p=u.unix,h=void 0===p?0:p,g=t.$util.DateToUnix(t.$util.formatTime(new Date,"YY-M-D h:m:s")),v=!(l&&d&&h&&g-h<3),v||(m=Object.assign({},t.location,{lat:l,lng:d,is_util_loca:1}),t.updateUserItem({key:"location",val:m})),t.updateUserItem({key:"noChangeLoca",val:{noloca:v}}),!t.noChangeLoca.noloca){e.next=17;break}return e.abrupt("return");case 17:t.initUtilLocaData(),e.next=21;break;case 20:t.getUtilLocation();case 21:return t.updateMapItem({key:"pageActive",val:!1}),e.abrupt("return");case 23:t.initUtilLocaData();case 24:case"end":return e.stop()}}),e)})))()},getUtilLocation:function(){var t=this;return(0,o.default)(r.default.mark((function e(){var n,a,i,o,c,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$util.getLocation();case 2:n=e.sent,a=n.lat,i=void 0===a?0:a,o=n.lng,c=void 0===o?0:o,u=Object.assign({},t.location,{lat:i,lng:c,is_util_loca:1}),t.updateUserItem({key:"location",val:u}),t.initUtilLocaData();case 10:case"end":return e.stop()}}),e)})))()},initUtilLocaData:function(){var t=this;return(0,o.default)(r.default.mark((function e(){var n,a,i,o,c,u,s,l,f,d,p,h;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.updateUserItem({key:"noChangeLoca",val:{noloca:!1}}),n=t.list,a=t.options.id,i=void 0===a?0:a,o=t.location,c=o.lat,u=void 0===c?0:c,s=o.lng,l=void 0===s?0:s,f=o.is_util_loca,d=void 0===f?0:f,p=Object.assign({},t.param,{cate_id:i,lat:u,lng:l}),e.next=7,t.$api.shopstore.storeList(p);case 7:h=e.sent,1==t.param.page||(h.data=n.data.concat(h.data)),t.list=h,t.loading=!1,t.$util.hideAll(),1==p.page&&u&&l&&d&&t.$util.getMapInfo();case 12:case"end":return e.stop()}}),e)})))()}})};e.default=l}).call(this,n("df3c")["default"])},c8ba:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0:null),a=!t.loading&&t.list.data.length<=0&&1==t.list.current_page;t.$mp.data=Object.assign({},{$root:{g0:n,g1:a}})},r=[]}},[["767b","common/runtime","common/vendor"]]]);