(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["technician/pages/income/commission-list"],{"2c10":function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("65e9");n(i("3240"));var a=n(i("3937"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(a.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"2fd8":function(t,e,i){"use strict";var n=i("5b79"),a=i.n(n);a.a},3937:function(t,e,i){"use strict";i.r(e);var n=i("a07f"),a=i("a719");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("2fd8");var o=i("828b"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=c.exports},"5b79":function(t,e,i){},"9b6c":function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("7eb4")),r=n(i("7ca3")),o=n(i("ee10")),c=i("8f59"),s=n(i("7942"));function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,r.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h={components:{wPicker:function(){i.e("components/w-picker/w-picker").then(function(){return resolve(i("ab68"))}.bind(null,i)).catch(i.oe)}},data:function(){return{isLoad:!1,countList:[{key:"total_service_cash",title:"项目收益",text:"累计所有项目收益，不包含车费，不包含手续费"},{key:"total_car_cash",title:"车费收益",text:"累计所有车费，不包含手续费"},{key:"coach_balance_cash",title:"储值扣款",text:"用户在该".concat(this.$t("action.attendantName"),"处下单，使用储值扣款支付方式，应该单独扣除").concat(this.$t("action.attendantName"),"的费用")},{key:"channel_share_cash",title:"渠道扣款",text:"用户通过渠道码下的订单，需要扣除".concat(this.$t("action.attendantName"),"提成的一部分")},{key:"point_cash",title:"提现手续费",text:"手续费=所有已完成订单收益金额*手续费百分比"},{key:"coach_poster_cash",title:"广告费",text:"广告费=".concat(this.$t("action.attendantName"),"所有已完成订单实际支付金额*广告费百分比*技师分摊百分比")},{key:"partner_share_cash",title:"经纪人扣款",text:"经纪人扣款=".concat(this.$t("action.attendantName"),"所有已完成订单实际支付金额*经纪人提成百分比*技师分摊百分比")},{key:"salesman_share_cash",title:"业务扣款",text:"业务扣款=".concat(this.$t("action.attendantName"),"所有已完成订单实际支付金额*业务提成百分比*技师分摊百分比")}],countInd:0,showDialog:!1,curDay:"",curMonth:"",startYear:"",showKey:"",showDate:!1,prev_time:{activeIndex:0,month:"",start_time:"",end_time:""},check_time:{activeIndex:0,month:"",start_time:"",end_time:""},count:{},activeIndex:0,tabList:[{id:1,title:"月份选择"},{id:2,title:"自定义时间"}],param:{page:1},list:{data:[]},loading:!0}},computed:(0,c.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo}}),onLoad:function(){var t=this;return(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initIndex();case 2:case"end":return e.stop()}}),e)})))()},onPullDownRefresh:function(){t.showNavigationBarLoading(),this.initRefresh(),t.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},methods:l(l({},(0,c.mapMutations)([])),{},{initIndex:function(){var t=arguments,e=this;return(0,o.default)(a.default.mark((function i(){var n;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.length>0&&void 0!==t[0]&&t[0],e.$util.setNavigationBarColor({bg:e.primaryColor}),n=new Date(Math.ceil((new Date).getTime())),e.curDay=e.$util.formatTime(n,"YY-M-D"),e.curMonth=e.$util.formatTime(n,"YY-M"),e.startYear=e.$util.formatTime(n,"YY"),i.next=8,Promise.all([e.getCount(),e.getList()]);case 8:e.isLoad=!0;case 9:case"end":return i.stop()}}),i)})))()},initRefresh:function(){this.param.page=1,this.initIndex(!0)},getCount:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var i,n,r,o,c;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.activeIndex,n=t.$util.deepCopy(t.check_time),r=n.start_time,o=n.end_time,c={},1==i&&r&&o&&(c.start_time=t.$util.DateToUnix(r),c.end_time=t.$util.DateToUnix(o)+86400-1),e.next=6,t.$api.technician.coachCommissionData(c);case 6:t.count=e.sent;case 7:case"end":return e.stop()}}),e)})))()},getList:function(e){var i=this;return(0,o.default)(a.default.mark((function n(){var r,o,c,s,u,l,h,d;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e&&(i.param.page=1,i.list.data=[],t.pageScrollTo({scrollTop:0})),r=i.list,o=i.activeIndex,c=i.$util.deepCopy(i.param),s=i.$util.deepCopy(i.check_time),u=s.month,l=s.start_time,h=s.end_time,0==o&&(c.month=u?i.$util.DateToUnix("".concat(u,"-01")):""),1==o&&(c.start_time=l&&h?i.$util.DateToUnix(l):"",c.end_time=l&&h?i.$util.DateToUnix(h)+86400-1:""),n.next=8,i.$api.technician.coachCommissionList(c);case 8:d=n.sent,1==i.param.page||(d.data=r.data.concat(d.data)),i.list=d,i.loading=!1,i.$util.hideAll();case 12:case"end":return n.stop()}}),n)})))()},toShowDialog:function(t){this.countInd=t,this.$refs.show_rule_item.open()},handerTabChange:function(t){this.activeIndex=t,this.check_time.activeIndex=t},toShowTimePopup:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.check_time=this.$util.deepCopy(this.prev_time),e&&0!=e&&(this.activeIndex=0,this.curMonth=e,this.check_time.month=e),this.activeIndex=this.check_time.activeIndex,this.$refs.show_choose_time.open()},toReset:function(){var t=this.activeIndex;0!=t?(this.check_time.start_time="",this.check_time.end_time=""):this.check_time.month=""},toClose:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var i,n,r,o,c;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.activeIndex,n=t.check_time,r=n.month,o=n.start_time,c=n.end_time,(0!=i||r)&&(1!=i||o&&c)||(1!=i||o&&c||(t.activeIndex=0,t.check_time.activeIndex=0,t.check_time.month=""),t.prev_time=t.$util.deepCopy(t.check_time)),(0==i&&r||1==i&&o&&c)&&(t.check_time=t.$util.deepCopy(t.prev_time)),t.$refs.show_choose_time.close(),1!=t.activeIndex){e.next=8;break}return e.next=8,t.getCount();case 8:t.getList(1);case 9:case"end":return e.stop()}}),e)})))()},toShowTime:function(t){var e=this.activeIndex;if(1!=e||"end_time"!=t||this.check_time.start_time){var i=this.check_time[t];i&&("month"==t?this.curMonth=i:this.curDay=i),this.showKey=t,this.showDate=!0}else this.$util.showToast({title:"请选择开始时间"})},onConfirm:function(t){var e=this;return(0,o.default)(a.default.mark((function i(){var n,r,o,c,s,u,l,h,d,f,m,p;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e.check_time,r=n.start_time,o=n.end_time,c=e.showKey,s=e.activeIndex,u=void 0===s?0:s,l=e.$util.DateToUnix("month"==c?"".concat(t.result,"-01"):t.result),h=r?e.$util.DateToUnix(r):0,d=o?e.$util.DateToUnix(o):0,f=e.$util.formatTime(new Date(Math.ceil((new Date).getTime())),"YY-M-D"),m=e.$util.DateToUnix(f)+1,p={month:"开始月份",start_time:"开始时间",end_time:"结束时间"},!(l>m)){i.next=11;break}return e.$util.showToast({title:"".concat(p[c],"不能选择未来时间哦")}),i.abrupt("return");case 11:if(1!=u||!("start_time"==c&&d&&d<e.$util.DateToUnix(t.result)||"end_time"==c&&h&&h>e.$util.DateToUnix(t.result))){i.next=14;break}return e.$util.showToast({title:"结束时间不能小于开始时间"}),i.abrupt("return");case 14:e.check_time[c]=t.result;case 15:case"end":return i.stop()}}),i)})))()},toConfirm:function(){var t=this;return(0,o.default)(a.default.mark((function e(){var i,n,r,o,c,s,u,l,h,d,f;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.check_time,n=i.month,r=void 0===n?"":n,o=i.start_time,c=void 0===o?"":o,s=i.end_time,u=void 0===s?"":s,l=t.activeIndex,h=void 0===l?0:l,d=1e3*t.$util.DateToUnix(c),f=1e3*t.$util.DateToUnix(u),0!=h||r){e.next=7;break}return t.$util.showToast({title:"请选择开始月份"}),e.abrupt("return");case 7:if(1!=h||c&&u&&!(f-d>31536e6)){e.next=10;break}return t.$util.showToast({title:c?u?"查询时间跨度最长为一年哦":"请选择结束时间":"请选择开始时间"}),e.abrupt("return");case 10:if(t.check_time.activeIndex=h,t.prev_time=t.$util.deepCopy(t.check_time),t.$refs.show_choose_time.close(),1!=h){e.next=16;break}return e.next=16,t.getCount();case 16:t.getList(1);case 17:case"end":return e.stop()}}),e)})))()},goDetail:function(t){var e=this.list.data[t].id;this.$util.goUrl({url:"/technician/pages/income/commission-detail?id=".concat(e)})}}),filters:{handleTimeText:function(t,e){var i="请选择",n=t.activeIndex,a=t.month,r=t.start_time,o=t.end_time;0==n&&a&&(i=s.default.formatTime(1e3*s.default.DateToUnix("".concat(a,"-01")),"YY年M月"));var c=1==e?"YY.M.D":"YY年M月D日";return 1==n&&r&&o&&(i=s.default.formatTime(1e3*s.default.DateToUnix(r),c)+" - "+s.default.formatTime(1e3*s.default.DateToUnix(o),c)),i}}};e.default=h}).call(this,i("df3c")["default"])},a07f:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={wPicker:function(){return i.e("components/w-picker/w-picker").then(i.bind(null,"ab68"))}},a=function(){var t=this,e=t.$createElement,i=(t._self._c,t._f("handleTimeText")(t.prev_time,1)),n=t.isLoad&&t.list.data.length>0,a=n?t.__map(t.list.data,(function(e,i){var n=t.__get_orig(e),a=1==t.prev_time.activeIndex&&0==i?t._f("handleTimeText")(t.prev_time,2):null;return{$orig:n,f1:a}})):null,r=t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0:null,o=!t.loading&&t.list.data.length<=0&&1==t.list.current_page;t._isMounted||(t.e0=function(e){return e.stopPropagation(),t.$refs.show_rule_item.close()}),t.$mp.data=Object.assign({},{$root:{f0:i,g0:n,l0:a,g1:r,g2:o}})},r=[]},a719:function(t,e,i){"use strict";i.r(e);var n=i("9b6c"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a}},[["2c10","common/runtime","common/vendor"]]]);