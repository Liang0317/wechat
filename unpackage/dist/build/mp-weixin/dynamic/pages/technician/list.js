(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["dynamic/pages/technician/list"],{"4bd6":function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("7eb4")),i=a(n("7ca3")),o=a(n("ee10")),u=n("8f59");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={components:{wfallsFlow:function(){n.e("components/wfalls-flow").then(function(){return resolve(n("521f"))}.bind(null,n)).catch(n.oe)}},data:function(){return{isLoad:!1,statusList:[{id:0,title:"全部"},{id:1,title:"审核中"},{id:2,title:"审核通过"},{id:3,title:"已驳回"}],statusInd:0,showSort:!1,loading:!0,param:{page:1,limit:10,status:0},list:{data:[]},count:{}}},computed:(0,u.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},configInfo:function(t){return t.config.configInfo},userInfo:function(t){return t.user.userInfo},location:function(t){return t.user.location},locaRefuse:function(t){return t.user.locaRefuse},haveShieldOper:function(t){return t.user.haveShieldOper},userCoachStatus:function(t){return t.user.userCoachStatus},changeOnAddr:function(t){return t.user.changeOnAddr},noChangeLoca:function(t){return t.user.noChangeLoca}}),onLoad:function(){this.$util.setNavigationBarColor({bg:this.primaryColor}),this.$util.showLoading(),this.initIndex()},onShow:function(){var t=this;return(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.haveShieldOper){e.next=6;break}return e.next=3,t.initRefresh();case 3:t.updateUserItem({key:"haveShieldOper",val:0}),e.next=7;break;case 6:t.getDynamicData();case 7:!t.location.lat&&t.locaRefuse&&t.toResetUtilLoca();case 8:case"end":return e.stop()}}),e)})))()},onPullDownRefresh:function(){var e=this;return(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showNavigationBarLoading(),n.next=3,e.initRefresh();case 3:t.stopPullDownRefresh();case 4:case"end":return n.stop()}}),n)})))()},onReachBottom:function(){var t=this;return(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.list.current_page>=t.list.last_page||t.loading)){e.next=2;break}return e.abrupt("return");case 2:return t.param.page=t.param.page+1,t.loading=!0,e.next=6,t.getList();case 6:setTimeout((function(){t.$refs.wfalls.handleViewRender()}),0);case 7:case"end":return e.stop()}}),e)})))()},watch:{locaRefuse:function(t,e){t||this.toResetUtilLoca()},changeOnAddr:function(t,e){var n=this.noChangeLoca.noloca;t&&n&&this.initUtilLocaData()},noChangeLoca:function(t,e){var n=this;setTimeout((function(){var t=n.changeOnAddr,e=t.lat,a=t.lng,r=t.unix,i=void 0===r?0:r,o=n.noChangeLoca.noloca,u=n.$util.DateToUnix(n.$util.formatTime(new Date,"YY-M-D h:m:s"));o&&(!e&&!a||!i||i&&u-i>=1)&&n.getUtilLocation()}),800)}},methods:s(s({},(0,u.mapMutations)(["updateUserItem","updateMapItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,o.default)(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],!a){n.next=6;break}return n.next=4,Promise.all([e.getDynamicData(),e.getList(1)]);case 4:n.next=8;break;case 6:return n.next=8,e.getList(1);case 8:case"end":return n.stop()}}),n)})))()},initRefresh:function(){var t=this;return(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initIndex(!0);case 2:case"end":return e.stop()}}),e)})))()},toResetUtilLoca:function(){return(0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},toOpenLocation:function(){var t=this;return(0,o.default)(r.default.mark((function e(){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.user_privacy.check(),!n){e.next=4;break}return t.$refs.user_privacy.open(),e.abrupt("return");case 4:return e.next=6,t.$util.checkAuth({type:"userLocation",checkApp:!0});case 6:t.initRefresh();case 7:case"end":return e.stop()}}),e)})))()},getDynamicData:function(){var t=this;return(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.dynamic.dynamicData();case 2:t.count=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getList:function(e){var n=this;return(0,o.default)(r.default.mark((function a(){var i,o,u,c,s,l,f,d,p,h,g,v,m,w,b;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e&&(n.showSort=!1,n.param.page=1,n.list.data=[],t.pageScrollTo({scrollTop:0})),i=n.location,o=n.userCoachStatus,u=o.status,c=o.coach_position,1!=n.param.page||i.lat&&(!i.lat||"暂未获取到位置信息"!=i.address)){a.next=25;break}if(s=n.$refs.user_privacy.check(),!s){a.next=11;break}return n.$refs.user_privacy.open(),n.isLoad=!0,n.loading=!1,n.$util.hideAll(),a.abrupt("return");case 11:if(2!=u||!c){a.next=22;break}if(l=n.changeOnAddr,f=l.lat,d=void 0===f?0:f,p=l.lng,h=void 0===p?0:p,g=l.unix,v=void 0===g?0:g,m=n.$util.DateToUnix(n.$util.formatTime(new Date,"YY-M-D h:m:s")),w=!(d&&h&&v&&m-v<3),w||(b=Object.assign({},n.location,{lat:d,lng:h,is_util_loca:1}),n.updateUserItem({key:"location",val:b})),n.updateUserItem({key:"noChangeLoca",val:{noloca:w}}),!n.noChangeLoca.noloca){a.next=19;break}return a.abrupt("return");case 19:n.initUtilLocaData(),a.next=23;break;case 22:n.getUtilLocation();case 23:return n.updateMapItem({key:"pageActive",val:!1}),a.abrupt("return");case 25:n.initUtilLocaData();case 26:case"end":return a.stop()}}),a)})))()},getUtilLocation:function(){var t=this;return(0,o.default)(r.default.mark((function e(){var n,a,i,o,u,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$util.getLocation();case 2:n=e.sent,a=n.lat,i=void 0===a?0:a,o=n.lng,u=void 0===o?0:o,c=Object.assign({},t.location,{lat:i,lng:u,is_util_loca:1}),t.updateUserItem({key:"location",val:c}),t.initUtilLocaData();case 10:case"end":return e.stop()}}),e)})))()},initUtilLocaData:function(){var t=this;return(0,o.default)(r.default.mark((function e(){var n,a,i,o,u,c,s,l,f,d,p,h,g;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.updateUserItem({key:"noChangeLoca",val:{noloca:!1}}),n=t.location,a=n.lat,i=void 0===a?0:a,o=n.lng,u=void 0===o?0:o,c=n.is_util_loca,s=void 0===c?0:c,l=t.list,f=t.statusList,d=t.statusInd,p=f[d].id,h=Object.assign({},t.param,{lat:i,lng:u,status:p}),e.next=7,t.$api.dynamic.coachDynamicList(h);case 7:g=e.sent,1==t.param.page||(g.data=l.data.concat(g.data)),t.list=g,t.isLoad=!0,t.loading=!1,t.$util.hideAll(),1==h.page&&i&&u&&s&&t.$util.getMapInfo();case 13:case"end":return e.stop()}}),e)})))()},toChangeItem:function(t){-1==t?this.showSort=!this.showSort:(this.statusInd=t,this.showSort=!1,this.initRefresh())}})};e.default=l}).call(this,n("df3c")["default"])},"51e28":function(t,e,n){"use strict";var a=n("9ace"),r=n.n(a);r.a},"6c84":function(t,e,n){"use strict";n.r(e);var a=n("ed03"),r=n("751b");for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("51e28");var o=n("828b"),u=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=u.exports},"751b":function(t,e,n){"use strict";n.r(e);var a=n("4bd6"),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},"968f":function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("65e9");a(n("3240"));var r=a(n("6c84"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"9ace":function(t,e,n){},ed03:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.isLoad?t.list.data.length:null),a=t.isLoad&&t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0:null,r=t.isLoad?!t.loading&&t.list.data.length<=0&&1==t.list.current_page:null;t._isMounted||(t.e0=function(e){return e.stopPropagation(),t.$util.goUrl({url:"/dynamic/pages/technician/thumbs"})},t.e1=function(e){return e.stopPropagation(),t.$util.goUrl({url:"/dynamic/pages/technician/follow"})},t.e2=function(e){return e.stopPropagation(),t.$util.goUrl({url:"/dynamic/pages/technician/comment"})}),t.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:r}})},r=[]}},[["968f","common/runtime","common/vendor"]]]);