(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["dynamic/pages/technician/edit"],{"1e6a":function(e,t,r){"use strict";var n=r("45f7"),o=r.n(n);o.a},"45f7":function(e,t,r){},"78b9":function(e,t,r){"use strict";r.r(t);var n=r("a8e3"),o=r.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},a8e3:function(e,t,r){"use strict";(function(e){var n=r("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("7eb4")),a=n(r("34cf")),i=n(r("ee10")),u=n(r("7ca3")),c=r("8f59");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={data:function(){return{options:{},subForm:{id:0,cover:[],imgs:[],type:1,title:"",text:"",lat:"",lng:"",address:""},rule:[{name:"cover",checkType:"isNotNull",errorMsg:"请上传封面图"},{name:"imgs",checkType:"isNotNull",errorMsg:""},{name:"title",checkType:"isNotNull",errorMsg:"请输入标题",regType:2},{name:"text",checkType:"isNotNull",errorMsg:"请输入正文内容",regType:2},{name:"address",checkType:"isNotNull",errorMsg:"请选择定位地点"}],lockTap:!1}},computed:(0,c.mapState)({primaryColor:function(e){return e.config.configInfo.primaryColor},subColor:function(e){return e.config.configInfo.subColor},configInfo:function(e){return e.config.configInfo},userInfo:function(e){return e.user.userInfo},location:function(e){return e.user.location},haveShieldOper:function(e){return e.user.haveShieldOper},useChooseLocation:function(e){return e.user.useChooseLocation}}),onLoad:function(e){var t=e.type;t*=1,this.options=e,this.subForm.type=t,this.rule[1].errorMsg=1==t?"请上传图片":"请上传视频",this.initIndex(),this.$util.setNavigationBarColor({bg:this.primaryColor})},onShow:function(){this.useChooseLocation&&this.updateUserItem({key:"useChooseLocation",val:!1})},methods:l(l({},(0,c.mapMutations)(["updateUserItem"])),{},{initIndex:function(){var e=this;return(0,i.default)(o.default.mark((function t(){var r,n,a,i;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.options.id,n=void 0===r?0:r,n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$api.dynamic.coachDynamicInfo({id:n});case 5:for(i in a=t.sent,a.cover=[{path:a.cover}],a.imgs=a.imgs.map((function(e){return{path:e}})),e.subForm)e.subForm[i]=a[i];case 9:case"end":return t.stop()}}),t)})))()},imgUpload:function(e){var t=e.imagelist,r=e.imgtype;this.subForm[r]=t},toChooseLocation:function(){var e=this;return(0,i.default)(o.default.mark((function t(){var r;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$refs.user_privacy.check(),!r){t.next=4;break}return e.$refs.user_privacy.open(),t.abrupt("return");case 4:return e.updateUserItem({key:"useChooseLocation",val:!0}),t.next=7,e.$util.checkAuth({type:"userLocation"});case 7:e.initChooseLoca();case 8:case"end":return t.stop()}}),t)})))()},initChooseLoca:function(){var t=arguments,r=this;return(0,i.default)(o.default.mark((function n(){var i,u,c,s,l,f,d,p,h,v,m,b,g,y;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},n.next=3,e.chooseLocation(i);case 3:if(u=n.sent,c=(0,a.default)(u,2),s=c[0],l=c[1],f=s?{name:"",address:"",latitude:"",longitude:""}:l,d=f.name,p=void 0===d?"":d,h=f.address,v=void 0===h?"":h,m=f.latitude,b=void 0===m?"":m,g=f.longitude,y=void 0===g?"":g,v=v||p,r.updateUserItem({key:"useChooseLocation",val:!1}),v){n.next=12;break}return n.abrupt("return");case 12:r.subForm.lat=b,r.subForm.lng=y,r.subForm.address=v;case 15:case"end":return n.stop()}}),n)})))()},validate:function(e){var t=new this.$util.Validate;this.rule.map((function(r){var n=r.name;t.add(e[n],r)}));var r=t.start();return r},submit:function(){var e=this;return(0,i.default)(o.default.mark((function t(){var r,n,a,i,u,c,s;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$util.deepCopy(e.subForm),r.imgs=r.imgs&&r.imgs.length>0?r.imgs.map((function(e){return e.path})):[],n=1==r.type?r.imgs.length>0?r.imgs[0]:"":r.cover&&r.cover.length>0?r.cover[0].path:"",r.cover=n,a=e.validate(r),!a){t.next=8;break}return e.$util.showToast({title:a}),t.abrupt("return");case 8:if(!e.lockTap){t.next=10;break}return t.abrupt("return");case 10:return e.lockTap=!0,e.$util.showLoading(),t.prev=12,i=r.id?"dynamicUpdate":"dynamicAdd",t.next=16,e.$api.dynamic[i](r);case 16:u=t.sent,c=u.status,s=void 0===c?1:c,e.$util.hideAll(),e.$util.showToast({title:1==s?"正在审核中":r.id?"编辑成功":"发布成功"}),e.updateUserItem({key:"haveShieldOper",val:1}),setTimeout((function(){e.$util.back(),e.$util.goUrl({url:1,openType:"navigateBack"})}),2e3),t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](12),setTimeout((function(){e.lockTap=!1,e.$util.hideAll()}),2e3);case 28:case"end":return t.stop()}}),t,null,[[12,25]])})))()}})};t.default=f}).call(this,r("df3c")["default"])},e091:function(e,t,r){"use strict";r.r(t);var n=r("ef58"),o=r("78b9");for(var a in o)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(a);r("1e6a");var i=r("828b"),u=Object(i["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=u.exports},eace:function(e,t,r){"use strict";(function(e,t){var n=r("47a9");r("65e9");n(r("3240"));var o=n(r("e091"));e.__webpack_require_UNI_MP_PLUGIN__=r,t(o.default)}).call(this,r("3223")["default"],r("df3c")["createPage"])},ef58:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},o=[]}},[["eace","common/runtime","common/vendor"]]]);