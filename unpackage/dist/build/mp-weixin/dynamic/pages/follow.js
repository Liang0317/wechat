(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["dynamic/pages/follow"],{"1cfd":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=(t._self._c,t.loading?t.list.current_page>=t.list.last_page&&t.list.data.length>0:null),n=!t.loading&&t.list.data.length<=0&&1==t.list.current_page;t.$mp.data=Object.assign({},{$root:{g0:a,g1:n}})},i=[]},"780b":function(t,e,a){},"9a1e":function(t,e,a){"use strict";(function(t,e){var n=a("47a9");a("65e9");n(a("3240"));var i=n(a("bc51"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(i.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},a603:function(t,e,a){"use strict";a.r(e);var n=a("f9e2"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},bc51:function(t,e,a){"use strict";a.r(e);var n=a("1cfd"),i=a("a603");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("ef00");var r=a("828b"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=c.exports},ef00:function(t,e,a){"use strict";var n=a("780b"),i=a.n(n);i.a},f9e2:function(t,e,a){"use strict";(function(t){var n=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("7eb4")),o=n(a("ee10")),r=n(a("7ca3")),c=a("8f59");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){(0,r.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var s={data:function(){return{loading:!0,param:{page:1},list:{data:[]}}},computed:(0,c.mapState)({primaryColor:function(t){return t.config.configInfo.primaryColor},subColor:function(t){return t.config.configInfo.subColor},userInfo:function(t){return t.user.userInfo},location:function(t){return t.user.location},userCoachStatus:function(t){return t.user.userCoachStatus},changeOnAddr:function(t){return t.user.changeOnAddr},noChangeLoca:function(t){return t.user.noChangeLoca}}),onLoad:function(){this.$util.setNavigationBarColor({bg:this.primaryColor}),this.$util.showLoading(),this.initIndex()},onPullDownRefresh:function(){t.showNavigationBarLoading(),this.initRefresh(),t.stopPullDownRefresh()},onReachBottom:function(){this.list.current_page>=this.list.last_page||this.loading||(this.param.page=this.param.page+1,this.loading=!0,this.getList())},watch:{changeOnAddr:function(t,e){var a=this.noChangeLoca.noloca;t&&a&&this.initUtilLocaData()},noChangeLoca:function(t,e){var a=this;setTimeout((function(){var t=a.changeOnAddr,e=t.lat,n=t.lng,i=t.unix,o=void 0===i?0:i,r=a.noChangeLoca.noloca,c=a.$util.DateToUnix(a.$util.formatTime(new Date,"YY-M-D h:m:s"));r&&(!e&&!n||!o||o&&c-o>=1)&&a.getUtilLocation()}),800)}},methods:l(l({},(0,c.mapMutations)(["updateUserItem","updateMapItem"])),{},{initIndex:function(){var t=arguments,e=this;return(0,o.default)(i.default.mark((function a(){return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.length>0&&void 0!==t[0]&&t[0],e.getList();case 2:case"end":return a.stop()}}),a)})))()},initRefresh:function(){this.param.page=1,this.initIndex(!0)},getList:function(){var t=this;return(0,o.default)(i.default.mark((function e(){var a,n,o,r,c,u,l,s,f,d,p,g,h,v;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.location,n=t.userCoachStatus,o=n.status,r=n.coach_position,1!=t.param.page||a.lat&&(!a.lat||"暂未获取到位置信息"!=a.address)){e.next=17;break}if(2!=o||!r){e.next=14;break}if(c=t.changeOnAddr,u=c.lat,l=void 0===u?0:u,s=c.lng,f=void 0===s?0:s,d=c.unix,p=void 0===d?0:d,g=t.$util.DateToUnix(t.$util.formatTime(new Date,"YY-M-D h:m:s")),h=!(l&&f&&p&&g-p<3),h||(v=Object.assign({},t.location,{lat:l,lng:f,is_util_loca:1}),t.updateUserItem({key:"location",val:v})),t.updateUserItem({key:"noChangeLoca",val:{noloca:h}}),!t.noChangeLoca.noloca){e.next=11;break}return e.abrupt("return");case 11:t.initUtilLocaData(),e.next=15;break;case 14:t.getUtilLocation();case 15:return t.updateMapItem({key:"pageActive",val:!1}),e.abrupt("return");case 17:t.initUtilLocaData();case 18:case"end":return e.stop()}}),e)})))()},getUtilLocation:function(){var t=this;return(0,o.default)(i.default.mark((function e(){var a,n,o,r,c,u;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$util.getLocation();case 2:a=e.sent,n=a.lat,o=void 0===n?0:n,r=a.lng,c=void 0===r?0:r,u=Object.assign({},t.location,{lat:o,lng:c,is_util_loca:1}),t.updateUserItem({key:"location",val:u}),t.initUtilLocaData();case 10:case"end":return e.stop()}}),e)})))()},initUtilLocaData:function(){var t=this;return(0,o.default)(i.default.mark((function e(){var a,n,o,r,c,u,l,s,f,d;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.updateUserItem({key:"noChangeLoca",val:{noloca:!1}}),a=t.list,n=t.param,o=t.location,r=o.lat,c=void 0===r?0:r,u=o.lng,l=void 0===u?0:u,s=o.is_util_loca,f=void 0===s?0:s,n.lat=c,n.lng=l,e.next=7,t.$api.dynamic.followCoachList(n);case 7:d=e.sent,1==t.param.page||(d.data=a.data.concat(d.data)),t.list=d,t.loading=!1,t.$util.hideAll(),1==n.page&&c&&l&&f&&t.$util.getMapInfo();case 12:case"end":return e.stop()}}),e)})))()},goDetail:function(t){var e=this.list.data[t].coach_id;this.$util.goUrl({url:"/user/pages/technician-info?id=".concat(e)})}})};e.default=s}).call(this,a("df3c")["default"])}},[["9a1e","common/runtime","common/vendor"]]]);