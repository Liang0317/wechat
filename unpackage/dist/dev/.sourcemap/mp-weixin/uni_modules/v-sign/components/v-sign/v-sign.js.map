{"version":3,"sources":["webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/uni_modules/v-sign/components/v-sign/v-sign.vue?516d","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/uni_modules/v-sign/components/v-sign/v-sign.vue?2a8b","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/uni_modules/v-sign/components/v-sign/v-sign.vue?8d51","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/uni_modules/v-sign/components/v-sign/v-sign.vue?8ba3","uni-app:///uni_modules/v-sign/components/v-sign/v-sign.vue","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/uni_modules/v-sign/components/v-sign/v-sign.vue?87da","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/uni_modules/v-sign/components/v-sign/v-sign.vue?02d6"],"names":["name","props","cid","type","default","width","height","lineWidth","lineColor","bgColor","customStyle","provide","getSignInterface","data","formatSize","lineData","winWidth","winHeight","penLineWidth","penLineColor","created","uni","windowWidth","windowHeight","onReady","mounted","methods","onTouchStart","style","color","coordinates","x","y","onTouchMove","onTouchEnd","clear","revoke","item","drawLine","startPos","endPos","saveImage","filename","tempFilePath","filePath","success","resolve","fail","reject","canvasToTempFilePath","canvasId","conf","console","setBackgroundColor","setLineWidth","setLineColor","provideSignInterface","ctx","getLineData","caculateBezier","x0","P0","y0","x2","P2","y2","B"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AAC+K;AAC/K,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAA+pB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC6BnrB;AAEA;AAAA;AAAA,gBAEA;EACAA;EACAC;IACA;IACAC;MACAC;MACAC;MACA;IACA;;IACA;IACAC;MACAF;IACA;IACA;IACAG;MACAH;IACA;IACA;IACAI;MACAJ;MACAC;IACA;IACA;IACAI;MACAL;MACAC;IACA;IACA;IACAK;MACAN;MACAC;IACA;IACA;IACAM;MACAP;MACAC;QAAA;MAAA;IACA;EACA;EACAO;IACA;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACA,4BAGAC;MAFAC;MACAC;IAEA;IACA;EACA;EACAC;IACA;IACA,6BAGAH;MAFAC;MACAC;IAEA;IACA;EACA;EACAE;IACA;IACA;;IAIA;;IAIA;IACA;EACA;EACAC;IACAC;MACA;MACA;QACAC;UACAC;UACAxB;QACA;QACA;QACAyB;UACA3B;UACA4B;UACAC;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;QACA9B;QACA4B;QACAC;MACA;MACA;IACA;IACAE;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;UACA;UACA;UACA;QACA;UACAC;YACA;cACA;YACA;cACA;YACA;UACA;QACA;QACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACAC;QACAC;UACAT;UACAC;QACA;MACA;QACAO;QACAC;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBAAA,iCACA;kBAkBAtB;oBACAuB;oBACAC;sBACAC;oBACA;oBACAC;sBACAC;oBACA;kBACA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MAAA;MACA;QACA5B;UACA6B;QAAA,GACAC;UACAN;YACAC;UACA;UACAC;YACAK;YACAJ;UACA;QAAA,IAEA,OACA;MACA;IACA;IACAK;MAAA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;QACAtD;QACAuD;QACAtB;QACAC;QACAK;QACAQ;QACAK;QACAC;QACAF;QACAK;UAAA;QAAA;MACA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC;MAAA;MACA,IACAC,KAEAC,GAFA9B;QACA+B,KACAD,GADA7B;MAEA,IACA+B,KAEAC,GAFAjC;QACAkC,KACAD,GADAhC;MAEA,IACAD,IAEAmC,EAFAnC;QACAC,IACAkC,EADAlC;MAEA;MACA;MACA;QACAD;QACAC;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;ACrUA;AAAA;AAAA;AAAA;AAAkxC,CAAgB,unCAAG,EAAC,C;;;;;;;;;;;ACAtyC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/v-sign/components/v-sign/v-sign.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./v-sign.vue?vue&type=template&id=2a6f283c&scoped=true&\"\nvar renderjs\nimport script from \"./v-sign.vue?vue&type=script&lang=js&\"\nexport * from \"./v-sign.vue?vue&type=script&lang=js&\"\nimport style0 from \"./v-sign.vue?vue&type=style&index=0&id=2a6f283c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a6f283c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/v-sign/components/v-sign/v-sign.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./v-sign.vue?vue&type=template&id=2a6f283c&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.__get_style([\n    {\n      width: _vm.width && _vm.formatSize(_vm.width),\n      height: _vm.height && _vm.formatSize(_vm.height),\n    },\n    _vm.customStyle,\n  ])\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./v-sign.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./v-sign.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"signature-wrap\">\r\n\t\t<canvas :canvas-id=\"cid\" :id=\"cid\" @touchstart=\"onTouchStart\" @touchmove=\"onTouchMove\" @touchend=\"onTouchEnd\"\r\n\t\t\tdisable-scroll :style=\"[\r\n\t\t\t\t{\r\n\t\t\t\t\twidth: width && formatSize(width),\r\n\t\t\t\t\theight: height && formatSize(height)\r\n\t\t\t\t},\r\n\t\t\t\tcustomStyle\r\n\t\t\t]\"></canvas>\r\n\t\t<slot />\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * sign canvas 手写签名\r\n\t * @description 设置线条宽度、颜色，撤回，清空\r\n\t * @tutorial\r\n\t * @property {String} cid canvas id 不设置则默认为 v-sign-时间戳\r\n\t * @property {String, Number} width canvas 宽度\r\n\t * @property {String, Number} height canvas 高度\r\n\t * @property {bgColor} bgColor 画布背景颜色\r\n\t * @property {Object} customStyle canvas 自定义样式\r\n\t * @property {String} lineWidth 画笔大小，权重小于 v-sign-pen 组件设置的画笔大小\r\n\t * @property {Number} lineColor 画笔颜色，权重小于 v-sign-pen 组件设置的画笔大小\r\n\t * @event {Function} init 当创建完 canvas 实例后触发，向外提供 canvas实例，撤回，清空方法\r\n\t * @example <v-sign @init=\"signInit\"></v-sign>\r\n\t */\r\n\timport {\r\n\t\tformatSize\r\n\t} from '../../utils'\r\n\r\n\texport default {\r\n\t\tname: 'v-sign',\r\n\t\tprops: {\r\n\t\t\t// canvas id\r\n\t\t\tcid: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: `v-sign-${Date.now()}`\r\n\t\t\t\t// required: true\r\n\t\t\t},\r\n\t\t\t// canvas 宽度\r\n\t\t\twidth: {\r\n\t\t\t\ttype: [String, Number]\r\n\t\t\t},\r\n\t\t\t// canvas 高度\r\n\t\t\theight: {\r\n\t\t\t\ttype: [String, Number]\r\n\t\t\t},\r\n\t\t\t// 画笔大小，权重小于 v-sign-pen 组件设置的画笔大小 penLineWidth\r\n\t\t\tlineWidth: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 4\r\n\t\t\t},\r\n\t\t\t// 线颜色，权重小于 v-sign-color 组件设置的画笔颜色 penLineColor\r\n\t\t\tlineColor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#333'\r\n\t\t\t},\r\n\t\t\t// 画布背景颜色\r\n\t\t\tbgColor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#fff'\r\n\t\t\t},\r\n\t\t\t// canvas自定义样式\r\n\t\t\tcustomStyle: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({})\r\n\t\t\t}\r\n\t\t},\r\n\t\tprovide() {\r\n\t\t\treturn {\r\n\t\t\t\tgetSignInterface: this.provideSignInterface\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformatSize,\r\n\t\t\t\tlineData: [],\r\n\t\t\t\twinWidth: 0,\r\n\t\t\t\twinHeight: 0,\r\n\t\t\t\tpenLineWidth: null, // v-sign-pen 组件设置的画笔大小\r\n\t\t\t\tpenLineColor: null // v-sign-color 组件设置的颜色\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// 获取窗口宽高\r\n\t\t\tconst {\r\n\t\t\t\twindowWidth,\r\n\t\t\t\twindowHeight\r\n\t\t\t} = uni.getSystemInfoSync()\r\n\t\t\tthis.winWidth = windowWidth\r\n\t\t\tthis.winHeight = windowHeight\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t// 获取窗口宽高\r\n\t\t\tconst {\r\n\t\t\t\twindowWidth,\r\n\t\t\t\twindowHeight\r\n\t\t\t} = uni.getSystemInfoSync()\r\n\t\t\tthis.winWidth = windowWidth\r\n\t\t\tthis.winHeight = windowHeight\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.canvasCtx = uni.createCanvasContext(this.cid, this)\r\n\t\t\t// h5 需延迟绘制，否则绘制失败\r\n\t\t\t// #ifdef H5\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.setBackgroundColor(this.bgColor)\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t}, 10)\r\n\t\t\t// #endif\r\n\t\t\t// 初始化完成，触发 init 事件\r\n\t\t\tthis.$emit('init', this.provideSignInterface())\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonTouchStart(e) {\r\n\t\t\t\tconst pos = e.touches[0]\r\n\t\t\t\tthis.lineData.push({\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tcolor: this.penLineColor || this.lineColor,\r\n\t\t\t\t\t\twidth: this.penLineWidth || this.lineWidth\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 屏幕坐标\r\n\t\t\t\t\tcoordinates: [{\r\n\t\t\t\t\t\ttype: e.type,\r\n\t\t\t\t\t\tx: pos.x,\r\n\t\t\t\t\t\ty: pos.y\r\n\t\t\t\t\t}]\r\n\t\t\t\t})\r\n\t\t\t\tthis.drawLine()\r\n\t\t\t},\r\n\t\t\tonTouchMove(e) {\r\n\t\t\t\tconst pos = e.touches[0]\r\n\t\t\t\tthis.lineData[this.lineData.length - 1].coordinates.push({\r\n\t\t\t\t\ttype: e.type,\r\n\t\t\t\t\tx: pos.x,\r\n\t\t\t\t\ty: pos.y\r\n\t\t\t\t})\r\n\t\t\t\tthis.drawLine()\r\n\t\t\t},\r\n\t\t\tonTouchEnd(e) {\r\n\t\t\t\tthis.$emit('end', this.lineData)\r\n\t\t\t},\r\n\t\t\t// 清空画布\r\n\t\t\tclear() {\r\n\t\t\t\tthis.lineData = []\r\n\t\t\t\tthis.canvasCtx.clearRect(0, 0, this.winWidth, this.winHeight)\r\n\t\t\t\tthis.canvasCtx.draw()\r\n\t\t\t\tthis.setBackgroundColor(this.bgColor)\r\n\t\t\t\tthis.$emit('clear')\r\n\t\t\t},\r\n\t\t\t// 撤销\r\n\t\t\trevoke() {\r\n\t\t\t\tthis.setBackgroundColor(this.bgColor)\r\n\t\t\t\tthis.lineData.pop()\r\n\t\t\t\tthis.lineData.forEach((item, index) => {\r\n\t\t\t\t\tthis.canvasCtx.beginPath()\r\n\t\t\t\t\tthis.canvasCtx.setLineCap('round')\r\n\t\t\t\t\tthis.canvasCtx.setStrokeStyle(item.style.color)\r\n\t\t\t\t\tthis.canvasCtx.setLineWidth(item.style.width)\r\n\t\t\t\t\tif (item.coordinates.length < 2) {\r\n\t\t\t\t\t\tconst pos = item.coordinates[0]\r\n\t\t\t\t\t\tthis.canvasCtx.moveTo(pos.x, pos.y)\r\n\t\t\t\t\t\tthis.canvasCtx.lineTo(pos.x + 1, pos.y)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.coordinates.forEach(pos => {\r\n\t\t\t\t\t\t\tif (pos.type == 'touchstart') {\r\n\t\t\t\t\t\t\t\tthis.canvasCtx.moveTo(pos.x, pos.y)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.canvasCtx.lineTo(pos.x, pos.y)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.canvasCtx.stroke()\r\n\t\t\t\t})\r\n\t\t\t\tthis.canvasCtx.draw(true)\r\n\t\t\t\tthis.$emit('revoke', this.lineData)\r\n\t\t\t},\r\n\t\t\t// 绘制线条\r\n\t\t\tdrawLine() {\r\n\t\t\t\tconst lineDataLen = this.lineData.length\r\n\t\t\t\tif (!lineDataLen) return\r\n\t\t\t\tconst currentLineData = this.lineData[lineDataLen - 1]\r\n\t\t\t\tconst coordinates = currentLineData.coordinates\r\n\t\t\t\tconst coordinatesLen = coordinates.length\r\n\t\t\t\tif (!coordinatesLen) return\r\n\t\t\t\tlet startPos\r\n\t\t\t\tlet endPos\r\n\t\t\t\tif (coordinatesLen < 2) {\r\n\t\t\t\t\t// only start, no move event\r\n\t\t\t\t\tstartPos = coordinates[coordinatesLen - 1]\r\n\t\t\t\t\tendPos = {\r\n\t\t\t\t\t\tx: startPos.x + 1,\r\n\t\t\t\t\t\ty: startPos.y\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstartPos = coordinates[coordinatesLen - 2]\r\n\t\t\t\t\tendPos = coordinates[coordinatesLen - 1]\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst style = currentLineData.style\r\n\t\t\t\tthis.canvasCtx.beginPath()\r\n\t\t\t\tthis.canvasCtx.setLineCap('round')\r\n\t\t\t\tthis.canvasCtx.setStrokeStyle(style.color)\r\n\t\t\t\tthis.canvasCtx.setLineWidth(style.width)\r\n\t\t\t\tthis.canvasCtx.moveTo(startPos.x, startPos.y)\r\n\t\t\t\tthis.canvasCtx.lineTo(endPos.x, endPos.y)\r\n\t\t\t\t// const P1 = this.caculateBezier(startPos, endPos, centerPos)\r\n\t\t\t\t// console.log(P1.x, P1.y)\r\n\t\t\t\t// this.canvasCtx.moveTo(startPos.x, startPos.y)\r\n\t\t\t\t// this.canvasCtx.quadraticCurveTo(P1.x, P1.y, endPos.x, endPos.y)\r\n\t\t\t\tthis.canvasCtx.stroke()\r\n\t\t\t\tthis.canvasCtx.draw(true)\r\n\t\t\t},\r\n\t\t\t// 保存png图片，文件名配置 filename 仅支持 h5\r\n\t\t\tasync saveImage(filename = '签名') {\r\n\t\t\t\tconst tempFilePath = await this.canvasToTempFilePath()\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst a = document.createElement('a')\r\n\t\t\t\t\t\ta.href = tempFilePath\r\n\t\t\t\t\t\ta.download = filename\r\n\t\t\t\t\t\tdocument.body.appendChild(a)\r\n\t\t\t\t\t\ta.click()\r\n\t\t\t\t\t\ta.remove()\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\terrMsg: 'saveImageH5:ok'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tconsole.error(e)\r\n\t\t\t\t\t\treject(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\t\tsuccess(resObj) {\r\n\t\t\t\t\t\t\tresolve(resObj)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// canvas 保存为临时图片路径，h5返回 base64\r\n\t\t\tcanvasToTempFilePath(conf = {}) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t\tcanvasId: this.cid,\r\n\t\t\t\t\t\t\t...conf,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tresolve(res.tempFilePath)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\t\t\tconsole.log('fail', err)\r\n\t\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tthis\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetBackgroundColor(color = '#fff') {\r\n\t\t\t\tthis.canvasCtx.beginPath()\r\n\t\t\t\tthis.canvasCtx.setFillStyle(color)\r\n\t\t\t\tthis.canvasCtx.fillRect(0, 0, this.winWidth, this.winHeight)\r\n\t\t\t\tthis.canvasCtx.fill()\r\n\t\t\t\tthis.canvasCtx.draw(true)\r\n\t\t\t},\r\n\t\t\tsetLineWidth(numberVal) {\r\n\t\t\t\tthis.penLineWidth = numberVal\r\n\t\t\t},\r\n\t\t\tsetLineColor(strValue) {\r\n\t\t\t\tthis.penLineColor = strValue\r\n\t\t\t},\r\n\t\t\t// 向外暴露内部方法\r\n\t\t\tprovideSignInterface() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcid: this.cid,\r\n\t\t\t\t\tctx: this.canvasCtx,\r\n\t\t\t\t\tclear: this.clear,\r\n\t\t\t\t\trevoke: this.revoke,\r\n\t\t\t\t\tsaveImage: this.saveImage,\r\n\t\t\t\t\tcanvasToTempFilePath: this.canvasToTempFilePath,\r\n\t\t\t\t\tsetLineWidth: this.setLineWidth,\r\n\t\t\t\t\tsetLineColor: this.setLineColor,\r\n\t\t\t\t\tsetBackgroundColor: this.setBackgroundColor,\r\n\t\t\t\t\tgetLineData: () => this.lineData\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 计算二次贝塞尔曲线 控制点 P1\r\n\t\t\t * 起点 P0(x0,y0)、控制点P1(x1, y1)、P2(x2, y2)、曲线上任意点B(x, y)\r\n\t\t\t * 二次贝塞尔公式：B(t) = (1-t)²P0 + 2t(1-t)P1 + t²P2\r\n\t\t\t * 代入坐标得：\r\n\t\t\t * x = (1-t)²*x0 + 2t(1-t)*x1 + t²*x2\r\n\t\t\t * y = (1-t)²*y0 + 2t(1-t)*y1 + t²*y2\r\n\t\t\t */\r\n\t\t\tcaculateBezier(P0, P2, B, t = 0.5) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tx: x0,\r\n\t\t\t\t\ty: y0\r\n\t\t\t\t} = P0\r\n\t\t\t\tconst {\r\n\t\t\t\t\tx: x2,\r\n\t\t\t\t\ty: y2\r\n\t\t\t\t} = P2\r\n\t\t\t\tconst {\r\n\t\t\t\t\tx,\r\n\t\t\t\t\ty\r\n\t\t\t\t} = B\r\n\t\t\t\tlet x1 = (x - (1 - t) * (1 - t) * x0 - t * t * x2) / (2 * t * (1 - t))\r\n\t\t\t\tlet y1 = (y - (1 - t) * (1 - t) * y0 - t * t * y2) / (2 * t * (1 - t))\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: x1,\r\n\t\t\t\t\ty: y1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.signature-wrap {\r\n\t\tposition: relative;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./v-sign.vue?vue&type=style&index=0&id=2a6f283c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./v-sign.vue?vue&type=style&index=0&id=2a6f283c&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1747029156212\n      var cssReload = require(\"C:/Users/admin/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}