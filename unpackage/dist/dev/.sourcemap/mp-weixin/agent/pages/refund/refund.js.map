{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/agent/pages/refund/refund.vue?b927","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/agent/pages/refund/refund.vue?7a9b","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/agent/pages/refund/refund.vue?44e6","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/agent/pages/refund/refund.vue?ea15","uni-app:///agent/pages/refund/refund.vue","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/agent/pages/refund/refund.vue?3501","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/agent/pages/refund/refund.vue?b111"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","data","isLoad","options","statusType","refundForm","lockTap","computed","primaryColor","subColor","configInfo","userInfo","onLoad","agent","detail","methods","initIndex","refresh","bg","id","methodKey","item","total","num","aitem","price","goods_price","mprice","material_price","initRefresh","checkInput","handleCheckOrderItem","all","car_price","cprice","rtprice","rmprice","tprice","setTimeout","toConfirmRefund","subForm","oid","refund_car_price","trprice","total_refund_price","list","order_goods","param","order_id","text","rprice","refund_price","refund_material_price","title","key","val","url","openType"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AAC4K;AAC5K,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAgpB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACwGpqB;AAIA;AAAA;AAAA,eACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;EACA;EACAC;IACA,qBAGAT,QAFAU;MAAAA;MAAA,kBAEAV,QADAW;MAAAA;IAEAX;IACAA;IACA;IACA;EACA;EACAY,uDACA,2DACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBAAA,MASA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAEA;kBACAC;gBACA;gBAAA,gBAIA,eAFAC,uBACAN;gBAEAO;gBAAA;gBAAA,OACA;kBACAD;gBACA;cAAA;gBAFAE;gBAGApB;gBACAA;gBACAqB;gBACArB;kBACA,IACAsB,MAGAC,MAHAD;oBACAE,QAEAD,MAFAE;oBACAC,SACAH,MADAI;kBAEAJ;kBACAA;kBACAA;kBACAF;gBACA;gBACArB;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA4B;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;MAAA;MACA,uBAIA;QAHAC;QACAC;QACAC;MAGA;QACA;QACA;UACAA;QACA;QACA;UACAA;QACA;QACA;UACA;QACA;MACA;MAEA;QACA,4BAMA;UALAX;UACAY;UACAC;UACAC;UACAV;QAEA;QACA;UACAQ;QACA;QACA;UACAA;QACA;QACA;UACAC;QACA;QACA;UACAA;QACA;QACA;QACA;UACA;UACA;UACA;QACA;MACA;MACAE;QACA;QACA;UACAhB;QACA;QACAA;QACA;MACA;IACA;IACA;AACA;AACA;IACAiB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBAEAC,MAIAD,QAJArB,IACAe,SAGAM,QAHAE,kBACAC,UAEAH,QAFAI,oBACAC,OACAL,QADAM;gBAEAC;kBACAC;kBACAf;kBACAR;kBACAoB;kBACAI;gBACA;gBACAJ;kBACA,IACA1B,KAGAE,KAHAF;oBACA+B,SAEA7B,KAFA8B;oBACAxB,SACAN,KADA+B;kBAEAL;oBACA5B;oBACAO;oBACAE;kBACA;gBACA;gBAAA,iBAIA,gBAFAf,8BACAC;gBAEAM;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBACA;kBACAiC;gBACA;gBACAf;kBACA;kBACA;oBACAgB;oBACAC;kBACA;kBACA;oBACA;kBACA;kBACA;oBACAC;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EAAA;AAEA;AAAA,2B;;;;;;;;;;;;AClUA;AAAA;AAAA;AAAA;AAA+tC,CAAgB,+lCAAG,EAAC,C;;;;;;;;;;;ACAnvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"agent/pages/refund/refund.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './agent/pages/refund/refund.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./refund.vue?vue&type=template&id=a0601388&\"\nvar renderjs\nimport script from \"./refund.vue?vue&type=script&lang=js&\"\nexport * from \"./refund.vue?vue&type=script&lang=js&\"\nimport style0 from \"./refund.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"agent/pages/refund/refund.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./refund.vue?vue&type=template&id=a0601388&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.isLoad\n    ? _vm.__map(_vm.refundForm.order_goods, function (aitem, aindex) {\n        var $orig = _vm.__get_orig(aitem)\n        var g0 = _vm.refundForm.order_goods.length\n        var g1 = !(_vm.refundForm.pay_type == 2)\n          ? [3, 4, 5].includes(_vm.refundForm.pay_type)\n          : null\n        return {\n          $orig: $orig,\n          g0: g0,\n          g1: g1,\n        }\n      })\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$util.goUrl({\n        url: 1,\n        openType: \"navigateBack\",\n      })\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./refund.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./refund.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"user-order-refund\" v-if=\"isLoad\">\r\n\r\n\t\t<view class=\"fill-base pd-lg mt-md ml-md mr-md radius-16\">\r\n\t\t\t<block v-for=\"(aitem,aindex) in refundForm.order_goods\" :key=\"aindex\">\r\n\t\t\t\t<view class=\"item-child\"\r\n\t\t\t\t\t:class=\"[{'mt-lg':aindex!=0},{'pb-lg b-1px-b':aindex!=refundForm.order_goods.length-1}]\">\r\n\t\t\t\t\t<view @tap=\"handleCheckOrderItem(1, aindex)\" class=\"flex-warp\">\r\n\t\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t\t<view class=\"goods-img\">\r\n\t\t\t\t\t\t\t<view class=\"h5-image goods-img\"\r\n\t\t\t\t\t\t\t\t:style=\"{ backgroundImage : `url('${aitem.goods_cover}')`}\">\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t\t\t\t<image mode=\"aspectFill\" class=\"goods-img\" :src=\"aitem.goods_cover\"></image>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\r\n\t\t\t\t\t\t<view class=\"flex-1 ml-md\">\r\n\t\t\t\t\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t\t\t\t\t<view class=\"f-title c-title text-bold max-300 ellipsis\">{{aitem.goods_name}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"f-desc\"\r\n\t\t\t\t\t\t\t\t\t:style=\"{color:refundForm.pay_type==2?primaryColor: [3,4,5].includes(refundForm.pay_type)?subColor: refundForm.pay_type == 6 ? '#11C95E' : '#333'}\">\r\n\t\t\t\t\t\t\t\t\t{{ statusType[refundForm.pay_type] }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"f-caption c-caption mt-sm\" style=\"height:30rpx\">\r\n\t\t\t\t\t\t\t\t<block v-if=\"aitem.material_price * 1 > 0\">物料费：¥{{aitem.material_price}}</block>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex-between mt-md\">\r\n\t\t\t\t\t\t\t\t<view class=\"f-desc c-warning text-bold\">¥{{aitem.goods_price}} </view>\r\n\t\t\t\t\t\t\t\t<view class=\"f-desc\" style=\"color:#4D4D4D\">x{{aitem.num}}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"mt-sm\">\r\n\t\t\t\t\t\t<view class=\"flex-between f-paragraph mt-md\" v-if=\"aitem.goods_price * 1 > 0\">\r\n\t\t\t\t\t\t\t<view class=\"c-paragraph\">项目金额</view>\r\n\t\t\t\t\t\t\t<view class=\"flex-y-center c-title\">\r\n\t\t\t\t\t\t\t\t<input @input=\"checkInput($event,aindex,'refund_price')\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"handleCheckOrderItem(0, aindex)\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"refundForm.order_goods[aindex].refund_price\" type=\"number\"\r\n\t\t\t\t\t\t\t\t\tclass=\"text-right\" placeholder=\"请输入物料费\" />\r\n\t\t\t\t\t\t\t\t<view class=\"ml-sm\">元</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex-between f-paragraph mt-md\" v-if=\"aitem.material_price * 1 > 0\">\r\n\t\t\t\t\t\t\t<view class=\"c-paragraph\">物料费</view>\r\n\t\t\t\t\t\t\t<view class=\"flex-y-center c-title\">\r\n\t\t\t\t\t\t\t\t<input @input=\"checkInput($event,aindex,'refund_material_price')\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"handleCheckOrderItem(0, aindex)\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"refundForm.order_goods[aindex].refund_material_price\" type=\"number\"\r\n\t\t\t\t\t\t\t\t\tclass=\"text-right\" placeholder=\"请输入物料费\" />\r\n\t\t\t\t\t\t\t\t<view class=\"ml-sm\">元</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex-between f-paragraph mt-md\">\r\n\t\t\t\t\t\t\t<view class=\"c-paragraph\">累计退款金额</view>\r\n\t\t\t\t\t\t\t<view class=\"c-title text-bold\">¥{{aitem.total_refund_price}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"fill-base pd-lg mt-md ml-md mr-md radius-16\">\r\n\t\t\t<view class=\"flex-between f-paragraph mb-md\" v-if=\"refundForm.car_price*1>0\">\r\n\t\t\t\t<view class=\"c-paragraph\">车费</view>\r\n\t\t\t\t<view class=\"flex-y-center c-title\">\r\n\t\t\t\t\t<input @input=\"checkInput($event,-1,'refund_car_price')\" @blur=\"handleCheckOrderItem(3)\"\r\n\t\t\t\t\t\tv-model=\"refundForm.refund_car_price\" type=\"number\" class=\"text-right\" placeholder=\"请输入车费\" />\r\n\t\t\t\t\t<view class=\"ml-sm\">元</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between f-paragraph mb-md\" v-if=\"refundForm.discount*1>0\">\r\n\t\t\t\t<view class=\"c-paragraph\">卡券抵扣</view>\r\n\t\t\t\t<view class=\"c-title\">¥{{ refundForm.discount }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between f-paragraph\">\r\n\t\t\t\t<view class=\"c-paragraph\">总计</view>\r\n\t\t\t\t<view class=\"c-warning text-bold\">¥{{refundForm.total_refund_price}}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"space-max-footer\"></view>\r\n\r\n\t\t<view class=\"refund-bottom-info fill-base fix pl-lg pr-lg\">\r\n\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t<view></view>\r\n\t\t\t\t<view class=\"flex-center\">\r\n\t\t\t\t\t<button @tap.stop=\"$util.goUrl({url:1,openType:`navigateBack`})\" class=\"clear-btn order\">取消</button>\r\n\t\t\t\t\t<button @tap.stop=\"toConfirmRefund\" class=\"clear-btn order\"\r\n\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\">确认</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"space-safe\"></view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapActions,\r\n\t\tmapMutations\r\n\t} from \"vuex\"\r\n\texport default {\r\n\t\tcomponents: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisLoad: false,\r\n\t\t\t\toptions: {},\r\n\t\t\t\tstatusType: {\r\n\t\t\t\t\t'-1': '已取消',\r\n\t\t\t\t\t1: '待支付',\r\n\t\t\t\t\t2: '待接单',\r\n\t\t\t\t\t3: '已接单',\r\n\t\t\t\t\t4: '已出发',\r\n\t\t\t\t\t5: '已到达',\r\n\t\t\t\t\t6: '服务中',\r\n\t\t\t\t\t7: '已完成',\r\n\t\t\t\t\t8: '待转单'\r\n\t\t\t\t},\r\n\t\t\t\trefundForm: {},\r\n\t\t\t\tlockTap: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: mapState({\r\n\t\t\tprimaryColor: state => state.config.configInfo.primaryColor,\r\n\t\t\tsubColor: state => state.config.configInfo.subColor,\r\n\t\t\tconfigInfo: state => state.config.configInfo,\r\n\t\t\tuserInfo: state => state.user.userInfo\r\n\t\t}),\r\n\t\tonLoad(options) {\r\n\t\t\tlet {\r\n\t\t\t\tagent = 0,\r\n\t\t\t\t\tdetail = 0\r\n\t\t\t} = options\r\n\t\t\toptions.agent = agent * 1\r\n\t\t\toptions.detail = detail * 1\r\n\t\t\tthis.options = options\r\n\t\t\tthis.initIndex()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions(['getConfigInfo', 'getCoachInfo']),\r\n\t\t\t...mapMutations(['updateTechnicianItem']),\r\n\t\t\tasync initIndex(refresh = false) {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (!refresh && this.$jweixin.isWechat()) {\r\n\t\t\t\t\tawait this.$jweixin.initJssdk();\r\n\t\t\t\t\tthis.$jweixin.wxReady(() => {\r\n\t\t\t\t\t\tthis.$jweixin.hideOptionMenu()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tif (!this.configInfo.id || refresh) {\r\n\t\t\t\t\tawait this.getConfigInfo()\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.setNavigationBarColor({\r\n\t\t\t\t\tbg: this.primaryColor\r\n\t\t\t\t})\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tagent\r\n\t\t\t\t} = this.options\r\n\t\t\t\tlet methodKey = agent ? 'agent' : 'admin'\r\n\t\t\t\tlet item = await this.$api[methodKey].refundOrderInfo({\r\n\t\t\t\t\tid\r\n\t\t\t\t})\r\n\t\t\t\tlet data = this.$util.pick(item, ['id', 'car_price', 'material_price', 'order_goods', 'pay_type'])\r\n\t\t\t\tdata.refund_car_price = data.car_price\r\n\t\t\t\tlet total = 0\r\n\t\t\t\tdata.order_goods.map(aitem => {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tnum,\r\n\t\t\t\t\t\tgoods_price: price,\r\n\t\t\t\t\t\tmaterial_price: mprice\r\n\t\t\t\t\t} = aitem\r\n\t\t\t\t\taitem.refund_price = price\r\n\t\t\t\t\taitem.refund_material_price = mprice\r\n\t\t\t\t\taitem.total_refund_price = (price * num + mprice * num).toFixed(2)\r\n\t\t\t\t\ttotal += aitem.total_refund_price * 1\r\n\t\t\t\t})\r\n\t\t\t\tdata.total_refund_price = total + data.car_price * 1\r\n\t\t\t\tthis.refundForm = data\r\n\t\t\t\tthis.isLoad = true\r\n\t\t\t},\r\n\t\t\tinitRefresh() {\r\n\t\t\t\tthis.initIndex(true)\r\n\t\t\t},\r\n\t\t\tcheckInput(e, index, key) {\r\n\t\t\t\tlet val = this.$util.formatMoney(e.detail.value)\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tif (index == -1) {\r\n\t\t\t\t\t\tthis.refundForm[key] = val\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.refundForm.order_goods[index][key] = val\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//type：3车费\r\n\t\t\thandleCheckOrderItem(type = 0, aindex = 0) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tis_check: all,\r\n\t\t\t\t\tcar_price,\r\n\t\t\t\t\trefund_car_price: cprice,\r\n\t\t\t\t} = this.refundForm\r\n\r\n\t\t\t\tif (type == 3) {\r\n\t\t\t\t\tlet reg = /^(([1-9][0-9]*)|(([0]\\.\\d{1,2}|[1-9][0-9]*\\.\\d{1,2})))$/\r\n\t\t\t\t\tif (!reg.test(cprice)) {\r\n\t\t\t\t\t\tcprice = 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cprice * 1 > car_price) {\r\n\t\t\t\t\t\tcprice = car_price\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.refundForm.refund_car_price = cprice\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (type == 0) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tnum,\r\n\t\t\t\t\t\trefund_price: rtprice,\r\n\t\t\t\t\t\trefund_material_price: rmprice,\r\n\t\t\t\t\t\tgoods_price: tprice,\r\n\t\t\t\t\t\tmaterial_price: mprice,\r\n\t\t\t\t\t} = this.refundForm.order_goods[aindex]\r\n\t\t\t\t\tlet reg = /^(([1-9][0-9]*)|(([0]\\.\\d{1,2}|[1-9][0-9]*\\.\\d{1,2})))$/\r\n\t\t\t\t\tif (!reg.test(rtprice) || rtprice * 1 == 0) {\r\n\t\t\t\t\t\trtprice = 0.01\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (rtprice * 1 > tprice) {\r\n\t\t\t\t\t\trtprice = tprice\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!reg.test(rmprice)) {\r\n\t\t\t\t\t\trmprice = 0\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (rmprice * 1 > mprice) {\r\n\t\t\t\t\t\trmprice = mprice\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet trprice = (rtprice * num + rmprice * num).toFixed(2)\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.refundForm.order_goods[aindex].refund_price = rtprice\r\n\t\t\t\t\t\tthis.refundForm.order_goods[aindex].refund_material_price = rmprice\r\n\t\t\t\t\t\tthis.refundForm.order_goods[aindex].total_refund_price = trprice\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet total = 0\r\n\t\t\t\t\tthis.refundForm.order_goods.map(item => {\r\n\t\t\t\t\t\ttotal += item.total_refund_price * 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\ttotal += cprice * 1\r\n\t\t\t\t\tthis.refundForm.total_refund_price = total.toFixed(2)\r\n\t\t\t\t}, 100)\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @name: 确认退款\r\n\t\t\t */\r\n\t\t\tasync toConfirmRefund() {\r\n\t\t\t\tlet subForm = JSON.parse(JSON.stringify(this.refundForm))\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid: oid,\r\n\t\t\t\t\trefund_car_price: cprice,\r\n\t\t\t\t\ttotal_refund_price: trprice,\r\n\t\t\t\t\torder_goods: list\r\n\t\t\t\t} = subForm\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\torder_id: oid,\r\n\t\t\t\t\tcar_price: cprice,\r\n\t\t\t\t\tprice: trprice,\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\ttext: ''\r\n\t\t\t\t}\r\n\t\t\t\tlist.map(item => {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\trefund_price: rprice,\r\n\t\t\t\t\t\trefund_material_price: mprice\r\n\t\t\t\t\t} = item\r\n\t\t\t\t\tparam.list.push({\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tgoods_price: rprice,\r\n\t\t\t\t\t\tmaterial_price: mprice\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tlet {\r\n\t\t\t\t\tagent,\r\n\t\t\t\t\tdetail\r\n\t\t\t\t} = this.options\r\n\t\t\t\tlet methodKey = agent ? 'agent' : 'admin'\r\n\t\t\t\tif (this.lockTap) return\r\n\t\t\t\tthis.lockTap = true\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait this.$api[methodKey].passRefundV2(param)\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `操作成功`\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.back()\r\n\t\t\t\t\t\tthis.updateTechnicianItem({\r\n\t\t\t\t\t\t\tkey: 'haveOperItem',\r\n\t\t\t\t\t\t\tval: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (detail) {\r\n\t\t\t\t\t\t\tthis.$util.getPage(-2).initRefresh()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\t\t\turl: 1,\r\n\t\t\t\t\t\t\topenType: `navigateBack`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n\t.user-order-refund {\r\n\r\n\r\n\t\t.item-child {\r\n\r\n\t\t\t.icon-xuanze,\r\n\t\t\t.icon-xuanze-fill {\r\n\t\t\t\tfont-size: 38rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.goods-img {\r\n\t\t\t\twidth: 147rpx;\r\n\t\t\t\theight: 147rpx;\r\n\t\t\t\tborder-radius: 26rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.goods-num {\r\n\t\t\t\twidth: 200rpx;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t.textarea-info {\r\n\t\t\t\tbackground: #F7F7F7;\r\n\r\n\t\t\t\t.input-textarea {\r\n\t\t\t\t\twidth: 570rpx;\r\n\t\t\t\t\theight: 300rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t\t.refund-bottom-info {\r\n\t\t\tbottom: 0;\r\n\r\n\t\t\t.iconfont {\r\n\t\t\t\tfont-size: 38rpx;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t.flex-between {\r\n\t\t\t\theight: 122rpx;\r\n\r\n\t\t\t\t.order {\r\n\t\t\t\t\twidth: 189rpx;\r\n\t\t\t\t\theight: 76rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\t\tborder: 1rpx solid #C7C7C7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./refund.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./refund.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1747029156538\n      var cssReload = require(\"C:/Users/admin/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}