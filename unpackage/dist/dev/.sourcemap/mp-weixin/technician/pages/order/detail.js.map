{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/detail.vue?fa14","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/detail.vue?3bc9","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/detail.vue?04fd","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/detail.vue?904d","uni-app:///technician/pages/order/detail.vue","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/detail.vue?d5a8","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/detail.vue?f7fa"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","timeline","data","options","statusPayType","statusType","carType","payType","lineList","base_service","pay_type","title","time","icon","addr","img","base_bell","detail","oper_add_id","check_label","coach_refund_text","lockTap","popupInfo","type","param","imgs","location","lat","lng","address","pageLen","isReset","duration_time","computed","primaryColor","subColor","configInfo","isUserMedia","recorder","recorder_status","recorder_order_id","order_unix_list","useChooseLocation","userCoachStatus","changeOnAddr","noChangeLoca","over_time_text","onLoad","id","key","val","onUnload","methods","initIndex","refresh","bg","time_long","total_time_long","receiving_time","start_service_time","is_add","store_id","add_flow_path","start_service_time_unix","unix_items","unixInd","unix_list","ind","recorderManager","duration","res","initRefresh","countEnd","setTimeout","handlerOnChanger","privacyCheck","format","handlerOnEnd","handlerOnSave","filePath","tempFilePath","formData","link","order_id","toCountDownEnd","unix","toLabel","user_id","url","toChangeAddOrderItem","add_order_id","toRefuse","confirmRefuse","toGetLocation","getUtilLocation","initUtilLocaData","imgUpload","imagelist","e","imgtype","confirmOper","path","toConfirm","oper_add","arr","toConfirmUpdate","msg","plugAuth","service_recording_show","recording","flag","order_info","openType","uni","content","res_del","confirm","recordMsg","showCancel","confirmText","toTel","toMap","address_info","latitude","longitude","name","scale","toCopy","filters","handlePayOrder"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AAC4K;AAC5K,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzGA;AAAA;AAAA;AAAA;AAAgpB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACyYpqB;AAIA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAMA;AAAA,eAEA;EACAC;IACAC;EAKA;EACAC;IACA;MACAC;MACAC;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC;QACA;QACA;MACA;MACAC;QACA;QACA;QACA;MACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;QACAH;QACAC;QACAC;QACAE;QACAD;MACA;QACAH;QACAC;QACAC;QACAG;QACAD;QACAD;MACA;QACAH;QACAC;QACAC;QACAC;MACA;QACAH;QACAC;QACAC;QACAG;QACAD;QACAD;MACA;QACAH;QACAC;QACAC;QACAG;QACAF;MACA;MACAG;QACAN;QACAC;QACAC;QACAC;MACA;QACAH;QACAC;QACAC;QACAC;MACA;QACAH;QACAC;QACAC;QACAG;QACAD;QACAD;MACA;MACAI;QACAP;MACA;MACAQ;MACAC;MACAC;MACAC;MACAC;QACAX;QACAY;QACAC;QACAC;QACAC;UACAC;UACAC;UACAC;QACA;MACA;MACAC;MAEAC;MACAC;IAEA;EACA;EACAC;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;IACAC;MACA;IACA;EACA;EACAC;IACA,kBAEA5C,QADA6C;MAAAA;IAEA7C;IACA;IACA;MACA;QACA8C;QACAC;MACA;IACA;IACA;EACA;EAUAC;IACA;MACAF;MACAC;IACA;EACA;EAEAE,uDACA,0EACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBAAA,IASA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAGAN,KACA,cADAA;gBAAA;gBAAA,OAEA;kBACAA;gBACA;cAAA;gBAFA9C;gBAGA;kBACAqD;gBACA;gBACArD;gBACAA;gBAEAQ,WAOAR,KAPAQ,UACA8C,YAMAtD,KANAuD,wCAMAvD,KALAwD,sHAKAxD,KAJAyD,uHAIAzD,KAHA0D,8EAGA1D,KAFA2D,2FAEA3D,KADA4D;gBAEA;kBACA;oBACA5D;kBACA;kBACA;oBACAA;kBACA;gBACA;gBACA;kBAEAuC,kBACA,MADAA;kBAEA;oBACAsB;oBACA7D;oBACA8D;sBACAhB;sBACAQ;sBACAG;sBACAI;oBACA;oBACAE;sBACA;oBACA;oBACA;sBACAxB;oBACA;sBACAA;oBACA;oBACA;sBACAQ;sBACAC;oBACA;kBACA;oBACAgB;sBACA;oBACA;oBACA;sBACA;wBACAjB;wBACAC;sBACA;oBACA;kBACA;gBACA;gBACA1C;gBACA2D;kBACA;gBACA;gBACA;kBACA3D;oBACAE;oBACAC;oBACAC;oBACAC;kBACA;gBACA;gBACA;gBACA;gBAEAiB;gBACA;gBAAA,MACAwB;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEAc;gBACA;gBACAA;kBACA;gBACA;gBACA;gBACAA;kBACA;kBACA;kBACA,IACAC,WACAC,IADAD;kBAEA;kBACA;kBACA;kBACA;oBACA;kBACA;gBACA;gBACA;gBACAD;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAG;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACA;MACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEAC;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAKA;kBACApD;gBACA;cAAA;gBAGAgB,kBAEA,OAFAA,iBACAP,gBACA,OADAA;gBAEA;kBAKAoC;gBAEA;kBAKAA;oBACAQ;oBACAP;kBACA;gBAEA;gBACA;kBACApB;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA2B;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAQAT;gBAEA;kBACAnB;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA4B;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAR;gBACA;kBACA3D;gBACA;gBACAoE;gBAcAC,eACAV,IADAU;gBAEAD;gBAAA;gBAAA,OAKA;kBACAA;kBACAE;oBACA1D;kBAKA;gBACA;cAAA;gBAAA;gBAVA2D;gBAYAC,WACA,OADA3C;gBAAA;gBAAA,OAEA;kBACA2C;kBACAD;gBACA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IA4BA;IACAE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBAEA7C,kBAGA,OAHAA,iBACAC,oBAEA,OAFAA,mBACAV,UACA,OADAA;gBAAA,gBAMA,eAHAkB,uBACAQ,iFACAG;gBAEA0B,0FACA;gBAAA,MACA7C;kBAAA;kBAAA;gBAAA;gBAAA,MACAV;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAKA;cAAA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACAwD;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEAC,UACA,cADAA;gBAEA;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,gBAIA,eAFAC,iFACA5B;gBAAA,sBAKA4B,qBAFA1C,6BACAtC;gBAAA,MAGAoD;kBAAA;kBAAA;gBAAA;gBACA;kBACA0B;gBACA;gBAAA;cAAA;gBAGA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAG;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA3C;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACA4C;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEA1E,cAEA,QAFAA,qCAEA,QADAE;gBAEAA,6EACA;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACA;kBACAT;gBACA;gBAAA;cAAA;gBAGA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAkF;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,wBAKA,2EAHAlE,2HACAC,2HACAC;gBAAA,MAEAF;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAmE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACA7C;kBACAC;gBACA;gBAAA;gBAAA,OAeA;cAAA;gBAAA;gBAAA,+CAFAvB;gBAAAA;gBAAA,+CACAC;gBAAAA;gBAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAmE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACA9C;kBACAC;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;kBACAvC;gBACA;gBACA;gBAAA;cAAA;gBAGA;gBACA;gBAAA;gBAAA,OAGA;kBACAgB;kBACAC;gBACA;cAAA;gBAAA;gBAJAC;gBAKAH;kBACAC;kBACAC;kBACAC;gBACA;gBACA;gBACA3B;kBACAwB;gBACA;gBACA;kBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAsE;MACA,IACAC,YAEAC,EAFAD;QACAE,UACAD,EADAC;MAEA;IACA;IACA;IACAC;MACA;MACA,IACA7E,OAIAD,UAJAC;QACAC,QAGAF,UAHAE;QACAC,OAEAH,UAFAG;QACAC,WACAJ,UADAI;MAEA,oBAEAA,SADAC;QAAAA;QAAA,gBACAD,SADAE;QAAAA;QAAA,oBACAF,SADAG;QAAAA;MAEA;QACA;UACAlB;QACA;QACA;MACA;MACA;QACA;UACAA;QACA;QACA;MACA;MACA;QACA,IACA0F,OACA5E,QADA4E;QAEA3E;MACA;MACA;IACA;IACA;IACA4E;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAGApB,WACA,eADAnC;gBAEA;kBACAmC;gBACA;gBACA3D;kBACA2D;kBACAoB;kBACAhF;gBACA;gBACA;kBACAC;gBACA;gBAEA;kBACAgF;oBACA;oBACA;oBACA;kBACA;kBACA7F;kBACA;oBACAA;oBACAY;oBACAC;oBACAC;oBACAC;sBACAC;sBACAC;sBACAC;oBACA;kBACA;kBACA;gBAIA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA4E;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA/E;gBACA;kBAEAC,MAIAD,SAJAC,KACAC,MAGAF,SAHAE,KACAC,UAEAH,SAFAG,SACAwE,OACA3E,SADA2E;kBAEA;oBACA7E;oBACAA;oBACAA;kBACA;kBACA;oBACAA;oBACAA;oBACAA;oBACAA;kBACA;kBACA;oBACAA;oBACAA;oBACAA;oBACAA;kBACA;gBACA;gBACAkF;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA;gBAAA,KAEA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBAAA,qBAMA,oBAFAC,wCACAC;gBAGAC,YACAF,SADAE;gBAIAxE,cAIA,QAJAA,aACAG,oBAGA,QAHAA,mBACAD,kBAEA,QAFAA,iBACAT,UACA,QADAA;gBAGAgF;gBAGA3B,WAEA3D,MAFA2D,4BAEA3D,MADA+E;gBAEA;gBAGA3C,SACA,eADAA;gBAGAmD;gBAAA;gBAAA;gBAAA,OAEA;kBACA/D;gBACA;cAAA;gBAFA+D;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAIA;kBACA;gBACA;gBACA;kBACA;gBACA;gBACA;gBACA;gBACA;gBACAtC;kBACA;oBACAe;oBACAwB;kBACA;gBACA;gBAAA;cAAA;gBAAA,cAMAD,YADArG;gBAAA,MAGAA;kBAAA;kBAAA;gBAAA;gBAAA,MACAoB;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAKA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAEA;cAAA;gBAGA8B;gBAAA,MAEA,6EACArB;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAGA0E;kBACAtG;kBACAuG;gBACA;cAAA;gBAAA;gBAAA;gBALAC;gBACAC;gBAAA,KAKAA;kBAAA;kBAAA;gBAAA;gBAAA,MACAtF;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAKA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAGAgF;cAAA;gBAIA;gBAAA,IAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA;cAAA;gBAAA;gBAKA;kBACA;gBACA;gBACA;kBACA;gBACA;gBACA;kBACA;oBACA7D;oBACAC;kBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA,MACA3B;kBAAA;kBAAA;gBAAA;gBAAA,IACAqC;kBAAA;kBAAA;gBAAA;gBACA;kBACAX;gBACA;gBAAA,MACAZ;kBAAA;kBAAA;gBAAA;gBACAgF;gBACA;gBAAA;gBAAA,OACAJ;kBACAtG;kBACAuG;kBACAI;kBACAC;gBACA;cAAA;gBACA;kBACAtE;kBACAC;gBACA;gBAAA,MACApB;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAIA;kBACA;gBACA;gBACA;kBACA;gBACA;cAAA;gBAAA,MAEAP;kBAAA;kBAAA;gBAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA,MACAO;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAKA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAGA;cAAA;gBAEA;gBACA;kBACAnB;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA8D;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;kBACA;kBACA;kBACA;kBACA;kBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACA+C;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,iBAIA,gBAFArC,8BACAzE;gBAAA,KAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;kBACAyE;gBACA;cAAA;gBAFAK;gBAAA,IAGAA;kBAAA;kBAAA;gBAAA;gBACA;kBACA7E;gBACA;gBAAA;cAAA;gBAGA;kBACA6E;kBACAwB;gBACA;gBAAA;gBAAA;cAAA;gBAEAN;gBACA;kBACA/F;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACA8G;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEA9C;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAAA,qBASA,qBAJA9C,iFACA6F,4FACA/F,8BACAC;gBAAA;gBAAA,OAEA;kBACAL;gBACA;cAAA;gBAAA;gBAAA,OACA0F;kBACA1F;gBACA;cAAA;gBAAA;gBAAA,OACA0F;kBACAU;kBACAC;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAEA;MACA;QACA;QACA;MACA;MAEA;QACAvC;QACAwB;MACA;IACA;EAAA,EACA;EACAgB;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACt0CA;AAAA;AAAA;AAAA;AAA+tC,CAAgB,+lCAAG,EAAC,C;;;;;;;;;;;ACAnvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"technician/pages/order/detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './technician/pages/order/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=19c3ae8a&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"technician/pages/order/detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=19c3ae8a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.detail.id\n    ? _vm.__map(_vm.detail.order_goods, function (aitem, aindex) {\n        var $orig = _vm.__get_orig(aitem)\n        var g0 = _vm.detail.order_goods.length\n        return {\n          $orig: $orig,\n          g0: g0,\n        }\n      })\n    : null\n  var g1 = _vm.detail.id\n    ? _vm.detail.add_order_id && _vm.detail.add_order_id.length > 0\n    : null\n  var l1 =\n    _vm.detail.id && g1\n      ? _vm.__map(_vm.detail.add_order_id, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g2 = item.order_goods.length\n          return {\n            $orig: $orig,\n            g2: g2,\n          }\n        })\n      : null\n  var f0 =\n    _vm.detail.id && _vm.detail.pay_order_times\n      ? _vm._f(\"handlePayOrder\")(_vm.detail.pay_order_times)\n      : null\n  var g3 = _vm.detail.id\n    ? _vm.detail.add_order_id && _vm.detail.add_order_id.length > 0\n    : null\n  var g4 = _vm.detail.id\n    ? _vm.statusPayType.includes(_vm.detail.pay_type) ||\n      (_vm.detail.pay_type == 7 && !_vm.detail.is_add && !_vm.detail.label_time)\n    : null\n  var g5 = _vm.detail.id && g4 ? [3, 4, 5].includes(_vm.detail.pay_type) : null\n  var g6 = _vm.detail.id ? _vm.coach_refund_text.length : null\n  var g7 = _vm.detail.id && !(g6 > 200) ? _vm.coach_refund_text.length : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$util.goUrl({\n        url: \"/technician/pages/order/abnormal?id=\" + _vm.detail.abn_order_id,\n      })\n    }\n    _vm.e1 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      $event.stopPropagation()\n      return _vm.$util.goUrl({\n        url: \"/technician/pages/order/detail?id=\" + item.id,\n      })\n    }\n    _vm.e2 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$util.goUrl({\n        url: _vm.detail.store_info.phone,\n        openType: \"call\",\n      })\n    }\n    _vm.e3 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$util.goUrl({\n        url:\n          \"/technician/pages/order/label?id=\" +\n          _vm.detail.id +\n          \"&uid=\" +\n          _vm.detail.user_id,\n      })\n    }\n    _vm.e4 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$refs.refuse_item.close()\n    }\n    _vm.e5 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$refs.oper_item.close()\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g1: g1,\n        l1: l1,\n        f0: f0,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"order-pages\" v-if=\"detail.id\">\r\n\r\n\t\t<view class=\"item-child  pd-lg fill-base f-paragraph c-base\" :style=\"{background:primaryColor}\">\r\n\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t<view class=\"text-bold\">{{statusType[detail.pay_type]}}</view>\r\n\t\t\t\t<view @tap.stop=\"$util.goUrl({url:`/technician/pages/order/abnormal?id=${detail.abn_order_id}`})\"\r\n\t\t\t\t\tclass=\"flex-y-center f-paragraph c-base\" v-if=\"detail.abn_order_id\">此单被平台标记为异常\r\n\t\t\t\t\t<view class=\"view-btn flex-center fill-base f-desc c-warning ml-md\">查看</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"space-lg\"></view>\r\n\t\t</view>\r\n\r\n\t\t<!-- // pay_type 1待支付，2待服务，3技-师接单，4技-师出发，5技-师到达，6服务中，7已完成，8待评价 -->\r\n\t\t<view\r\n\t\t\tclass=\"menu-list flex-warp rel ml-lg mr-lg pt-lg pb-lg pl-md pr-md fill-base f-paragraph c-caption radius-16\"\r\n\t\t\t:class=\"[{'add-bell':detail.is_add || detail.store_id}]\">\r\n\t\t\t<view class=\"menu-line abs b-1px-b\"></view>\r\n\t\t\t<block v-for=\"(item,index) in lineList\" :key=\"index\">\r\n\t\t\t\t<view class=\"item-child flex-center flex-column f-icontext c-paragraph\"\r\n\t\t\t\t\t:style=\"{color:detail.pay_type > item.pay_type -1?primaryColor:''}\" v-if=\"item.icon\">\r\n\t\t\t\t\t<view class=\"item-img fill-base flex-center mb-sm radius\"\r\n\t\t\t\t\t\t:style=\"{borderColor:detail.pay_type > item.pay_type -1?primaryColor:''}\">\r\n\t\t\t\t\t\t<i class=\"iconfont\" :class=\"item.icon\"></i>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"ellipsis\" style=\"max-width:100%\">{{item.title}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"item-child mt-md ml-lg mr-lg pd-lg fill-base radius-16\"\r\n\t\t\tv-if=\"detail.pay_type == 6 && !detail.is_add && detail.start_service_time_unix\">\r\n\t\t\t<view class=\"flex-y-center\">\r\n\t\t\t\t服务还有<min-countdown :type=\"2\" color=\"#F1381F\" bgColor=\"#F1381F\"\r\n\t\t\t\t\t:targetTime=\"detail.start_service_time_unix*1000\" @callback=\"countEnd\"></min-countdown>\r\n\t\t\t\t<view class=\"ml-sm\">结束</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"item-child mt-md ml-lg mr-lg pd-lg fill-base radius-16\">\r\n\t\t\t<view class=\"pb-lg f-paragraph c-title text-bold\">服务内容</view>\r\n\t\t\t<view class=\"flex-warp\" :class=\"[{'mb-lg':aindex != detail.order_goods.length -1}]\"\r\n\t\t\t\tv-for=\"(aitem,aindex) in detail.order_goods\" :key=\"aindex\">\r\n\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t<view class=\"avatar lg radius-16\">\r\n\t\t\t\t\t<view class=\"h5-image avatar lg radius-16\"\r\n\t\t\t\t\t\t:style=\"{ backgroundImage : `url('${aitem.goods_cover}')`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t\t<image mode=\"aspectFill\" class=\"avatar lg radius-16\" :src=\"aitem.goods_cover\"></image>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<view class=\"flex-1 ml-md\">\r\n\t\t\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t\t\t<view class=\"f-mini-title c-title text-bold max-380 ellipsis\">\r\n\t\t\t\t\t\t\t{{aitem.goods_name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view style=\"color: #4D4D4D;\">x{{aitem.num}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex-warp f-desc\"\r\n\t\t\t\t\t\t:style=\"{margin:aitem.init_material_price*1>0?'5rpx 0':'16rpx 0 20rpx 0'}\">\r\n\t\t\t\t\t\t<view class=\"flex-1\" style=\"color: #777\">服务时长：{{aitem.time_long}}分钟</view>\r\n\t\t\t\t\t\t<view class=\"c-warning\" v-if=\"aitem.refund_num>0\">已退x{{aitem.refund_num}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"f-desc\" style=\"color: #777\" v-if=\"aitem.init_material_price*1>0\">\r\n\t\t\t\t\t\t物料费：¥{{aitem.init_material_price}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"f-paragraph c-warning text-bold\">¥{{aitem.price}} </view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"item-child mt-md ml-lg mr-lg pd-lg fill-base radius-16\"\r\n\t\t\tv-if=\"detail.add_order_id && detail.add_order_id.length > 0\">\r\n\t\t\t<view class=\"pb-lg f-paragraph c-title text-bold\">加钟项目</view>\r\n\t\t\t<block v-for=\"(item,index) in detail.add_order_id\" :key=\"index\">\r\n\t\t\t\t<view class=\"flex-y-center pb-lg f-desc\" :class=\"[{'mt-lg pt-lg b-1px-t':index!==0}]\"\r\n\t\t\t\t\tstyle=\"color: #555;\">\r\n\t\t\t\t\t<view>订单编号：</view>\r\n\t\t\t\t\t<view class=\"flex-between flex-1 \">\r\n\t\t\t\t\t\t<view class=\"max-350 ellipsis\">{{item.order_code}}</view>\r\n\t\t\t\t\t\t<view class=\"copy-btn flex-center radius-5 f-icontext\" @tap.stop=\"toCopy(item.order_code)\"\r\n\t\t\t\t\t\t\t:style=\"{borderColor:primaryColor ,color:primaryColor}\">复制</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view @tap.stop=\"$util.goUrl({url:`/technician/pages/order/detail?id=${item.id}`})\" class=\"flex-warp\"\r\n\t\t\t\t\t:class=\"[{'mb-lg':aindex != item.order_goods.length -1}]\" v-for=\"(aitem,aindex) in item.order_goods\"\r\n\t\t\t\t\t:key=\"aindex\">\r\n\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t<view class=\"avatar lg radius-16\">\r\n\t\t\t\t\t\t<view class=\"h5-image avatar lg radius-16\"\r\n\t\t\t\t\t\t\t:style=\"{ backgroundImage : `url('${aitem.goods_cover}')`}\">\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t\t\t<image mode=\"aspectFill\" class=\"avatar lg radius-16\" :src=\"aitem.goods_cover\"></image>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<view class=\"flex-1 ml-md\">\r\n\t\t\t\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t\t\t\t<view class=\"f-mini-title c-title text-bold max-380 ellipsis\">\r\n\t\t\t\t\t\t\t\t{{aitem.goods_name}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view style=\"color: #4D4D4D;\">x{{aitem.num}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex-warp f-desc\"\r\n\t\t\t\t\t\t\t:style=\"{margin:aitem.init_material_price*1>0?'5rpx 0':'16rpx 0 20rpx 0'}\">\r\n\t\t\t\t\t\t\t<view class=\"flex-1\" style=\"color: #777\">服务时长：{{aitem.time_long}}分钟</view>\r\n\t\t\t\t\t\t\t<view class=\"c-warning\" v-if=\"aitem.refund_num>0\">已退x{{aitem.refund_num}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"f-desc\" style=\"color: #777\" v-if=\"aitem.init_material_price*1>0\">\r\n\t\t\t\t\t\t\t物料费：¥{{aitem.init_material_price}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"f-paragraph c-warning text-bold\">¥{{aitem.price}} </view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-between pt-lg\">\r\n\t\t\t\t\t<view :style=\"{color: item.pay_type < 3 ? '#F99346' : item.pay_type < 7 ? primaryColor: '#999'}\">\r\n\t\t\t\t\t\t{{statusType[item.pay_type]}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<button @tap.stop=\"toRefuse(item.id)\" class=\"clear-btn order\"\r\n\t\t\t\t\t\t\tv-if=\"item.pay_type == 2\">拒绝接单</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toChangeAddOrderItem(index)\" class=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\">\r\n\t\t\t\t\t\t\t<block v-if=\"detail.add_flow_path === 1\">\r\n\t\t\t\t\t\t\t\t{{item.pay_type == 2?'确认接单':item.pay_type == 3? '开始服务': item.pay_type == 6 ? '拍照完成服务' : '查看详情'}}\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t<block v-else>{{item.pay_type == 2?'确认接单':'查看详情'}}</block>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"store-info mt-md ml-lg mr-lg pd-lg  fill-base radius-16\" v-if=\"detail.store_id\">\r\n\t\t\t<view class=\"f-mini-title c-title text-bold pb-md\">\r\n\t\t\t\t{{detail.store_info.title}}\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t<view class=\"flex-y-center\" style=\"color: #303030;\">\r\n\t\t\t\t\t<i class=\"iconfont icondizhi1 mr-sm\"></i>\r\n\t\t\t\t\t<view class=\"c-title flex-1 mr-md\">\r\n\t\t\t\t\t\t<span>{{detail.store_info.address || `暂未设置门店地址`}}</span>\r\n\t\t\t\t\t\t<span @tap.stop=\"toCopy(detail.store_info.address)\"\r\n\t\t\t\t\t\t\tclass=\"copy-btn span f-icontext ml-sm radius-5\"\r\n\t\t\t\t\t\t\t:style=\"{color:primaryColor,borderColor:primaryColor}\"\r\n\t\t\t\t\t\t\tv-if=\"detail.store_info.address\">复制</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-center\">\r\n\t\t\t\t\t<view @tap.stop=\"$util.goUrl({url:detail.store_info.phone,openType:'call'})\"\r\n\t\t\t\t\t\tclass=\"item-icon rel flex-center radius-16\">\r\n\t\t\t\t\t\t<view class=\"item-icon radius-16 abs\" :style=\"{background:primaryColor}\"></view>\r\n\t\t\t\t\t\t<i class=\"iconfont icondadianhua_1\" :style=\"{color:primaryColor}\"></i>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view @tap.stop=\"toMap('store_info')\" class=\"item-icon rel flex-center radius-16 ml-md\"\r\n\t\t\t\t\t\tv-if=\"detail.store_info.address\">\r\n\t\t\t\t\t\t<view class=\"item-icon radius-16 abs\" :style=\"{background:primaryColor}\"></view>\r\n\t\t\t\t\t\t<i class=\"iconfont icondizhi_1\" :style=\"{color:primaryColor}\"></i>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<view class=\"mt-md ml-lg mr-lg pd-lg fill-base f-paragraph c-caption radius-16\">\r\n\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t<view>下单人</view>\r\n\t\t\t\t<view class=\"flex-y-center\">\r\n\t\t\t\t\t<view class=\"c-title ellipsis\"\r\n\t\t\t\t\t\t:class=\"[{'max-350':!detail.pay_order_times},{'max-150':detail.pay_order_times}]\">\r\n\t\t\t\t\t\t{{detail.address_info.user_name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"c-warning\" v-if=\"detail.pay_order_times\">{{detail.pay_order_times | handlePayOrder}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view @tap.stop=\"toLabel\" :class=\"[{'ml-sm':!detail.pay_order_times}]\" :style=\"{color:primaryColor}\"\r\n\t\t\t\t\t\tv-if=\"configInfo.coach_show_lable\">查看标签\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view @tap=\"toTel\" class=\"flex-between mt-md\">\r\n\t\t\t\t<view>联系方式</view>\r\n\t\t\t\t<view class=\"flex-y-center\" :style=\"{color:primaryColor}\">\r\n\t\t\t\t\t<i class=\"iconfont iconbodadianhua mr-sm\"></i>\r\n\t\t\t\t\t<view>拨打电话</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"mt-md\" v-if=\"!detail.store_id\">\r\n\t\t\t\t<view>服务地址</view>\r\n\t\t\t\t<view class=\"flex-center\">\r\n\t\t\t\t\t<view class=\"c-title mt-sm flex-1 mr-md\">\r\n\t\t\t\t\t\t<span>{{`${detail.address_info.address}${detail.address_info.address_info}`}}</span>\r\n\t\t\t\t\t\t<span @tap=\"toCopy(`${detail.address_info.address}${detail.address_info.address_info}`)\"\r\n\t\t\t\t\t\t\tclass=\"copy-btn fill radius-5 f-icontext ml-sm\">复制</span>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view @tap=\"toMap('address_info')\" class=\"flex-center flex-column f-icontext\"\r\n\t\t\t\t\t\t:style=\"{color:primaryColor}\">\r\n\t\t\t\t\t\t<i class=\"iconfont icon-dingwei\" style=\"font-size: 42rpx;\"></i>\r\n\t\t\t\t\t\t<view>立刻导航去</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"mt-md\" v-if=\"detail.text\">\r\n\t\t\t\t<view>订单备注</view>\r\n\t\t\t\t<view class=\"c-title mt-sm\">\r\n\t\t\t\t\t<text decode=\"emsp\" style=\"word-break:break-all;\">{{detail.text}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"mt-md ml-lg mr-lg pd-lg fill-base f-paragraph c-caption radius-16\">\r\n\t\t\t<view class=\"flex-between mt-md\">\r\n\t\t\t\t<view>下单时间</view>\r\n\t\t\t\t<view class=\"c-title\">{{detail.create_time}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between mt-md\">\r\n\t\t\t\t<view>服务时间</view>\r\n\t\t\t\t<view class=\"c-title\">{{detail.start_time}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between mt-md\">\r\n\t\t\t\t<view>服务时长</view>\r\n\t\t\t\t<view class=\"c-title\">{{detail.time_long}}分钟</view>\r\n\t\t\t</view>\r\n\t\t\t<block v-if=\"!detail.is_add && !detail.store_id\">\r\n\t\t\t\t<view class=\"flex-between mt-md\">\r\n\t\t\t\t\t<view>车费详情</view>\r\n\t\t\t\t\t<view class=\"flex-y-center c-title\">{{carType[detail.car_type]}}\r\n\t\t\t\t\t\t<view class=\"ml-md\" v-if=\"detail.car_type == 1\">全程{{detail.distance}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-between mt-md\" v-if=\"detail.car_type == 1\">\r\n\t\t\t\t\t<view>出行费用</view>\r\n\t\t\t\t\t<view class=\"c-warning flex-warp\">\r\n\t\t\t\t\t\t¥{{detail.car_price}}\r\n\t\t\t\t\t\t<view class=\"ml-md\" v-if=\"detail.free_fare\">\r\n\t\t\t\t\t\t\t{{detail.free_fare==1?'平台补贴':'自己补贴'}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t\t<view class=\"flex-between mt-md\">\r\n\t\t\t\t<view>服务项目费用</view>\r\n\t\t\t\t<view class=\"c-warning\">¥{{detail.init_service_price}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between mt-md\" v-if=\"detail.init_material_price*1>0\">\r\n\t\t\t\t<view>物料费</view>\r\n\t\t\t\t<view class=\"c-warning\">¥{{detail.init_material_price}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between mt-md\" v-if=\"detail.add_order_id && detail.add_order_id.length > 0\">\r\n\t\t\t\t<view>加钟合计费用</view>\r\n\t\t\t\t<view class=\"c-warning\">¥{{detail.total_add_price}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between mt-md\" v-if=\"detail.discount*1 > 0\">\r\n\t\t\t\t<view>卡券优惠</view>\r\n\t\t\t\t<view class=\"c-warning\">-¥{{detail.discount}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between mt-md\">\r\n\t\t\t\t<view>支付方式</view>\r\n\t\t\t\t<view class=\"c-title\">{{payType[detail.pay_model]}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between mt-md pt-md b-1px-t\">\r\n\t\t\t\t<view></view>\r\n\t\t\t\t<view class=\"flex-y-baseline c-title\">总计：<view class=\"c-warning text-bold\">¥{{detail.total_price}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"mt-md ml-lg mr-lg pd-lg fill-base f-paragraph c-caption radius-16\">\r\n\t\t\t<view class=\" flex-y-center pb-lg flex-warp\">\r\n\t\t\t\t<view class=\"flex-between c-title\">订单编号：</view>\r\n\t\t\t\t<view class=\"flex-between flex-1 \">\r\n\t\t\t\t\t<view class=\"c-title max-350 ellipsis\">{{detail.order_code}}</view>\r\n\t\t\t\t\t<view class=\"copy-btn flex-center text-center f-icontext radius-5\"\r\n\t\t\t\t\t\t@tap.stop=\"toCopy(detail.order_code)\" :style=\"{borderColor:primaryColor ,color:primaryColor}\">复制\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<timeline :list=\"lineList\" :info=\"detail\"></timeline>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"space-max-footer\"></view>\r\n\t\t<view class=\"footer-info fix fill-base\"\r\n\t\t\tv-if=\"statusPayType.includes(detail.pay_type) || (detail.pay_type == 7 && !detail.is_add && !detail.label_time)\">\r\n\t\t\t<view class=\"flex-between pd-lg\">\r\n\t\t\t\t<view></view>\r\n\t\t\t\t<view class=\"flex-center f-desc c-title\">\r\n\t\t\t\t\t<!-- // pay_type 2待接单，5待服务，6服务中，7已完成 -->\r\n\t\t\t\t\t<!-- 待接单 -->\r\n\t\t\t\t\t<block v-if=\"detail.pay_type == 2\">\r\n\t\t\t\t\t\t<button @tap.stop=\"toTel\" class=\"clear-btn order\">联系客户</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toRefuse(0)\" class=\"clear-btn order\">拒绝接单</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toConfirm(detail.is_add && detail.add_flow_path == 2?6:3)\"\r\n\t\t\t\t\t\t\tclass=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\">确认接单</button>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 待服务 -->\r\n\t\t\t\t\t<block v-if=\"[3,4,5].includes(detail.pay_type)\">\r\n\t\t\t\t\t\t<button @tap.stop=\"toTel\" class=\"clear-btn order\">联系客户</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toConfirm(detail.is_add || detail.store_id  ? 6 : detail.pay_type*1+1 )\"\r\n\t\t\t\t\t\t\tclass=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\"\r\n\t\t\t\t\t\t\tv-if=\"(detail.is_add && detail.add_flow_path == 1) || !detail.is_add\">{{detail.is_add || detail.store_id ? '开始服务' : detail.pay_type == 3 ? '确认出发': detail.pay_type == 4 ?'拍照确认到达' : '开始服务'}}</button>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 服务中 -->\r\n\t\t\t\t\t<block v-if=\"detail.pay_type == 6\">\r\n\t\t\t\t\t\t<button @tap.stop=\"toTel\" class=\"clear-btn order\">联系客户</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toConfirm(7)\" class=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\"\r\n\t\t\t\t\t\t\tv-if=\"(detail.is_add && detail.add_flow_path == 1) || !detail.is_add\">拍照完成服务</button>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 已完成 -->\r\n\t\t\t\t\t<block v-if=\"detail.pay_type == 7\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t@tap.stop=\"$util.goUrl({url:`/technician/pages/order/label?id=${detail.id}&uid=${detail.user_id}`})\"\r\n\t\t\t\t\t\t\tclass=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\">评价客户</button>\r\n\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"space-safe\"></view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<uni-popup ref=\"refuse_item\" type=\"center\" :custom=\"true\">\r\n\t\t\t<view class=\"common-popup-content fill-base pd-lg radius-34\">\r\n\t\t\t\t<view class=\"title\">拒绝接单</view>\r\n\t\t\t\t<view class=\"desc\">请确认是否拒接接单</view>\r\n\t\t\t\t<textarea v-model=\"coach_refund_text\" class=\"pd-lg textarea f-desc c-title mt-lg radius-20\"\r\n\t\t\t\t\tmaxlength=\"200\" placeholder=\"请输入拒单原因\" placeholder-class=\"f-desc c-caption\"></textarea>\r\n\t\t\t\t<view class=\"flex-center mt-md\" style=\"width: 540rpx\">\r\n\t\t\t\t\t<view class=\"flex-1\"></view>\r\n\t\t\t\t\t<view>{{coach_refund_text.length>200?200:coach_refund_text.length}}/200</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"button\">\r\n\t\t\t\t\t<view @tap.stop=\"$refs.refuse_item.close()\" class=\"item-child\">取消</view>\r\n\t\t\t\t\t<view @tap.stop=\"confirmRefuse\" class=\"item-child c-base\"\r\n\t\t\t\t\t\t:style=\"{background: primaryColor,color:'#fff'}\">确定</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\r\n\r\n\t\t<uni-popup ref=\"oper_item\" type=\"center\" :custom=\"true\">\r\n\t\t\t<view class=\"common-popup-content fill-base pd-lg radius-34\">\r\n\t\t\t\t<view class=\"title\">{{popupInfo.title}}</view>\r\n\t\t\t\t<view class=\"space-md\"></view>\r\n\t\t\t\t<view class=\"flex-warp mt-md\" style=\"width: 100%;\" v-if=\"popupInfo.type !== 4\">\r\n\t\t\t\t\t<view>拍照打卡：</view>\r\n\t\t\t\t\t<view class=\"flex-1\">\r\n\t\t\t\t\t\t<upload @upload=\"imgUpload\" @del=\"imgUpload\" :imagelist=\"popupInfo.imgs\" filetype=\"picture\"\r\n\t\t\t\t\t\t\timgtype=\"imgs\" text=\"拍摄图片\" :imgsize=\"1\" :sourceType=\"2\">\r\n\t\t\t\t\t\t</upload>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-warp mt-md\" style=\"width: 100%;\">\r\n\t\t\t\t\t<view>当前地点：</view>\r\n\t\t\t\t\t<view @tap.stop=\"toGetLocation\" class=\"flex-1\"\r\n\t\t\t\t\t\t:class=\"[{'c-title':popupInfo.location.address},{'c-caption':!popupInfo.location.address}]\">\r\n\t\t\t\t\t\t{{popupInfo.location.address || '点击获取位置信息'}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"button\">\r\n\t\t\t\t\t<view @tap.stop=\"$refs.oper_item.close()\" class=\"item-child\">取消</view>\r\n\t\t\t\t\t<view @tap.stop=\"confirmOper\" class=\"item-child c-base\"\r\n\t\t\t\t\t\t:style=\"{background: primaryColor,color:'#fff'}\">确定</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\r\n\t\t<!-- #ifdef H5 -->\r\n\t\t<block v-if=\"configInfo.plugAuth.recording && configInfo.service_recording_show && pageLen == 1\">\r\n\t\t\t<media-recorder ref=\"recorder\" @success='handlerSuccess' @save=\"handlerOnSave\"\r\n\t\t\t\t@error='handlerError'></media-recorder>\r\n\t\t</block>\r\n\t\t<!-- #endif -->\r\n\r\n\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<user-privacy ref=\"user_privacy\" :show=\"false\"></user-privacy>\r\n\t\t<!-- #endif -->\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapActions,\r\n\t\tmapMutations\r\n\t} from \"vuex\"\r\n\timport timeline from '@/components/timeline.vue'\r\n\t// #ifdef H5\r\n\timport MediaRecorder from '@/components/media-recorder.vue'\r\n\t// #endif\r\n\t// #ifndef H5\r\n\tvar recorderManager = null;\r\n\t// #endif\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\ttimeline\r\n\t\t\t// #ifdef H5\r\n\t\t\t,\r\n\t\t\tMediaRecorder\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toptions: {},\r\n\t\t\t\tstatusPayType: [2, 3, 4, 5, 6],\r\n\t\t\t\tstatusType: {\r\n\t\t\t\t\t'-1': '已取消',\r\n\t\t\t\t\t2: '待接单',\r\n\t\t\t\t\t3: '已接单',\r\n\t\t\t\t\t4: '已出发',\r\n\t\t\t\t\t5: '已到达',\r\n\t\t\t\t\t6: '服务中',\r\n\t\t\t\t\t7: '已完成',\r\n\t\t\t\t\t8: '待转单'\r\n\t\t\t\t},\r\n\t\t\t\tcarType: {\r\n\t\t\t\t\t0: '公交/地铁',\r\n\t\t\t\t\t1: '出租车'\r\n\t\t\t\t},\r\n\t\t\t\tpayType: {\r\n\t\t\t\t\t1: '微信支付',\r\n\t\t\t\t\t2: '余额支付',\r\n\t\t\t\t\t3: '支付宝支付'\r\n\t\t\t\t},\r\n\t\t\t\tlineList: [],\r\n\t\t\t\tbase_service: [{\r\n\t\t\t\t\tpay_type: 3,\r\n\t\t\t\t\ttitle: this.$t('action.attendantName') + '接单',\r\n\t\t\t\t\ttime: 'receiving_time',\r\n\t\t\t\t\ticon: 'iconjishijiedan'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpay_type: 4,\r\n\t\t\t\t\ttitle: this.$t('action.attendantName') + '出发',\r\n\t\t\t\t\ttime: 'serout_time',\r\n\t\t\t\t\taddr: 'serout_address',\r\n\t\t\t\t\ticon: 'iconjishichufa'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpay_type: 5,\r\n\t\t\t\t\ttitle: this.$t('action.attendantName') + '到达',\r\n\t\t\t\t\ttime: 'arrive_time',\r\n\t\t\t\t\timg: 'arrive_img',\r\n\t\t\t\t\taddr: 'arr_address',\r\n\t\t\t\t\ticon: 'iconjishidaoda'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpay_type: 6,\r\n\t\t\t\t\ttitle: '开始服务',\r\n\t\t\t\t\ttime: 'start_service_time',\r\n\t\t\t\t\ticon: 'iconjishifuwu'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpay_type: 7,\r\n\t\t\t\t\ttitle: '服务完成',\r\n\t\t\t\t\ttime: 'order_end_time',\r\n\t\t\t\t\timg: 'end_img',\r\n\t\t\t\t\taddr: 'end_address',\r\n\t\t\t\t\ticon: 'iconjishiwancheng'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpay_type: 7,\r\n\t\t\t\t\ttitle: '签字确认',\r\n\t\t\t\t\ttime: 'sign_time',\r\n\t\t\t\t\timg: 'sign_img',\r\n\t\t\t\t\ticon: ''\r\n\t\t\t\t}],\r\n\t\t\t\tbase_bell: [{\r\n\t\t\t\t\tpay_type: 3,\r\n\t\t\t\t\ttitle: this.$t('action.attendantName') + '接单',\r\n\t\t\t\t\ttime: 'receiving_time',\r\n\t\t\t\t\ticon: 'iconjishijiedan'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpay_type: 6,\r\n\t\t\t\t\ttitle: '开始服务',\r\n\t\t\t\t\ttime: 'start_service_time',\r\n\t\t\t\t\ticon: 'iconjishifuwu'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpay_type: 7,\r\n\t\t\t\t\ttitle: '服务完成',\r\n\t\t\t\t\ttime: 'order_end_time',\r\n\t\t\t\t\timg: 'end_img',\r\n\t\t\t\t\taddr: 'end_address',\r\n\t\t\t\t\ticon: 'iconjishiwancheng'\r\n\t\t\t\t}],\r\n\t\t\t\tdetail: {\r\n\t\t\t\t\tpay_type: 0\r\n\t\t\t\t},\r\n\t\t\t\toper_add_id: 0,\r\n\t\t\t\tcheck_label: [],\r\n\t\t\t\tcoach_refund_text: '',\r\n\t\t\t\tlockTap: false,\r\n\t\t\t\tpopupInfo: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t\tparam: {},\r\n\t\t\t\t\timgs: [],\r\n\t\t\t\t\tlocation: {\r\n\t\t\t\t\t\tlat: 0,\r\n\t\t\t\t\t\tlng: 0,\r\n\t\t\t\t\t\taddress: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tpageLen: 1,\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tisReset: false,\r\n\t\t\t\tduration_time: 600,\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: mapState({\r\n\t\t\tprimaryColor: state => state.config.configInfo.primaryColor,\r\n\t\t\tsubColor: state => state.config.configInfo.subColor,\r\n\t\t\tconfigInfo: state => state.config.configInfo,\r\n\t\t\tisUserMedia: state => state.order.isUserMedia,\r\n\t\t\trecorder: state => state.order.recorder,\r\n\t\t\trecorder_status: state => state.order.recorder_status,\r\n\t\t\trecorder_order_id: state => state.order.recorder_order_id,\r\n\t\t\torder_unix_list: state => state.order.order_unix_list,\r\n\t\t\tuseChooseLocation: state => state.user.useChooseLocation,\r\n\t\t\tuserCoachStatus: state => state.user.userCoachStatus,\r\n\t\t\tchangeOnAddr: state => state.user.changeOnAddr,\r\n\t\t\tnoChangeLoca: state => state.user.noChangeLoca,\r\n\t\t\tover_time_text() {\r\n\t\t\t\treturn new Date().getTime() + this.detail.over_time * 1000\r\n\t\t\t}\r\n\t\t}),\r\n\t\tonLoad(options) {\r\n\t\t\tlet {\r\n\t\t\t\tid = 0\r\n\t\t\t} = options\r\n\t\t\toptions.id = id * 1\r\n\t\t\tthis.options = options\r\n\t\t\tif (this.useChooseLocation) {\r\n\t\t\t\tthis.updateUserItem({\r\n\t\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\t\tval: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.initIndex()\r\n\t\t},\r\n\t\t// #ifdef H5 \r\n\t\tdestroyed() {\r\n\t\t\tthis.updateUserItem({\r\n\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\tval: false\r\n\t\t\t})\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifndef H5\r\n\t\tonUnload() {\r\n\t\t\tthis.updateUserItem({\r\n\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\tval: false\r\n\t\t\t})\r\n\t\t},\r\n\t\t// #endif  \r\n\t\tmethods: {\r\n\t\t\t...mapActions(['getConfigInfo', 'getCoachInfo', 'toPlayAudio']),\r\n\t\t\t...mapMutations(['updateUserItem', 'updateOrderItem']),\r\n\t\t\tasync initIndex(refresh = false) {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (!refresh && this.$jweixin.isWechat()) {\r\n\t\t\t\t\tawait this.$jweixin.initJssdk();\r\n\t\t\t\t\tthis.$jweixin.wxReady(() => {\r\n\t\t\t\t\t\tthis.$jweixin.hideOptionMenu()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tif (!this.configInfo.id) {\r\n\t\t\t\t\tawait this.getConfigInfo()\r\n\t\t\t\t}\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid\r\n\t\t\t\t} = this.options\r\n\t\t\t\tlet data = await this.$api.technician.orderInfo({\r\n\t\t\t\t\tid\r\n\t\t\t\t})\r\n\t\t\t\tthis.$util.setNavigationBarColor({\r\n\t\t\t\t\tbg: this.primaryColor\r\n\t\t\t\t})\r\n\t\t\t\tdata.is_balance = data.balance * 1 > 0 ? 1 : 0\r\n\t\t\t\tdata.start_service_time_unix = ''\r\n\t\t\t\tlet {\r\n\t\t\t\t\tpay_type,\r\n\t\t\t\t\ttotal_time_long: time_long,\r\n\t\t\t\t\treceiving_time = '',\r\n\t\t\t\t\tstart_service_time = '',\r\n\t\t\t\t\tis_add = 0,\r\n\t\t\t\t\tstore_id = 0,\r\n\t\t\t\t\tadd_flow_path = 1,\r\n\t\t\t\t} = data\r\n\t\t\t\tif (is_add) {\r\n\t\t\t\t\tif (!receiving_time && pay_type > 3) {\r\n\t\t\t\t\t\tdata.receiving_time = start_service_time\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!start_service_time && pay_type > 5) {\r\n\t\t\t\t\t\tdata.start_service_time = receiving_time\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (pay_type > 5 && !is_add) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\torder_unix_list\r\n\t\t\t\t\t} = this\r\n\t\t\t\t\tif (pay_type == 6) {\r\n\t\t\t\t\t\tlet start_service_time_unix = this.$util.DateToUnix(start_service_time) + time_long * 60\r\n\t\t\t\t\t\tdata.start_service_time_unix = start_service_time_unix\r\n\t\t\t\t\t\tlet unix_items = {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\ttime_long,\r\n\t\t\t\t\t\t\tstart_service_time,\r\n\t\t\t\t\t\t\tstart_service_time_unix\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet unixInd = order_unix_list.findIndex(item => {\r\n\t\t\t\t\t\t\treturn item.id === id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (unixInd != -1) {\r\n\t\t\t\t\t\t\torder_unix_list[unixInd] = unix_items\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\torder_unix_list.push(unix_items)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\tkey: 'order_unix_list',\r\n\t\t\t\t\t\t\tval: order_unix_list\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet unix_list = order_unix_list.filter(aitem => {\r\n\t\t\t\t\t\t\treturn aitem.id != id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (unix_list.length !== order_unix_list.length) {\r\n\t\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\t\tkey: 'order_unix_list',\r\n\t\t\t\t\t\t\t\tval: unix_list\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet lineList = this.$util.deepCopy(is_add || store_id ? this.base_bell : this.base_service)\r\n\t\t\t\tlet ind = lineList.findIndex(item => {\r\n\t\t\t\t\treturn item.title == '签字确认'\r\n\t\t\t\t})\r\n\t\t\t\tif (store_id && ind == -1) {\r\n\t\t\t\t\tlineList.push({\r\n\t\t\t\t\t\tpay_type: 7,\r\n\t\t\t\t\t\ttitle: '签字确认',\r\n\t\t\t\t\t\ttime: 'sign_time',\r\n\t\t\t\t\t\ticon: ''\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.lineList = lineList\r\n\t\t\t\tthis.detail = data\r\n\r\n\t\t\t\tlet pageLen = getCurrentPages().length\r\n\t\t\t\tthis.pageLen = pageLen\r\n\t\t\t\tif (refresh || pageLen == 1) return\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\trecorderManager = uni.getRecorderManager()\r\n\t\t\t\t//开始录音\r\n\t\t\t\trecorderManager.onStart(() => {\r\n\t\t\t\t\tthis.$util.log('开始录音')\r\n\t\t\t\t})\r\n\t\t\t\t//结束录音\r\n\t\t\t\trecorderManager.onStop((res) => {\r\n\t\t\t\t\tthis.$util.log('结束录音', res)\r\n\t\t\t\t\tthis.handlerOnSave(res)\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tduration\r\n\t\t\t\t\t} = res\r\n\t\t\t\t\tlet currentTime = parseInt(duration / 1000)\r\n\t\t\t\t\tlet isReset = this.duration_time * 1 - currentTime > 1 ? false : true\r\n\t\t\t\t\tthis.isReset = isReset\r\n\t\t\t\t\tif (isReset) {\r\n\t\t\t\t\t\tthis.handlerOnChanger()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// 录音异常\r\n\t\t\t\trecorderManager.onError((e) => {\r\n\t\t\t\t\tthis.$util.log('录音异常', e)\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tasync initRefresh() {\r\n\t\t\t\tawait this.initIndex(true)\r\n\t\t\t},\r\n\t\t\tcountEnd() {\r\n\t\t\t\tthis.$util.log(\"倒计时完了\")\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.toCountDownEnd()\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\t// 开始录音\r\n\t\t\tasync handlerOnChanger() {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tlet privacyCheck = this.$refs.user_privacy.check()\r\n\t\t\t\tif (privacyCheck) {\r\n\t\t\t\t\tthis.$refs.user_privacy.open()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tawait this.$util.checkAuth({\r\n\t\t\t\t\ttype: \"record\"\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecorder_status,\r\n\t\t\t\t\tduration_time\r\n\t\t\t\t} = this\r\n\t\t\t\tif (recorder_status) {\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tthis.$refs.recorder.stop()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\trecorderManager.stop()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tthis.$refs.recorder.start()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\trecorderManager.start({\r\n\t\t\t\t\t\tformat: 'mp3',\r\n\t\t\t\t\t\tduration: duration_time * 1000,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder_status',\r\n\t\t\t\t\tval: !recorder_status\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync handlerOnEnd() {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.$refs.recorder.stop()\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.handlerOnSave()\r\n\t\t\t\t}, 1000)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\trecorderManager.stop()\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder_status',\r\n\t\t\t\t\tval: false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync handlerOnSave(res = {}) {\r\n\t\t\t\tthis.$util.showLoading({\r\n\t\t\t\t\ttitle: `录音上传中`\r\n\t\t\t\t})\r\n\t\t\t\tlet filePath = ''\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tlet unix = parseInt(new Date().getTime() / 1000)\r\n\t\t\t\tlet name = `服务过程录音-${unix}.mp3`\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = this.recorder\r\n\t\t\t\tlet file = new File([data], name, {\r\n\t\t\t\t\ttype: 'audio/mp3'\r\n\t\t\t\t})\r\n\t\t\t\tfilePath = URL.createObjectURL(file)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tlet {\r\n\t\t\t\t\ttempFilePath,\r\n\t\t\t\t} = res\r\n\t\t\t\tfilePath = tempFilePath\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tattachment_path: link\r\n\t\t\t\t} = await this.$api.base.uploadFile({\r\n\t\t\t\t\tfilePath,\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\ttype: 'audio'\r\n\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\tname\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecorder_order_id: order_id\r\n\t\t\t\t} = this\r\n\t\t\t\tawait this.$api.technician.recordingAdd({\r\n\t\t\t\t\torder_id,\r\n\t\t\t\t\tlink\r\n\t\t\t\t})\r\n\t\t\t\tthis.$util.hideAll()\r\n\t\t\t},\r\n\t\t\t// #ifdef H5\r\n\t\t\thandlerSuccess(res) {\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder',\r\n\t\t\t\t\tval: res\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandlerError(code) {\r\n\t\t\t\tswitch (code) {\r\n\t\t\t\t\tcase '101':\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: '当前浏览器版本较低，请更换浏览器使用，推荐在微信中打开。'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '201':\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: '麦克风权限被拒绝，请刷新页面后授权麦克风权限。'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: '未知错误，请刷新页面重试'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #endif \r\n\t\t\t// 服务倒计时结束\r\n\t\t\tasync toCountDownEnd() {\r\n\t\t\t\tawait this.initRefresh()\r\n\t\t\t\tthis.$util.back()\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecorder_status,\r\n\t\t\t\t\trecorder_order_id,\r\n\t\t\t\t\tpageLen\r\n\t\t\t\t} = this\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\ttotal_time_long: time_long,\r\n\t\t\t\t\tstart_service_time = ''\r\n\t\t\t\t} = this.detail\r\n\t\t\t\tlet unix = Math.ceil(((this.$util.DateToUnix(start_service_time) + time_long * 60) * 1000 -\r\n\t\t\t\t\tnew Date().getTime()) / 1000)\r\n\t\t\t\tif (recorder_order_id == id && recorder_status && unix < 1) {\r\n\t\t\t\t\tif (pageLen == 1) {\r\n\t\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.$util.getPage(-1).handlerOnEnd()\r\n\t\t\t\t\t\tawait this.$util.getPage(-1).$refs.recorder.clear()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync toLabel() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tuser_id\r\n\t\t\t\t} = this.detail\r\n\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\turl: `/technician/pages/order/user-label?id=${user_id}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 操作加钟订单\r\n\t\t\tasync toChangeAddOrderItem(index) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tadd_order_id,\r\n\t\t\t\t\tadd_flow_path = 1\r\n\t\t\t\t} = this.detail\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tpay_type,\r\n\t\t\t\t} = add_order_id[index]\r\n\r\n\t\t\t\tif ((add_flow_path == 2 && pay_type > 2) || (add_flow_path == 1 && pay_type > 6)) {\r\n\t\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\t\turl: `/technician/pages/order/detail?id=${id}`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (pay_type == 2 || (add_flow_path == 1 && [3, 6].includes(pay_type))) {\r\n\t\t\t\t\tthis.toConfirm(pay_type == 2 ? add_flow_path == 1 ? 3 : 6 : pay_type == 3 ? 6 : 7, id)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 拒绝接单\r\n\t\t\tasync toRefuse(id = 0) {\r\n\t\t\t\tthis.oper_add_id = id\r\n\t\t\t\tthis.coach_refund_text = ''\r\n\t\t\t\tthis.$refs.refuse_item.open()\r\n\t\t\t},\r\n\t\t\t// 确认：拒绝接单\r\n\t\t\tasync confirmRefuse() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\toper_add_id,\r\n\t\t\t\t\tcoach_refund_text = ''\r\n\t\t\t\t} = this\r\n\t\t\t\tcoach_refund_text = coach_refund_text.length > 0 ? coach_refund_text.replace(\r\n\t\t\t\t\t/(^\\s*)|(\\s*$)/g, \"\") : ''\r\n\t\t\t\tif (coach_refund_text.length == 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `请输入拒单原因`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.coach_refund_text = this.coach_refund_text.substring(0, 200)\r\n\t\t\t\tthis.toConfirm(-1, oper_add_id)\r\n\t\t\t},\r\n\t\t\t// 获取定位\r\n\t\t\tasync toGetLocation() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tlat = '',\r\n\t\t\t\t\t\tlng = '',\r\n\t\t\t\t\t\taddress = ''\r\n\t\t\t\t} = this.popupInfo.location\r\n\t\t\t\tif (lat && lng && address) return\r\n\t\t\t\tthis.getUtilLocation()\r\n\t\t\t},\r\n\t\t\tasync getUtilLocation() {\r\n\t\t\t\tthis.updateUserItem({\r\n\t\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\t\tval: true\r\n\t\t\t\t})\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (this.$jweixin.isWechat()) {\r\n\t\t\t\t\tawait this.$jweixin.wxReady3();\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tlatitude: lat = 0,\r\n\t\t\t\t\t\tlongitude: lng = 0\r\n\t\t\t\t\t} = await this.$jweixin.getWxLocation2()\r\n\t\t\t\t\tthis.initUtilLocaData(lat, lng)\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tlet {\r\n\t\t\t\t\tlat = 0,\r\n\t\t\t\t\t\tlng = 0\r\n\t\t\t\t} = await this.$util.getLocation()\r\n\t\t\t\tthis.initUtilLocaData(lat, lng)\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tasync initUtilLocaData(lat, lng) {\r\n\t\t\t\tthis.updateUserItem({\r\n\t\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\t\tval: false\r\n\t\t\t\t})\r\n\t\t\t\tif (!lat && !lng) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `获取位置信息失败，请稍后重试`\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.showLoading()\r\n\t\t\t\t// 优化0112\r\n\t\t\t\tlet {\r\n\t\t\t\t\taddress\r\n\t\t\t\t} = await this.$util.getMapAddr({\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng\r\n\t\t\t\t})\r\n\t\t\t\tlet location = {\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng,\r\n\t\t\t\t\taddress\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.updateCoachAddr(location)\r\n\t\t\t\tlet data = Object.assign({}, this.popupInfo, {\r\n\t\t\t\t\tlocation\r\n\t\t\t\t})\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.popupInfo = data\r\n\t\t\t\t})\r\n\t\t\t\tthis.$util.hideAll()\r\n\t\t\t},\r\n\t\t\timgUpload(e) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\timagelist,\r\n\t\t\t\t\timgtype\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.popupInfo[imgtype] = imagelist;\r\n\t\t\t},\r\n\t\t\t// 确认： 4已出发/5已到达/7已完成\r\n\t\t\tconfirmOper() {\r\n\t\t\t\tlet popupInfo = this.$util.deepCopy(this.popupInfo)\r\n\t\t\t\tlet {\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\tparam,\r\n\t\t\t\t\timgs,\r\n\t\t\t\t\tlocation\r\n\t\t\t\t} = popupInfo\r\n\t\t\t\tlet {\r\n\t\t\t\t\tlat = 0, lng = 0, address = ''\r\n\t\t\t\t} = location\r\n\t\t\t\tif ([5, 7].includes(type) && imgs.length === 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `请先拍照`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!lat && !lng) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `请先获取当前位置信息`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif ([5, 7].includes(type)) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tpath\r\n\t\t\t\t\t} = imgs[0]\r\n\t\t\t\t\tlocation.path = path\r\n\t\t\t\t}\r\n\t\t\t\tthis.toConfirmUpdate(type, param, location)\r\n\t\t\t},\r\n\t\t\t// type: -1拒绝接单，3确定接单，4已出发，5已到达，6开始服务，7完成服务\r\n\t\t\tasync toConfirm(type, oper_add = 0) {\r\n\t\t\t\tif (this.lockTap) return\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid: order_id,\r\n\t\t\t\t} = this.detail\r\n\t\t\t\tif (oper_add) {\r\n\t\t\t\t\torder_id = oper_add\r\n\t\t\t\t}\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\torder_id,\r\n\t\t\t\t\toper_add,\r\n\t\t\t\t\ttype\r\n\t\t\t\t}\r\n\t\t\t\tif (type == -1) {\r\n\t\t\t\t\tparam.coach_refund_text = this.coach_refund_text\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\tlet arr = {\r\n\t\t\t\t\t\t4: '确认出发',\r\n\t\t\t\t\t\t5: '确认到达',\r\n\t\t\t\t\t\t7: '确认完成',\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet title = arr[type]\r\n\t\t\t\t\tthis.popupInfo = Object.assign({}, this.popupInfo, {\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\tparam,\r\n\t\t\t\t\t\timgs: [],\r\n\t\t\t\t\t\tlocation: {\r\n\t\t\t\t\t\t\tlat: 0,\r\n\t\t\t\t\t\t\tlng: 0,\r\n\t\t\t\t\t\t\taddress: ''\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$refs.oper_item.open()\r\n\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\tthis.toGetLocation()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toConfirmUpdate(type, param)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync toConfirmUpdate(type, param, location = {}) {\r\n\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tlat,\r\n\t\t\t\t\t\tlng,\r\n\t\t\t\t\t\taddress,\r\n\t\t\t\t\t\tpath\r\n\t\t\t\t\t} = location\r\n\t\t\t\t\tif (type === 4) {\r\n\t\t\t\t\t\tparam.serout_lat = lat\r\n\t\t\t\t\t\tparam.serout_lng = lng\r\n\t\t\t\t\t\tparam.serout_address = address\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 5) {\r\n\t\t\t\t\t\tparam.arrive_img = path\r\n\t\t\t\t\t\tparam.arr_lat = lat\r\n\t\t\t\t\t\tparam.arr_lng = lng\r\n\t\t\t\t\t\tparam.arr_address = address\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 7) {\r\n\t\t\t\t\t\tparam.end_img = path\r\n\t\t\t\t\t\tparam.end_lat = lat\r\n\t\t\t\t\t\tparam.end_lng = lng\r\n\t\t\t\t\t\tparam.end_address = address\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\t'-1': '已拒绝接单',\r\n\t\t\t\t\t3: '接单成功',\r\n\t\t\t\t\t4: '已成功出发',\r\n\t\t\t\t\t5: '已成功到达',\r\n\t\t\t\t\t6: '已开始服务',\r\n\t\t\t\t\t7: '服务已完成'\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.lockTap) return\r\n\t\t\t\tthis.lockTap = true\r\n\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tplugAuth,\r\n\t\t\t\t\tservice_recording_show\r\n\t\t\t\t} = this.configInfo\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecording\r\n\t\t\t\t} = plugAuth\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tisUserMedia,\r\n\t\t\t\t\trecorder_order_id,\r\n\t\t\t\t\trecorder_status,\r\n\t\t\t\t\tpageLen\r\n\t\t\t\t} = this\r\n\r\n\t\t\t\tlet flag = true\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\torder_id,\r\n\t\t\t\t\toper_add = 0\r\n\t\t\t\t} = param\r\n\t\t\t\tdelete param.oper_add\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tis_add,\r\n\t\t\t\t} = this.detail\r\n\r\n\t\t\t\tlet order_info = {}\r\n\t\t\t\ttry {\r\n\t\t\t\t\torder_info = await this.$api.technician.orderInfo({\r\n\t\t\t\t\t\tid: order_id\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (type == -1) {\r\n\t\t\t\t\t\tthis.$refs.refuse_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\t\tthis.$refs.oper_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$util.back()\r\n\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\t\t\turl: 1,\r\n\t\t\t\t\t\t\topenType: `navigateBack`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tpay_type\r\n\t\t\t\t} = order_info\r\n\r\n\t\t\t\tif (pay_type == 7 && recorder_order_id == this.detail.order_id && recorder_status) {\r\n\t\t\t\t\tif (pageLen == 1) {\r\n\t\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.$util.getPage(-1).handlerOnEnd()\r\n\t\t\t\t\t\tawait this.$util.getPage(-1).$refs.recorder.clear()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getCoachInfo()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tis_add = !is_add ? oper_add : is_add\r\n\r\n\t\t\t\tif (!is_add && pay_type < type && type === 6 && recorder_order_id != order_id &&\r\n\t\t\t\t\trecorder_status) {\r\n\t\t\t\t\tlet [res_del, {\r\n\t\t\t\t\t\tconfirm\r\n\t\t\t\t\t}] = await uni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: \"已有开始的服务还未结束录音，请确认是否完成录音并开始新的服务？\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (confirm) {\r\n\t\t\t\t\t\tif (pageLen == 1) {\r\n\t\t\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.$util.getPage(-1).handlerOnEnd()\r\n\t\t\t\t\t\t\tawait this.$util.getPage(-1).$refs.recorder.clear()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tflag = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$util.showLoading()\r\n\r\n\t\t\t\tif (!flag) {\r\n\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (type == -1) {\r\n\t\t\t\t\t\tthis.$refs.refuse_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\t\tthis.$refs.oper_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 4 || type == 5) {\r\n\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\tkey: type == 4 ? 'coach_travel_order_id' : 'coach_travel_arrive_id',\r\n\t\t\t\t\t\t\tval: order_id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.$api.technician.updateOrder(param)\r\n\t\t\t\t\tif (type == 6) {\r\n\t\t\t\t\t\tif (!is_add) {\r\n\t\t\t\t\t\t\tthis.toPlayAudio({\r\n\t\t\t\t\t\t\t\tkey: 'service_start_recording'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tif (isUserMedia && recording && service_recording_show) {\r\n\t\t\t\t\t\t\t\tlet recordMsg = pageLen == 1 ? '若录音中退出页面将不会记录录音的音频！' : ''\r\n\t\t\t\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\t\t\t\tawait uni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tcontent: `服务过程将自动录音，直至服务结束！${recordMsg}`,\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\t\t\tkey: 'recorder_order_id',\r\n\t\t\t\t\t\t\t\t\tval: order_id\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tif (pageLen == 1) {\r\n\t\t\t\t\t\t\t\t\tawait this.handlerOnChanger()\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tawait this.$util.getPage(-1).handlerOnChanger()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.detail.is_add && pageLen > 1 && this.$util.getPage(-1).detail) {\r\n\t\t\t\t\t\t\tthis.$util.getPage(-1).detail = {}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!this.detail.is_add) {\r\n\t\t\t\t\t\t\tthis.detail = {}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 7) {\r\n\t\t\t\t\t\tif (!is_add && recorder_order_id == order_id && recorder_status) {\r\n\t\t\t\t\t\t\tif (pageLen == 1) {\r\n\t\t\t\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.$util.getPage(-1).handlerOnEnd()\r\n\t\t\t\t\t\t\t\tawait this.$util.getPage(-1).$refs.recorder.clear()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.getCoachInfo()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: msg[type]\r\n\t\t\t\t\t})\r\n\t\t\t\t\tawait this.initRefresh()\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.back()\r\n\t\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.initRefresh()\r\n\t\t\t\t\t\tthis.$util.back()\r\n\t\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\t\tif (type == 7) {\r\n\t\t\t\t\t\t\tthis.getCoachInfo()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 咨询\r\n\t\t\tasync toTel() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid: order_id,\r\n\t\t\t\t\tpay_type\r\n\t\t\t\t} = this.detail\r\n\t\t\t\tif ([2, 3, 4, 5, 6].includes(pay_type)) {\r\n\t\t\t\t\tlet url = await this.$api.technician.getVirtualPhone({\r\n\t\t\t\t\t\torder_id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (!url) {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: `稍后会有电话打入，请注意接听哦`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t\topenType: `call`\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet msg = pay_type == 7 ? '服务结束' : '服务取消'\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `${msg}不能联系客户哦`\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 查看定位\r\n\t\t\tasync toMap(key) {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tlet privacyCheck = this.$refs.user_privacy.check()\r\n\t\t\t\tif (privacyCheck) {\r\n\t\t\t\t\tthis.$refs.user_privacy.open()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tlet {\r\n\t\t\t\t\taddress,\r\n\t\t\t\t\taddress_info = '',\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng\r\n\t\t\t\t} = this.detail[key]\r\n\t\t\t\tawait this.$util.checkAuth({\r\n\t\t\t\t\ttype: 'userLocation'\r\n\t\t\t\t})\r\n\t\t\t\tawait uni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t})\r\n\t\t\t\tawait uni.openLocation({\r\n\t\t\t\t\tlatitude: lat * 1,\r\n\t\t\t\t\tlongitude: lng * 1,\r\n\t\t\t\t\tname: address_info ? `${address} ${address_info}` : address,\r\n\t\t\t\t\tscale: 28\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoCopy(url) {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tlet privacyCheck = this.$refs.user_privacy.check()\r\n\t\t\t\tif (privacyCheck) {\r\n\t\t\t\t\tthis.$refs.user_privacy.open()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\topenType: 'copy'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\thandlePayOrder(num) {\r\n\t\t\t\treturn num === 1 ? '（首次下单）' : `（第${num}次下单）`\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n\t.view-btn {\r\n\t\twidth: 102rpx;\r\n\t\theight: 52rpx;\r\n\t\tborder-radius: 8rpx\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1747029156457\n      var cssReload = require(\"C:/Users/admin/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}