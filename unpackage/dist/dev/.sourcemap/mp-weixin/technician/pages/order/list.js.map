{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/list.vue?dd11","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/list.vue?4ac6","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/list.vue?211c","webpack:///C:/Users/admin/Desktop/新建文件夹/前端未编译/uniapp/wechat/technician/pages/order/list.vue?3288","uni-app:///technician/pages/order/list.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","data","options","activeIndex","tabList","title","id","number","statusType","param","page","pay_type","list","loading","index","coach_refund_text","lockTap","popupInfo","type","imgs","location","lat","lng","address","isReset","duration_time","computed","primaryColor","subColor","configInfo","isUserMedia","recorder","recorder_status","recorder_order_id","order_unix_list","userCoachStatus","changeOnAddr","noChangeLoca","onLoad","tab","onUnload","onPullDownRefresh","uni","onReachBottom","methods","initIndex","refresh","bg","recorderManager","duration","res","initRefresh","scrollTop","getList","flag","oldList","newList","arr","ids","unix_list","key","val","handerTabChange","toUnload","handlerOnChanger","privacyCheck","format","handlerOnEnd","handlerOnSave","filePath","tempFilePath","formData","link","order_id","toCountDownEnd","time_long","total_time_long","start_service_time","unix","toRefuse","confirmRefuse","toGetLocation","getUtilLocation","initUtilLocaData","imgUpload","imagelist","e","imgtype","confirmOper","path","toConfirm","toConfirmUpdate","msg","plugAuth","service_recording_show","recording","order_info","content","res_del","confirm","showCancel","confirmText","start_service_time_unix","unix_items","unixInd","setTimeout","toShield","block_user_type","url","confirmShield","user_id","toTel","openType","goDetail"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AAC4K;AAC5K,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrEA;AAAA;AAAA;AAAA;AAA8oB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACoLlqB;AAIA;AAAA;AAKA;AAAA,eAEA;EACAC,aAIA;EACAC;IACA;MACAC;MACAC;MACAC;QACA;QACA;QACA;QACAC;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;QACAF;QACAC;QACAC;MACA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC;QACAC;QACAC;MACA;MACAC;QACAX;MACA;MACAY;MACAC;MACAC;MACAC;MACAC;QACAZ;QACAS;QACAI;QACAT;QACAU;QACAC;UACAC;U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H,UADAG;MAGA,oBAEAA,SADAC;QAAAA;QAAA,gBACAD,SADAE;QAAAA;QAAA,oBACAF,SADAG;QAAAA;MAEA;QACA;UACAlB;QACA;QACA;MACA;MACA;QACA;UACAA;QACA;QACA;MACA;MACA;QACA,IACAoF,OACAtE,QADAsE;QAEArE;MACA;MACA;IACA;IACA;IACAsE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEAjB,WACA,yBADAnE;gBAEAmE;gBACAhE;kBACAgE;kBACAvD;gBACA;gBACA;kBACAT;gBACA;gBACA;kBACAgD;oBACA;oBACA;oBACA;kBACA;kBACApD;kBACA;oBACAA;oBACAS;oBACAI;oBACAT;oBACAU;oBACAC;sBACAC;sBACAC;sBACAC;oBACA;kBACA;kBACA;gBAIA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAoE;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAvE;gBACA;kBAEAC,MAIAD,SAJAC,KACAC,MAGAF,SAHAE,KACAC,UAEAH,SAFAG,SACAkE,OACArE,SADAqE;kBAEA;oBACAhF;oBACAA;oBACAA;kBACA;kBACA;oBACAA;oBACAA;oBACAA;oBACAA;kBACA;kBACA;oBACAA;oBACAA;oBACAA;oBACAA;kBACA;gBACA;gBACAmF;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBAAA,qBAKA,oBAFAC,wCACAC;gBAGAC,YACAF,SADAE;gBAIAjE,cAGA,QAHAA,aACAG,oBAEA,QAFAA,mBACAD,kBACA,QADAA;gBAGAsB;gBAGAmB,WACAhE,MADAgE;gBAGAuB;gBAAA;gBAAA;gBAAA,OAEA;kBACA1F;gBACA;cAAA;gBAFA0F;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAIA;kBACA;gBACA;gBACA;kBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAAA;cAAA;gBAAA,cAMAA,YADArF;gBAAA,MAGAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA,MAMAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAGA+B;kBACArC;kBACA4F;gBACA;cAAA;gBAAA;gBAAA;gBALAC;gBACAC;gBAAA,KAKAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA;cAAA;gBAKA7C;cAAA;gBAIA;gBAAA,IAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA;cAAA;gBAAA;gBAKA;kBACA;gBACA;gBACA;kBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;kBACA;kBACA;oBACAM;oBACAC;kBACA;gBACA;kBACA;gBACA;gBAAA,MACA3C;kBAAA;kBAAA;gBAAA;gBACA;kBACA0C;gBACA;gBAAA,MACA9B;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA,OACAY;kBACArC;kBACA4F;kBACAG;kBACAC;gBACA;cAAA;gBACA;kBACAzC;kBACAC;gBACA;gBACA;cAAA;gBAAA;gBAAA,OAKA;kBACAvD;gBACA;cAAA;gBAAA;gBAJAqE;gBACAE;gBAIAyB,yEACA3B;gBAEA4B;kBACAjG;kBACAqE;kBACAE;kBACAyB;gBACA;gBAEApE,kBACA,QADAA;gBAEAsE;kBACA;gBACA;gBACA;kBACAtE;gBACA;kBACAA;gBACA;gBACA;kBACA0B;kBACAC;gBACA;cAAA;gBAAA,MAEA3C;kBAAA;kBAAA;gBAAA;gBAAA,MACAe;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAMA;gBACA;kBACA5B;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACAoG;kBACA;kBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;kBACA;kBACA;kBACA;kBACA;kBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MACA;MACA,4BAEA,gBADAC;QAAAA;MAEA;QACA;QACA;MACA;MACA;QACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEA/F,QACA,QADAA;gBAAA,KAEA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACA;gBACA;gBAEAgG,UACA,yBADAA;gBAAA;gBAAA;gBAAA,OAGA;kBACAA;gBACA;cAAA;gBACA;gBACA;gBACA;kBACAzG;gBACA;gBACA;gBACAoG;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAM;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEAzG,KACA,yBADAA;gBAAA;gBAAA,OAEA;kBACAmE;gBACA;cAAA;gBAFAmC;gBAAA,IAGAA;kBAAA;kBAAA;gBAAA;gBACA;kBACAvG;gBACA;gBAAA;cAAA;gBAGA;kBACAuG;kBACAI;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MACA,IACA3G,KACA,sBADAA;MAEA;MACA;QACAsG;MACA;IACA;EAAA;AAEA;AAAA,2B","file":"technician/pages/order/list.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './technician/pages/order/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=3e1dec97&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"technician/pages/order/list.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=template&id=3e1dec97&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.tabList.length\n  var l0 = _vm.__map(_vm.list.data, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g1 = !(item.pay_type == 2) ? [3, 4, 5].includes(item.pay_type) : null\n    var g2 = [3, 4, 5].includes(item.pay_type)\n    return {\n      $orig: $orig,\n      g1: g1,\n      g2: g2,\n    }\n  })\n  var g3 = _vm.loading\n    ? _vm.list.current_page >= _vm.list.last_page && _vm.list.data.length > 0\n    : null\n  var g4 =\n    !_vm.loading && _vm.list.data.length <= 0 && _vm.list.current_page == 1\n  var g5 = _vm.coach_refund_text.length\n  var g6 = !(g5 > 200) ? _vm.coach_refund_text.length : null\n  var m0 = _vm.$t(\"action.attendantName\")\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      $event.stopPropagation()\n      return _vm.$util.goUrl({\n        url:\n          \"/technician/pages/order/label?id=\" +\n          item.id +\n          \"&uid=\" +\n          item.user_id,\n      })\n    }\n    _vm.e1 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$refs.refuse_item.close()\n    }\n    _vm.e2 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$refs.oper_item.close()\n    }\n    _vm.e3 = function ($event) {\n      $event.stopPropagation()\n      return _vm.$refs.shield_item.close()\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"order-pages\">\r\n\t\t<view class=\"fix\" style=\"top:-100%;left:-100%\">\r\n\t\t\t<block v-for=\"(item,index) in order_unix_list\" :key=\"index\">\r\n\t\t\t\t<block v-if=\"item.id === recorder_order_id\">\r\n\t\t\t\t\t<min-countdown :targetTime=\"item.start_service_time_unix * 1000\"\r\n\t\t\t\t\t\t@callback=\"toCountDownEnd(item.id)\"> </min-countdown>\r\n\t\t\t\t</block>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t\t<fixed>\r\n\t\t\t<tab @change=\"handerTabChange\" :list=\"tabList\" :activeIndex=\"activeIndex*1\" :activeColor=\"primaryColor\"\r\n\t\t\t\t:width=\"100/tabList.length + '%'\" height=\"100rpx\"></tab>\r\n\t\t\t<view class=\"b-1px-b\"></view>\r\n\t\t</fixed>\r\n\r\n\t\t<view @tap.stop=\"goDetail(index)\" class=\"item-child mt-md ml-lg mr-lg pd-lg fill-base radius-16 rel\"\r\n\t\t\tv-for=\"(item,index) in list.data\" :key=\"index\">\r\n\t\t\t<view v-if=\"item.is_add\">\r\n\t\t\t\t<view class=\"bell-tag flex-center f-icontext c-base abs\" :style=\"{background:primaryColor}\">加钟服务\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"space-md\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view @tap.stop=\"goShop(index)\" class=\"flex-between pb-lg\">\r\n\t\t\t\t<view class=\"f-paragraph c-title max-500 ellipsis\">订单号：{{item.order_code}}</view>\r\n\t\t\t\t<view class=\"f-caption text-bold\"\r\n\t\t\t\t\t:style=\"{color:item.pay_type==2?primaryColor: [3,4,5].includes(item.pay_type)?subColor: item.pay_type == 6 ? '#11C95E' : '#333'}\">\r\n\t\t\t\t\t{{statusType[item.pay_type]}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-center mb-lg\" v-for=\"(aitem,aindex) in item.order_goods\" :key=\"aindex\">\r\n\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t<view class=\"avatar lg radius-16\">\r\n\t\t\t\t\t<view class=\"h5-image avatar lg radius-16\"\r\n\t\t\t\t\t\t:style=\"{ backgroundImage : `url('${aitem.goods_cover}')`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t\t<image mode=\"aspectFill\" class=\"avatar lg radius-16\" :src=\"aitem.goods_cover\"></image>\r\n\t\t\t\t<!-- #endif -->\r\n\r\n\t\t\t\t<view class=\"flex-1 ml-md\">\r\n\t\t\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t\t\t<view class=\"f-mini-title c-title text-bold ellipsis\"\r\n\t\t\t\t\t\t\t:class=\"[{'max-300':aitem.refund_num>0},{'max-450':aitem.refund_num==0}]\">\r\n\t\t\t\t\t\t\t{{aitem.goods_name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"f-caption c-warning\" v-if=\"aitem.refund_num>0\">已退x{{aitem.refund_num}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"f-caption c-caption mt-md\">服务时间：{{item.start_time}}</view>\r\n\t\t\t\t\t<view class=\"flex-between\">\r\n\t\t\t\t\t\t<view class=\"flex-y-baseline f-caption c-warning\">¥<view class=\"f-title text-bold\">\r\n\t\t\t\t\t\t\t\t{{aitem.price}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"c-paragraph\">x{{aitem.num}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex-between pt-lg b-1px-t\">\r\n\t\t\t\t<view class=\"flex-y-center f-desc c-title\">总计：\r\n\t\t\t\t\t<view class=\"f-paragraph c-warning text-bold\">¥{{item.pay_price}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-warp\">\r\n\t\t\t\t\t<!-- // pay_type 2待接单，5待服务，6服务中，7已完成 -->\r\n\t\t\t\t\t<!-- 待接单 -->\r\n\t\t\t\t\t<block v-if=\"item.pay_type == 2\">\r\n\t\t\t\t\t\t<button @tap.stop=\"toRefuse(index)\" class=\"clear-btn order\">拒绝接单</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toConfirm(index,3)\" class=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\">确认接单</button>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 待服务 -->\r\n\t\t\t\t\t<block v-if=\"[3,4,5].includes(item.pay_type)\">\r\n\t\t\t\t\t\t<button @tap.stop=\"toTel(index)\" class=\"clear-btn order\">联系客户</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toConfirm(index, item.is_add || item.store_id ? 6 : item.pay_type*1+1 )\"\r\n\t\t\t\t\t\t\tclass=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\">{{item.is_add || item.store_id ? '开始服务' : item.pay_type == 3 ? '确认出发': item.pay_type == 4 ?'拍照确认到达' : '开始服务'}}</button>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 服务中 -->\r\n\t\t\t\t\t<block v-if=\"item.pay_type == 6\">\r\n\t\t\t\t\t\t<button @tap.stop=\"toTel(index)\" class=\"clear-btn order\">联系客户</button>\r\n\t\t\t\t\t\t<button @tap.stop=\"toConfirm(index,7)\" class=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\">拍照完成服务</button>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 已完成 -->\r\n\t\t\t\t\t<block v-if=\"item.pay_type == 7\">\r\n\t\t\t\t\t\t<button @tap.stop=\"toShield(index)\" class=\"clear-btn order\" v-if=\"item.can_shield\">拉黑用户</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t@tap.stop=\"$util.goUrl({url:`/technician/pages/order/label?id=${item.id}&uid=${item.user_id}`})\"\r\n\t\t\t\t\t\t\tclass=\"clear-btn order\"\r\n\t\t\t\t\t\t\t:style=\"{color:'#fff',background:primaryColor,borderColor:primaryColor}\"\r\n\t\t\t\t\t\t\tv-if=\"!item.is_add && !item.label_time\">评价客户</button>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<load-more :noMore=\"list.current_page>=list.last_page&&list.data.length>0\" :loading=\"loading\" v-if=\"loading\">\r\n\t\t</load-more>\r\n\t\t<abnor v-if=\"!loading&&list.data.length<=0&&list.current_page==1\"></abnor>\r\n\r\n\t\t<view class=\"space-footer\"></view>\r\n\r\n\t\t<uni-popup ref=\"refuse_item\" type=\"center\" :custom=\"true\">\r\n\t\t\t<view class=\"common-popup-content fill-base pd-lg radius-34\">\r\n\t\t\t\t<view class=\"title\">拒绝接单</view>\r\n\t\t\t\t<view class=\"desc\">请确认是否拒接接单</view>\r\n\t\t\t\t<textarea v-model=\"coach_refund_text\" class=\"pd-lg textarea f-desc c-title mt-lg radius-20\"\r\n\t\t\t\t\tmaxlength=\"200\" placeholder=\"请输入拒单原因\" placeholder-class=\"f-desc c-caption\"></textarea>\r\n\t\t\t\t<view class=\"flex-center mt-md\" style=\"width: 540rpx\">\r\n\t\t\t\t\t<view class=\"flex-1\"></view>\r\n\t\t\t\t\t<view>{{coach_refund_text.length>200?200:coach_refund_text.length}}/200</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"button\">\r\n\t\t\t\t\t<view @tap.stop=\"$refs.refuse_item.close()\" class=\"item-child\">取消</view>\r\n\t\t\t\t\t<view @tap.stop=\"confirmRefuse\" class=\"item-child c-base\"\r\n\t\t\t\t\t\t:style=\"{background: primaryColor,color:'#fff'}\">确定</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\r\n\t\t<uni-popup ref=\"oper_item\" type=\"center\" :custom=\"true\">\r\n\t\t\t<view class=\"common-popup-content fill-base pd-lg radius-34\">\r\n\t\t\t\t<view class=\"title\">{{popupInfo.title}}</view>\r\n\t\t\t\t<view class=\"space-md\"></view>\r\n\t\t\t\t<view class=\"flex-warp mt-md\" style=\"width: 100%;\" v-if=\"popupInfo.type !== 4\">\r\n\t\t\t\t\t<view>拍照打卡：</view>\r\n\t\t\t\t\t<view class=\"flex-1\">\r\n\t\t\t\t\t\t<upload @upload=\"imgUpload\" @del=\"imgUpload\" :imagelist=\"popupInfo.imgs\" filetype=\"picture\"\r\n\t\t\t\t\t\t\timgtype=\"imgs\" text=\"拍摄图片\" :imgsize=\"1\" :sourceType=\"2\">\r\n\t\t\t\t\t\t</upload>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-warp mt-md\" style=\"width: 100%;\">\r\n\t\t\t\t\t<view>当前地点：</view>\r\n\t\t\t\t\t<view @tap.stop=\"toGetLocation\" class=\"flex-1\"\r\n\t\t\t\t\t\t:class=\"[{'c-title':popupInfo.location.address},{'c-caption':!popupInfo.location.address}]\">\r\n\t\t\t\t\t\t{{popupInfo.location.address || '点击获取位置信息'}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"button\">\r\n\t\t\t\t\t<view @tap.stop=\"$refs.oper_item.close()\" class=\"item-child\">取消</view>\r\n\t\t\t\t\t<view @tap.stop=\"confirmOper\" class=\"item-child c-base\"\r\n\t\t\t\t\t\t:style=\"{background: primaryColor,color:'#fff'}\">确定</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\r\n\t\t<uni-popup ref=\"shield_item\" type=\"center\" :custom=\"true\">\r\n\t\t\t<view class=\"common-popup-content fill-base pd-lg radius-34\">\r\n\t\t\t\t<view class=\"title\">温馨提示</view>\r\n\t\t\t\t<view class=\"desc\">拉黑客户之后，该客户将不能在列表看到您的信息，会影响你的接单，可以在{{$t('action.attendantName')}}端 -\r\n\t\t\t\t\t拉黑客户页面移除拉黑客户，确认拉黑吗？</view>\r\n\t\t\t\t<view class=\"button\">\r\n\t\t\t\t\t<view @tap.stop=\"$refs.shield_item.close()\" class=\"item-child\">我再想想</view>\r\n\t\t\t\t\t<view @tap.stop=\"confirmShield\" class=\"item-child c-base\"\r\n\t\t\t\t\t\t:style=\"{background: primaryColor,color:'#fff'}\">确定</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\r\n\t\t<!-- #ifdef H5 -->\r\n\t\t<block v-if=\"configInfo.plugAuth.recording && configInfo.service_recording_show\">\r\n\t\t\t<media-recorder ref=\"recorder\" @success='handlerSuccess' @save=\"handlerOnSave\"\r\n\t\t\t\t@error='handlerError'></media-recorder>\r\n\t\t</block>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<user-privacy ref=\"user_privacy\" :show=\"false\"></user-privacy>\r\n\t\t<!-- #endif -->\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapActions,\r\n\t\tmapMutations\r\n\t} from \"vuex\"\r\n\t// #ifdef H5\r\n\timport MediaRecorder from '@/components/media-recorder.vue'\r\n\t// #endif\r\n\t// #ifndef H5\r\n\tvar recorderManager = null\r\n\t// #endif\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t// #ifdef H5\r\n\t\t\tMediaRecorder\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\toptions: {},\r\n\t\t\t\tactiveIndex: 0,\r\n\t\t\t\ttabList: [{\r\n\t\t\t\t\t// \ttitle: '全部',\r\n\t\t\t\t\t// \tid: 0\r\n\t\t\t\t\t// }, {\r\n\t\t\t\t\ttitle: '待接单',\r\n\t\t\t\t\tid: 2,\r\n\t\t\t\t\tnumber: 0\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '待服务',\r\n\t\t\t\t\tid: 5,\r\n\t\t\t\t\tnumber: 0\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '服务中',\r\n\t\t\t\t\tid: 6,\r\n\t\t\t\t\tnumber: 0\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '已完成',\r\n\t\t\t\t\tid: 7,\r\n\t\t\t\t\tnumber: 0\r\n\t\t\t\t}],\r\n\t\t\t\tstatusType: {\r\n\t\t\t\t\t2: '待接单',\r\n\t\t\t\t\t3: '已接单',\r\n\t\t\t\t\t4: '已出发',\r\n\t\t\t\t\t5: '已到达',\r\n\t\t\t\t\t6: '服务中',\r\n\t\t\t\t\t7: '已完成',\r\n\t\t\t\t\t8: '待转单'\r\n\t\t\t\t},\r\n\t\t\t\tparam: {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tpay_type: 0,\r\n\t\t\t\t},\r\n\t\t\t\tlist: {\r\n\t\t\t\t\tdata: []\r\n\t\t\t\t},\r\n\t\t\t\tloading: true,\r\n\t\t\t\tindex: -1,\r\n\t\t\t\tcoach_refund_text: '',\r\n\t\t\t\tlockTap: false,\r\n\t\t\t\tpopupInfo: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tindex: '',\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t\tparam: {},\r\n\t\t\t\t\timgs: [],\r\n\t\t\t\t\tlocation: {\r\n\t\t\t\t\t\tlat: 0,\r\n\t\t\t\t\t\tlng: 0,\r\n\t\t\t\t\t\taddress: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tisReset: false,\r\n\t\t\t\tduration_time: 600\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: mapState({\r\n\t\t\tprimaryColor: state => state.config.configInfo.primaryColor,\r\n\t\t\tsubColor: state => state.config.configInfo.subColor,\r\n\t\t\tconfigInfo: state => state.config.configInfo,\r\n\t\t\tisUserMedia: state => state.order.isUserMedia,\r\n\t\t\trecorder: state => state.order.recorder,\r\n\t\t\trecorder_status: state => state.order.recorder_status,\r\n\t\t\trecorder_order_id: state => state.order.recorder_order_id,\r\n\t\t\torder_unix_list: state => state.order.order_unix_list,\r\n\t\t\tuserCoachStatus: state => state.user.userCoachStatus,\r\n\t\t\tchangeOnAddr: state => state.user.changeOnAddr,\r\n\t\t\tnoChangeLoca: state => state.user.noChangeLoca,\r\n\t\t}),\r\n\t\tasync onLoad(options) {\r\n\t\t\tthis.options = options\r\n\t\t\tlet {\r\n\t\t\t\ttab = 0\r\n\t\t\t} = options\r\n\t\t\tthis.activeIndex = tab\r\n\t\t\tthis.initIndex()\r\n\t\t},\r\n\t\t// #ifdef H5 \r\n\t\tdestroyed() {\r\n\t\t\tthis.toUnload()\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifndef H5\r\n\t\tonUnload() {\r\n\t\t\tthis.toUnload()\r\n\t\t},\r\n\t\t// #endif  \r\n\t\tonPullDownRefresh() {\r\n\t\t\t// #ifndef APP-PLUS\r\n\t\t\tuni.showNavigationBarLoading()\r\n\t\t\t// #endif\r\n\t\t\tthis.initRefresh();\r\n\t\t\tuni.stopPullDownRefresh()\r\n\t\t},\r\n\t\tonReachBottom() {\r\n\t\t\tif (this.list.current_page >= this.list.last_page || this.loading) return;\r\n\t\t\tthis.param.page = this.param.page + 1;\r\n\t\t\tthis.loading = true;\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions(['getConfigInfo', 'getCoachInfo', 'toPlayAudio']),\r\n\t\t\t...mapMutations(['updateUserItem', 'updateOrderItem']),\r\n\t\t\tasync initIndex(refresh = false) {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (!refresh && this.$jweixin.isWechat()) {\r\n\t\t\t\t\tawait this.$jweixin.initJssdk();\r\n\t\t\t\t\tthis.$jweixin.wxReady(() => {\r\n\t\t\t\t\t\tthis.$jweixin.hideOptionMenu()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tif (!this.configInfo.id || !this.configInfo.hasOwnProperty('free_fare_bear')) {\r\n\t\t\t\t\tawait this.getConfigInfo()\r\n\t\t\t\t}\r\n\t\t\t\tawait this.getList()\r\n\t\t\t\tthis.$util.setNavigationBarColor({\r\n\t\t\t\t\tbg: this.primaryColor\r\n\t\t\t\t})\r\n\t\t\t\tif (refresh) return\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\trecorderManager = uni.getRecorderManager()\r\n\t\t\t\t//开始录音\r\n\t\t\t\trecorderManager.onStart(() => {\r\n\t\t\t\t\tthis.$util.log('开始录音')\r\n\t\t\t\t})\r\n\t\t\t\t//结束录音\r\n\t\t\t\trecorderManager.onStop((res) => {\r\n\t\t\t\t\tthis.$util.log('结束录音', res)\r\n\t\t\t\t\tthis.handlerOnSave(res)\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tduration\r\n\t\t\t\t\t} = res\r\n\t\t\t\t\tlet currentTime = parseInt(duration / 1000)\r\n\t\t\t\t\tlet isReset = this.duration_time * 1 - currentTime > 1 ? false : true\r\n\t\t\t\t\tthis.isReset = isReset\r\n\t\t\t\t\tif (isReset) {\r\n\t\t\t\t\t\tthis.handlerOnChanger()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// 录音异常\r\n\t\t\t\trecorderManager.onError((e) => {\r\n\t\t\t\t\tthis.$util.log('录音异常', e)\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tinitRefresh() {\r\n\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\tduration: 0,\r\n\t\t\t\t\tscrollTop: 0\r\n\t\t\t\t})\r\n\t\t\t\tthis.param.page = 1\r\n\t\t\t\tthis.initIndex(true)\r\n\t\t\t},\r\n\t\t\tasync getList(flag = false) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tlist: oldList,\r\n\t\t\t\t\tparam,\r\n\t\t\t\t\ttabList,\r\n\t\t\t\t\tactiveIndex\r\n\t\t\t\t} = this\r\n\t\t\t\tparam.pay_type = tabList[activeIndex].id\r\n\t\t\t\tlet newList = await this.$api.technician.orderList(param)\r\n\r\n\t\t\t\tlet arr = newList.data.filter(aitem => {\r\n\t\t\t\t\treturn aitem.pay_type > 6\r\n\t\t\t\t})\r\n\t\t\t\tif (arr.length > 0) {\r\n\t\t\t\t\tlet ids = arr.map(aitem => {\r\n\t\t\t\t\t\treturn aitem.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\torder_unix_list\r\n\t\t\t\t\t} = this\r\n\t\t\t\t\tlet unix_list = order_unix_list.filter(aitem => {\r\n\t\t\t\t\t\treturn !ids.includes(aitem.id)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (unix_list.length !== order_unix_list.length) {\r\n\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\tkey: 'order_unix_list',\r\n\t\t\t\t\t\t\tval: unix_list\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!flag) {\r\n\t\t\t\t\tif (this.param.page == 1) {\r\n\t\t\t\t\t\tthis.list = newList\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewList.data = oldList.data.concat(newList.data)\r\n\t\t\t\t\t\tthis.list = newList\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.tabList[0].number = newList.agent_order_count\r\n\t\t\t\tthis.tabList[1].number = newList.wait_order_count\r\n\t\t\t\tthis.tabList[2].number = newList.service_order_count\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tthis.$util.hideAll()\r\n\t\t\t},\r\n\t\t\thanderTabChange(index) {\r\n\t\t\t\tthis.activeIndex = index;\r\n\t\t\t\tthis.$util.showLoading()\r\n\t\t\t\tthis.param.page = 1;\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\tasync toUnload() {\r\n\t\t\t\tthis.updateUserItem({\r\n\t\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\t\tval: false\r\n\t\t\t\t})\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder_status',\r\n\t\t\t\t\tval: false\r\n\t\t\t\t})\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder_order_id',\r\n\t\t\t\t\tval: 0\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 开始录音\r\n\t\t\tasync handlerOnChanger() {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tlet privacyCheck = this.$refs.user_privacy.check()\r\n\t\t\t\tif (privacyCheck) {\r\n\t\t\t\t\tthis.$refs.user_privacy.open()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tawait this.$util.checkAuth({\r\n\t\t\t\t\ttype: \"record\"\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecorder_status,\r\n\t\t\t\t\tduration_time\r\n\t\t\t\t} = this\r\n\t\t\t\tif (recorder_status) {\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tthis.$refs.recorder.stop()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\trecorderManager.stop()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tthis.$refs.recorder.start()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\trecorderManager.start({\r\n\t\t\t\t\t\tformat: 'mp3',\r\n\t\t\t\t\t\tduration: duration_time * 1000,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder_status',\r\n\t\t\t\t\tval: !recorder_status\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync handlerOnEnd() {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tthis.$refs.recorder.stop()\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.handlerOnSave()\r\n\t\t\t\t}, 1000)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\trecorderManager.stop()\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder_status',\r\n\t\t\t\t\tval: false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync handlerOnSave(res = {}) {\r\n\t\t\t\tthis.$util.showLoading({\r\n\t\t\t\t\ttitle: `录音上传中`\r\n\t\t\t\t})\r\n\t\t\t\tlet filePath = ''\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tlet unix = parseInt(new Date().getTime() / 1000)\r\n\t\t\t\tlet name = `服务过程录音-${unix}.mp3`\r\n\t\t\t\tlet {\r\n\t\t\t\t\tdata\r\n\t\t\t\t} = this.recorder\r\n\t\t\t\tlet file = new File([data], name, {\r\n\t\t\t\t\ttype: 'audio/mp3'\r\n\t\t\t\t})\r\n\t\t\t\tfilePath = URL.createObjectURL(file)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tlet {\r\n\t\t\t\t\ttempFilePath,\r\n\t\t\t\t} = res\r\n\t\t\t\tfilePath = tempFilePath\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tattachment_path: link\r\n\t\t\t\t} = await this.$api.base.uploadFile({\r\n\t\t\t\t\tfilePath,\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\ttype: 'audio'\r\n\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\tname\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecorder_order_id: order_id\r\n\t\t\t\t} = this\r\n\t\t\t\tawait this.$api.technician.recordingAdd({\r\n\t\t\t\t\torder_id,\r\n\t\t\t\t\tlink\r\n\t\t\t\t})\r\n\t\t\t\tthis.$util.hideAll()\r\n\t\t\t},\r\n\t\t\t// #ifdef H5\r\n\t\t\thandlerSuccess(res) {\r\n\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\tkey: 'recorder',\r\n\t\t\t\t\tval: res\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandlerError(code) {\r\n\t\t\t\tswitch (code) {\r\n\t\t\t\t\tcase '101':\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: '当前浏览器版本较低，请更换浏览器使用，推荐在微信中打开。'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '201':\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: '麦克风权限被拒绝，请刷新页面后授权麦克风权限。'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: '未知错误，请刷新页面重试'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #endif \r\n\t\t\t// 服务倒计时结束\r\n\t\t\tasync toCountDownEnd(id) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecorder_status,\r\n\t\t\t\t\trecorder_order_id\r\n\t\t\t\t} = this\r\n\t\t\t\tif (recorder_order_id == id && recorder_status) {\r\n\t\t\t\t\tlet data = await this.$api.technician.orderInfo({\r\n\t\t\t\t\t\tid\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\ttotal_time_long: time_long,\r\n\t\t\t\t\t\tstart_service_time = ''\r\n\t\t\t\t\t} = data\r\n\t\t\t\t\tlet unix = Math.ceil(((this.$util.DateToUnix(start_service_time) + time_long * 60) * 1000 -\r\n\t\t\t\t\t\tnew Date().getTime()) / 1000)\r\n\t\t\t\t\tif (unix < 1) {\r\n\t\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 拒绝接单\r\n\t\t\tasync toRefuse(index) {\r\n\t\t\t\tthis.index = index\r\n\t\t\t\tthis.coach_refund_text = ''\r\n\t\t\t\tthis.$refs.refuse_item.open()\r\n\t\t\t},\r\n\t\t\t// 确认：拒绝接单\r\n\t\t\tasync confirmRefuse() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tcoach_refund_text\r\n\t\t\t\t} = this\r\n\t\t\t\tcoach_refund_text = coach_refund_text.length > 0 ? coach_refund_text.replace(/(^\\s*)|(\\s*$)/g,\r\n\t\t\t\t\t\"\") : ''\r\n\t\t\t\tif (coach_refund_text.length == 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `请输入拒单原因`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.coach_refund_text = this.coach_refund_text.substring(0, 200)\r\n\t\t\t\tlet {\r\n\t\t\t\t\tindex,\r\n\t\t\t\t} = this\r\n\t\t\t\tthis.toConfirm(index, -1)\r\n\t\t\t},\r\n\t\t\t// 获取定位\r\n\t\t\tasync toGetLocation() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tlat = '',\r\n\t\t\t\t\t\tlng = '',\r\n\t\t\t\t\t\taddress = ''\r\n\t\t\t\t} = this.popupInfo.location\r\n\t\t\t\tif (lat && lng && address) return\r\n\t\t\t\tthis.getUtilLocation()\r\n\t\t\t},\r\n\t\t\tasync getUtilLocation() {\r\n\t\t\t\tthis.updateUserItem({\r\n\t\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\t\tval: true\r\n\t\t\t\t})\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (this.$jweixin.isWechat()) {\r\n\t\t\t\t\tawait this.$jweixin.wxReady3();\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tlatitude: lat = 0,\r\n\t\t\t\t\t\tlongitude: lng = 0\r\n\t\t\t\t\t} = await this.$jweixin.getWxLocation2()\r\n\t\t\t\t\tthis.initUtilLocaData(lat, lng)\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tlet {\r\n\t\t\t\t\tlat = 0,\r\n\t\t\t\t\t\tlng = 0\r\n\t\t\t\t} = await this.$util.getLocation()\r\n\t\t\t\tthis.initUtilLocaData(lat, lng)\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tasync initUtilLocaData(lat, lng) {\r\n\t\t\t\tthis.updateUserItem({\r\n\t\t\t\t\tkey: 'useChooseLocation',\r\n\t\t\t\t\tval: false\r\n\t\t\t\t})\r\n\t\t\t\tif (!lat && !lng) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `获取位置信息失败，请稍后重试`\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.showLoading()\r\n\t\t\t\t// 优化0112\r\n\t\t\t\tlet {\r\n\t\t\t\t\taddress\r\n\t\t\t\t} = await this.$util.getMapAddr({\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng\r\n\t\t\t\t})\r\n\t\t\t\tlet location = {\r\n\t\t\t\t\tlat,\r\n\t\t\t\t\tlng,\r\n\t\t\t\t\taddress\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.updateCoachAddr(location)\r\n\t\t\t\tlet data = Object.assign({}, this.popupInfo, {\r\n\t\t\t\t\tlocation\r\n\t\t\t\t})\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.popupInfo = data\r\n\t\t\t\t})\r\n\t\t\t\tthis.$util.hideAll()\r\n\t\t\t},\r\n\t\t\timgUpload(e) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\timagelist,\r\n\t\t\t\t\timgtype\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.popupInfo[imgtype] = imagelist;\r\n\t\t\t},\r\n\t\t\t// 确认： 4已出发/5已到达/7已完成\r\n\t\t\tconfirmOper() {\r\n\t\t\t\tlet popupInfo = this.$util.deepCopy(this.popupInfo)\r\n\t\t\t\tlet {\r\n\t\t\t\t\tindex,\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\tparam,\r\n\t\t\t\t\timgs,\r\n\t\t\t\t\tlocation\r\n\t\t\t\t} = popupInfo\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tlat = 0, lng = 0, address = ''\r\n\t\t\t\t} = location\r\n\t\t\t\tif ([5, 7].includes(type) && imgs.length === 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `请先拍照`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!lat && !lng) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `请先获取当前位置信息`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif ([5, 7].includes(type)) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tpath\r\n\t\t\t\t\t} = imgs[0]\r\n\t\t\t\t\tlocation.path = path\r\n\t\t\t\t}\r\n\t\t\t\tthis.toConfirmUpdate(index, type, param, location)\r\n\t\t\t},\r\n\t\t\t// type: -1拒绝接单，3确定接单，4已出发，5已到达，6开始服务，7已完成\r\n\t\t\tasync toConfirm(index, type) {\r\n\t\t\t\tif (this.lockTap) return\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid: order_id,\r\n\t\t\t\t} = this.list.data[index]\r\n\t\t\t\torder_id = order_id * 1\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\torder_id,\r\n\t\t\t\t\ttype\r\n\t\t\t\t}\r\n\t\t\t\tif (type == -1) {\r\n\t\t\t\t\tparam.coach_refund_text = this.coach_refund_text\r\n\t\t\t\t}\r\n\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\tlet arr = {\r\n\t\t\t\t\t\t4: '确认出发',\r\n\t\t\t\t\t\t5: '确认到达',\r\n\t\t\t\t\t\t7: '确认完成',\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet title = arr[type]\r\n\t\t\t\t\tthis.popupInfo = Object.assign({}, this.popupInfo, {\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\tparam,\r\n\t\t\t\t\t\timgs: [],\r\n\t\t\t\t\t\tlocation: {\r\n\t\t\t\t\t\t\tlat: 0,\r\n\t\t\t\t\t\t\tlng: 0,\r\n\t\t\t\t\t\t\taddress: ''\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$refs.oper_item.open()\r\n\t\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\tthis.toGetLocation()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toConfirmUpdate(index, type, param)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync toConfirmUpdate(index, type, param, location = {}) {\r\n\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tlat,\r\n\t\t\t\t\t\tlng,\r\n\t\t\t\t\t\taddress,\r\n\t\t\t\t\t\tpath\r\n\t\t\t\t\t} = location\r\n\t\t\t\t\tif (type === 4) {\r\n\t\t\t\t\t\tparam.serout_lat = lat\r\n\t\t\t\t\t\tparam.serout_lng = lng\r\n\t\t\t\t\t\tparam.serout_address = address\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 5) {\r\n\t\t\t\t\t\tparam.arrive_img = path\r\n\t\t\t\t\t\tparam.arr_lat = lat\r\n\t\t\t\t\t\tparam.arr_lng = lng\r\n\t\t\t\t\t\tparam.arr_address = address\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 7) {\r\n\t\t\t\t\t\tparam.end_img = path\r\n\t\t\t\t\t\tparam.end_lat = lat\r\n\t\t\t\t\t\tparam.end_lng = lng\r\n\t\t\t\t\t\tparam.end_address = address\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\t'-1': '已拒绝接单',\r\n\t\t\t\t\t3: '接单成功',\r\n\t\t\t\t\t4: '已成功出发',\r\n\t\t\t\t\t5: '已成功到达',\r\n\t\t\t\t\t6: '已开始服务',\r\n\t\t\t\t\t7: '服务已完成'\r\n\t\t\t\t}\r\n\t\t\t\tif (this.lockTap) return\r\n\t\t\t\tthis.lockTap = true\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tplugAuth,\r\n\t\t\t\t\tservice_recording_show\r\n\t\t\t\t} = this.configInfo\r\n\t\t\t\tlet {\r\n\t\t\t\t\trecording\r\n\t\t\t\t} = plugAuth\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tisUserMedia,\r\n\t\t\t\t\trecorder_order_id,\r\n\t\t\t\t\trecorder_status\r\n\t\t\t\t} = this\r\n\r\n\t\t\t\tlet flag = true\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\torder_id\r\n\t\t\t\t} = param\r\n\r\n\t\t\t\tlet order_info = {}\r\n\t\t\t\ttry {\r\n\t\t\t\t\torder_info = await this.$api.technician.orderInfo({\r\n\t\t\t\t\t\tid: order_id\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (type == -1) {\r\n\t\t\t\t\t\tthis.$refs.refuse_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\t\tthis.$refs.oper_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.param.page = 1\r\n\t\t\t\t\tthis.getList()\r\n\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tpay_type\r\n\t\t\t\t} = order_info\r\n\r\n\t\t\t\tif (pay_type == 7 && recorder_order_id == order_id && recorder_status) {\r\n\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pay_type < type && type === 6 && recorder_order_id != order_id && recorder_status) {\r\n\t\t\t\t\tlet [res_del, {\r\n\t\t\t\t\t\tconfirm\r\n\t\t\t\t\t}] = await uni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: \"已有开始的服务还未结束录音，请确认是否完成录音并开始新的服务？\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (confirm) {\r\n\t\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tflag = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$util.showLoading()\r\n\r\n\t\t\t\tif (!flag) {\r\n\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (type == -1) {\r\n\t\t\t\t\t\tthis.$refs.refuse_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ([4, 5, 7].includes(type)) {\r\n\t\t\t\t\t\tthis.$refs.oper_item.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.$api.technician.updateOrder(param)\r\n\t\t\t\t\tif (type == 4 || type == 5) {\r\n\t\t\t\t\t\tthis.list.data[index].pay_type = type\r\n\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\tkey: type == 4 ? 'coach_travel_order_id' : 'coach_travel_arrive_id',\r\n\t\t\t\t\t\t\tval: order_id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.list.data.splice(index, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 6) {\r\n\t\t\t\t\t\tthis.toPlayAudio({\r\n\t\t\t\t\t\t\tkey: 'service_start_recording'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (isUserMedia && recording && service_recording_show) {\r\n\t\t\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\t\t\tawait uni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: \"服务过程将自动录音，直至服务结束！若录音中退出页面将不会记录录音的音频！\",\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\t\tkey: 'recorder_order_id',\r\n\t\t\t\t\t\t\t\tval: order_id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.handlerOnChanger()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\ttotal_time_long: time_long,\r\n\t\t\t\t\t\t\tstart_service_time\r\n\t\t\t\t\t\t} = await this.$api.technician.orderInfo({\r\n\t\t\t\t\t\t\tid: order_id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tlet start_service_time_unix = this.$util.DateToUnix(start_service_time) +\r\n\t\t\t\t\t\t\ttime_long * 60\r\n\r\n\t\t\t\t\t\tlet unix_items = {\r\n\t\t\t\t\t\t\tid: order_id,\r\n\t\t\t\t\t\t\ttime_long,\r\n\t\t\t\t\t\t\tstart_service_time,\r\n\t\t\t\t\t\t\tstart_service_time_unix\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\torder_unix_list\r\n\t\t\t\t\t\t} = this\r\n\t\t\t\t\t\tlet unixInd = order_unix_list.findIndex(item => {\r\n\t\t\t\t\t\t\treturn item.id === order_id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (unixInd != -1) {\r\n\t\t\t\t\t\t\torder_unix_list[unixInd] = unix_items\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\torder_unix_list.push(unix_items)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.updateOrderItem({\r\n\t\t\t\t\t\t\tkey: 'order_unix_list',\r\n\t\t\t\t\t\t\tval: order_unix_list\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (type == 7) {\r\n\t\t\t\t\t\tif (recorder_order_id == order_id && recorder_status) {\r\n\t\t\t\t\t\t\tawait this.handlerOnEnd()\r\n\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\tthis.$refs.recorder.clear()\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: msg[type]\r\n\t\t\t\t\t})\r\n\t\t\t\t\tawait this.getList(true)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\t\tif (type == 7) {\r\n\t\t\t\t\t\t\tthis.getCoachInfo()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.param.page = 1\r\n\t\t\t\t\t\tthis.getList()\r\n\t\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\t\tif (type == 7) {\r\n\t\t\t\t\t\t\tthis.getCoachInfo()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 屏蔽用户\r\n\t\t\ttoShield(index) {\r\n\t\t\t\tthis.index = index\r\n\t\t\t\tlet {\r\n\t\t\t\t\tblock_user_type = 1\r\n\t\t\t\t} = this.configInfo\r\n\t\t\t\tif (block_user_type == 1) {\r\n\t\t\t\t\tthis.$refs.shield_item.open()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\turl: `/user/pages/feedback/box?blockuser=1&index=${index}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 确认：屏蔽用户\r\n\t\t\tasync confirmShield() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tindex\r\n\t\t\t\t} = this\r\n\t\t\t\tif (this.lockTap) return;\r\n\t\t\t\tthis.lockTap = true;\r\n\t\t\t\tthis.$util.showLoading()\r\n\t\t\t\tlet {\r\n\t\t\t\t\tuser_id\r\n\t\t\t\t} = this.list.data[index]\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait this.$api.technician.shieldUserAdd({\r\n\t\t\t\t\t\tuser_id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\tthis.$refs.shield_item.close()\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `屏蔽成功`\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.initRefresh()\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.lockTap = false\r\n\t\t\t\t\t\tthis.$util.hideAll()\r\n\t\t\t\t\t}, 2000)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 联系客户\r\n\t\t\tasync toTel(index) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid\r\n\t\t\t\t} = this.list.data[index]\r\n\t\t\t\tlet url = await this.$api.technician.getVirtualPhone({\r\n\t\t\t\t\torder_id: id\r\n\t\t\t\t})\r\n\t\t\t\tif (!url) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: `稍后会有电话打入，请注意接听哦`\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\topenType: `call`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 订单详情\r\n\t\t\tgoDetail(index) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tid\r\n\t\t\t\t} = this.list.data[index]\r\n\t\t\t\tlet url = `/technician/pages/order/detail?id=${id}`\r\n\t\t\t\tthis.$util.goUrl({\r\n\t\t\t\t\turl\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n</style>"],"sourceRoot":""}